// ==UserScript==
// @name         V2Next
// @namespace    http://tampermonkey.net/
// @version      9.5
// @author       zyronon
// @description  V2Next - 一个好用的V2EX脚本！ 已适配移动端
// @license      GPL License
// @icon         https://v2next.netlify.app/favicon.ico
// @homepage     https://github.com/zyronon/web-scripts
// @homepageURL  https://github.com/zyronon/web-scripts
// @supportURL   https://update.greasyfork.org/scripts/458024/V2Next.user.js
// @downloadURL  https://update.greasyfork.org/scripts/458024/V2Next.user.js
// @updateURL    https://update.greasyfork.org/scripts/458024/V2Next.user.js
// @match        https://v2ex.com/
// @match        https://v2ex.com/?tab=*
// @match        https://v2ex.com/t/*
// @match        https://v2ex.com/recent*
// @match        https://v2ex.com/go/*
// @match        https://v2ex.com/member/*
// @match        https://v2ex.com/changes*
// @match        https://*.v2ex.com/
// @match        https://*.v2ex.com/?tab=*
// @match        https://*.v2ex.com/t/*
// @match        https://*.v2ex.com/recent*
// @match        https://*.v2ex.com/go/*
// @match        https://*.v2ex.com/member/*
// @match        https://*.v2ex.com/changes*
// @require      https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js
// @require      https://cdn.jsdelivr.net/npm/vue@3.4.14/dist/vue.global.prod.js
// @grant        GM_addStyle
// @grant        GM_notification
// @grant        GM_openInTab
// @grant        GM_registerMenuCommand
// ==/UserScript==


(function (vue) {
    'use strict';

    var j=(e=>(e.Home="Home",e.Node="Node",e.Post="Post",e.Member="Member",e.Changes="Changes",e))(j||{}),O=(e=>(e[e.FloorInFloor=0]="FloorInFloor",e[e.FloorInFloorNoCallUser=4]="FloorInFloorNoCallUser",e[e.FloorInFloorNested=5]="FloorInFloorNested",e[e.Like=1]="Like",e[e.V2exOrigin=2]="V2exOrigin",e[e.OnlyOp=3]="OnlyOp",e[e.New=6]="New",e))(O||{});const zt=400,Cn={name:"Tooltip",props:{title:{type:String,default(){return ""}},disabled:{type:Boolean,default(){return !1}}},data(){return {show:!1}},methods:{showPop(e){if(this.disabled||!this.title)return;e.stopPropagation();let t=e.target.getBoundingClientRect();this.show=!0,vue.nextTick(()=>{var i,a;let n=(a=(i=this.$refs)==null?void 0:i.tip)==null?void 0:a.getBoundingClientRect();if(!n)return;t.top<50?this.$refs.tip.style.top=t.top+t.height+10+"px":this.$refs.tip.style.top=t.top-n.height-10+"px";let o=n.width,s=t.width;this.$refs.tip.style.left=t.left-(o-s)/2+"px";});}},render(){let e=this.$slots.default()[0];return vue.createVNode(vue.Fragment,null,[this.show&&this.title&&vue.createVNode(vue.Teleport,{to:"body"},{default:()=>[vue.createVNode(vue.Transition,{name:"fade"},{default:()=>[vue.createVNode("div",{ref:"tip",className:"tip"},[this.title])]})]}),vue.createVNode(e,{onClick:()=>this.show=!1,onmouseenter:t=>this.showPop(t),onmouseleave:()=>this.show=!1},null)])}};const X=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n},Ue=X(Cn,[["__scopeId","data-v-ee672411"]]),Sn=vue.defineComponent({__name:"BaseSwitch",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){return (n,o)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["switch",{active:n.modelValue}]),onClick:o[0]||(o[0]=s=>n.$emit("update:modelValue",!n.modelValue))},null,2))}});const ht=X(Sn,[["__scopeId","data-v-e7c0fbef"]]);var In=(()=>typeof GM_notification<"u"?GM_notification:void 0)(),Ln=(()=>typeof GM_openInTab<"u"?GM_openInTab:void 0)(),Ce=(()=>typeof GM_registerMenuCommand<"u"?GM_registerMenuCommand:void 0)();const I={getAllReply(e=[]){return e.sort((t,n)=>t.i-n.i).reduce((t,n)=>(t=t.concat(n.replyList),t),[])},findChildren(e,t,n){var u;const o=(c,d,r)=>{c.level=r.level+1;let m=n.findIndex(b=>b.floor===c.floor);m>-1&&(n[m].isUse=!0),r.children.push(this.findChildren(c,d,n));};e.children=[];let s=[];for(let c=0;c<t.length;c++){let d=t[c];d.isUse||d.replyFloor===e.floor&&(d.replyUsers.length===1&&d.replyUsers[0]===e.username?(d.isUse=!0,s.push({endList:t.slice(c+1),currentItem:d})):d.isWrong=!0);}s.reverse().map(({currentItem:c,endList:d})=>{o(c,d,e);});let i=t.findIndex(c=>{var d;return c.username===e.username&&((d=c.replyUsers)==null?void 0:d[0])!==e.username}),a=i>-1?t.slice(0,i):t;for(let c=0;c<a.length;c++){let d=a[c];if(!d.isUse){if(d.replyUsers.length===1){if(d.replyFloor!==-1&&((u=n[d.replyFloor-1])==null?void 0:u.username)===d.replyUsers[0])continue;let r=t.slice(c+1);if(d.username===e.username){d.replyUsers[0]===e.username&&o(d,r,e);break}else d.replyUsers[0]===e.username&&o(d,r,e);}else if(d.username===e.username)break}}return e.children=e.children.sort((c,d)=>c.floor-d.floor),e},createNestedList(e=[]){if(!e.length)return [];let t=window.clone(e),n=[];return t.map((o,s)=>{let i=t.slice(0,s),a=Array.from(new Set(i.map(c=>c.username))),u=t.slice(s+1);if(s===0)n.push(this.findChildren(o,u,t));else if(!o.isUse){let c=!1;o.replyUsers.length?o.replyUsers.length>1?c=!0:c=!a.find(d=>d===o.replyUsers[0]):c=!0,c&&(o.level=0,n.push(this.findChildren(o,u,t)));}}),n},createNestedRedundantList(e=[]){if(!e.length)return [];let t=window.clone(e),n=[];return t.map((o,s)=>{let i=t.slice(0,s),a=Array.from(new Set(i.map(c=>c.username))),u=t.slice(s+1);if(s===0)n.push(this.findChildren(o,u,t));else if(o.isUse){let c=window.clone(o);c.children=[],c.level=0,c.isDup=!0,n.push(c);}else {let c=!1;o.replyUsers.length?o.replyUsers.length>1?c=!0:c=!a.find(d=>d===o.replyUsers[0]):c=!0,c&&(o.level=0,n.push(this.findChildren(o,u,t)));}}),n},parseA(e){let t=e.href,n;return t.includes("/t/")&&(n=e.pathname.substring(3)),{href:t,id:n,title:e.innerText}},checkPhotoLink2Img(e){if(e){try{[/<a((?!<a).)*href="https?:\/\/((?!<a).)*imgur.com((?!<a).)*>(((?!<a).)*)<\/a>/g,/<a((?!<a).)*href="https?:\/\/((?!<a).)*\.(gif|png|jpg|jpeg|GIF|PNG|JPG|JPEG) ((?!<a).)*>(((?!<a).)*)<\/a>/g].map((n,o)=>{[...e.matchAll(n)].map(a=>{let u=o===0?a[4]:a[5];if(u){let c=u.toLowerCase(),d=u;c.includes(".png")||c.includes(".jpg")||c.includes(".jpeg")||c.includes(".gif")||(d=u+".png"),e=e.replace(a[0],`<img src="${d}" data-originUrl="${u}" data-notice="此img标签由v2ex-超级增强脚本解析" style="max-width: 100%">`);}});});}catch{console.log("正则解析html里面的a标签的图片链接出错了");}return e}},async checkPostReplies(e,t=!0){return new Promise(async n=>{let o=await I.getPostDetailByApi(e);if((o==null?void 0:o.replies)>zt)return t&&I.openNewTab(`https://${location.origin}/t/${e}?p=1&script=1`),n(!0);n(!1);})},async sleep(e){return new Promise(t=>{setTimeout(t,e);})},openNewTab(e,t=!1){Ln(e,{active:t});},async cbChecker(e,t=0){if(window.cb)window.cb(e);else {for(;!window.cb&&t<30;)await I.sleep(500),t++;window.cb&&window.cb(e);}},initMonkeyMenu(){try{Ce("脚本设置",()=>{I.cbChecker({type:"openSetting"});}),Ce("仓库地址",()=>{I.openNewTab(window.const.git);}),Ce("反馈 & 建议",I.feedback);}catch{console.error("无法使用Tampermonkey");}},clone(e){return JSON.parse(JSON.stringify(e))},feedback(){I.openNewTab(ge.issue);},checkPageType(e){let t=e||window.location,n={pageType:null,pageData:{id:"",pageNo:null},username:""};if(t.pathname==="/")n.pageType=j.Home;else if(t.pathname==="/changes")n.pageType=j.Changes;else if(t.pathname==="/recent")n.pageType=j.Changes;else if(t.href.match(/.com\/?tab=/))n.pageType=j.Home;else if(t.href.match(/.com\/go\//))t.href.includes("/links")||(n.pageType=j.Node);else if(t.href.match(/.com\/member/))n.pageType=j.Member,n.username=t.pathname.replace("/member/","").replace("/replies","");else {let o=t.href.match(/.com\/t\/([\d]+)/);if(o&&!t.pathname.includes("review")&&!t.pathname.includes("info")&&(n.pageType=j.Post,n.pageData.id=o[1],t.search)){let s=t.href.match(/\?p=([\d]+)/);s&&(n.pageData.pageNo=Number(s[1]));}}return n},getPostDetailByApi(e){return new Promise(t=>{fetch(`${location.origin}/api/topics/show.json?id=${e}`).then(async n=>{if(n.status===200){let o=await n.json();if(o){let s=o[0];t(s);}}});})},appendPostContent(e,t){let n=document.createElement("a");n.href=e.href,n.classList.add("post-content");let o=document.createElement("div");o.innerHTML=e.content_rendered,n.append(o),t.append(n),(()=>{var i;if(o.clientHeight<300)n.classList.add("show-all");else {let a=document.createElement("div");a.classList.add("show-more"),a.innerHTML="显示更多/收起",a.onclick=function(u){u.stopPropagation(),n.classList.toggle("show-all");},(i=n.parentNode)==null||i.append(a);}})();},initConfig(){return new Promise(e=>{let t=localStorage.getItem("v2ex-config");if(t){let n=JSON.parse(t);n=n[window.user.username??"default"],n&&(window.config=Object.assign(window.config,n));}e(window.config);})}},Jt={allReplyUsers:[],content_rendered:"",createDate:"",createDateAgo:"",lastReplyDate:"",fr:"",replyList:[],nestedReplies:[],nestedRedundReplies:[],username:"",url:"",href:"",member:{},node:{title:"",url:""},headerTemplate:"",title:"",id:"",type:"post",once:"",replyCount:0,clickCount:0,thankCount:0,collectCount:0,lastReadFloor:0,isFavorite:!1,isIgnore:!1,isThanked:!1,isReport:!1,inList:!1},Me=(e={})=>Object.assign(I.clone(Jt),e),Rn={tagPrefix:"--用户标签--",tags:{},tagsId:"",username:"",avatar:"",readPrefix:"--已读楼层--",readNoteItemId:"",readList:{},imgurPrefix:"--imgur图片删除hash--",imgurList:{},imgurNoteId:"",configPrefix:"--config--",configNoteId:""},ge={pageType:void 0,pageData:{pageNo:1},targetUserName:"",currentVersion:2,isNight:!1,cb:null,stopMe:null,postList:[],git:"https://github.com/zyronon/web-scripts",shortGit:"zyronon/web-scripts",issue:"https://github.com/zyronon/web-scripts/issues",pcLog:"https://greasyfork.org/zh-CN/scripts/458024/versions",pcScript:"https://greasyfork.org/zh-CN/scripts/458024",mobileScript:"https://greasyfork.org/zh-CN/scripts/485356",homeUrl:"https://v2next.netlify.app/"},Mn={showToolbar:!0,autoOpenDetail:!0,openTag:!1,clickPostItemOpenDetail:!0,closePostDetailBySpace:!0,contentAutoCollapse:!0,viewType:"table",commentDisplayType:O.FloorInFloorNoCallUser,newTabOpen:!1,newTabOpenActive:!1,base64:!0,sov2ex:!1,postWidth:"",showTopReply:!0,topReplyLoveMinCount:3,topReplyCount:3,autoJumpLastReadFloor:!1,rememberLastReadFloor:!1,autoSignin:!0,customBgColor:"",version:ge.currentVersion,collectBrowserNotice:!1,fontSizeType:"normal"},Ne=/^[a-z0-9]+(-[a-z0-9]+)*$/,Ke=(e,t,n,o="")=>{const s=e.split(":");if(e.slice(0,1)==="@"){if(s.length<2||s.length>3)return null;o=s.shift().slice(1);}if(s.length>3||!s.length)return null;if(s.length>1){const u=s.pop(),c=s.pop(),d={provider:s.length>0?s[0]:o,prefix:c,name:u};return t&&!je(d)?null:d}const i=s[0],a=i.split("-");if(a.length>1){const u={provider:o,prefix:a.shift(),name:a.join("-")};return t&&!je(u)?null:u}if(n&&o===""){const u={provider:o,prefix:"",name:i};return t&&!je(u,n)?null:u}return null},je=(e,t)=>e?!!((e.provider===""||e.provider.match(Ne))&&(t&&e.prefix===""||e.prefix.match(Ne))&&e.name.match(Ne)):!1,Kt=Object.freeze({left:0,top:0,width:16,height:16}),ze=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Xe=Object.freeze({...Kt,...ze}),it=Object.freeze({...Xe,body:"",hidden:!1});function Nn(e,t){const n={};!e.hFlip!=!t.hFlip&&(n.hFlip=!0),!e.vFlip!=!t.vFlip&&(n.vFlip=!0);const o=((e.rotate||0)+(t.rotate||0))%4;return o&&(n.rotate=o),n}function Mt(e,t){const n=Nn(e,t);for(const o in it)o in ze?o in e&&!(o in n)&&(n[o]=ze[o]):o in t?n[o]=t[o]:o in e&&(n[o]=e[o]);return n}function On(e,t){const n=e.icons,o=e.aliases||Object.create(null),s=Object.create(null);function i(a){if(n[a])return s[a]=[];if(!(a in s)){s[a]=null;const u=o[a]&&o[a].parent,c=u&&i(u);c&&(s[a]=[u].concat(c));}return s[a]}return (t||Object.keys(n).concat(Object.keys(o))).forEach(i),s}function En(e,t,n){const o=e.icons,s=e.aliases||Object.create(null);let i={};function a(u){i=Mt(o[u]||s[u],i);}return a(t),n.forEach(a),Mt(e,i)}function Xt(e,t){const n=[];if(typeof e!="object"||typeof e.icons!="object")return n;e.not_found instanceof Array&&e.not_found.forEach(s=>{t(s,null),n.push(s);});const o=On(e);for(const s in o){const i=o[s];i&&(t(s,En(e,s,i)),n.push(s));}return n}const Pn={provider:"",aliases:{},not_found:{},...Kt};function et(e,t){for(const n in t)if(n in e&&typeof e[n]!=typeof t[n])return !1;return !0}function Yt(e){if(typeof e!="object"||e===null)return null;const t=e;if(typeof t.prefix!="string"||!e.icons||typeof e.icons!="object"||!et(e,Pn))return null;const n=t.icons;for(const s in n){const i=n[s];if(!s.match(Ne)||typeof i.body!="string"||!et(i,it))return null}const o=t.aliases||Object.create(null);for(const s in o){const i=o[s],a=i.parent;if(!s.match(Ne)||typeof a!="string"||!n[a]&&!o[a]||!et(i,it))return null}return t}const Nt=Object.create(null);function Dn(e,t){return {provider:e,prefix:t,icons:Object.create(null),missing:new Set}}function be(e,t){const n=Nt[e]||(Nt[e]=Object.create(null));return n[t]||(n[t]=Dn(e,t))}function ft(e,t){return Yt(t)?Xt(t,(n,o)=>{o?e.icons[n]=o:e.missing.add(n);}):[]}function An(e,t,n){try{if(typeof n.body=="string")return e.icons[t]={...n},!0}catch{}return !1}let Pe=!1;function Qt(e){return typeof e=="boolean"&&(Pe=e),Pe}function Vn(e){const t=typeof e=="string"?Ke(e,!0,Pe):e;if(t){const n=be(t.provider,t.prefix),o=t.name;return n.icons[o]||(n.missing.has(o)?null:void 0)}}function Un(e,t){const n=Ke(e,!0,Pe);if(!n)return !1;const o=be(n.provider,n.prefix);return An(o,n.name,t)}function $n(e,t){if(typeof e!="object")return !1;if(typeof t!="string"&&(t=e.provider||""),Pe&&!t&&!e.prefix){let s=!1;return Yt(e)&&(e.prefix="",Xt(e,(i,a)=>{a&&Un(i,a)&&(s=!0);})),s}const n=e.prefix;if(!je({provider:t,prefix:n,name:"a"}))return !1;const o=be(t,n);return !!ft(o,e)}const Zt=Object.freeze({width:null,height:null}),en=Object.freeze({...Zt,...ze}),Hn=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Fn=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Ot(e,t,n){if(t===1)return e;if(n=n||100,typeof e=="number")return Math.ceil(e*t*n)/n;if(typeof e!="string")return e;const o=e.split(Hn);if(o===null||!o.length)return e;const s=[];let i=o.shift(),a=Fn.test(i);for(;;){if(a){const u=parseFloat(i);isNaN(u)?s.push(i):s.push(Math.ceil(u*t*n)/n);}else s.push(i);if(i=o.shift(),i===void 0)return s.join("");a=!a;}}const Bn=e=>e==="unset"||e==="undefined"||e==="none";function Gn(e,t){const n={...Xe,...e},o={...en,...t},s={left:n.left,top:n.top,width:n.width,height:n.height};let i=n.body;[n,o].forEach(g=>{const f=[],p=g.hFlip,T=g.vFlip;let k=g.rotate;p?T?k+=2:(f.push("translate("+(s.width+s.left).toString()+" "+(0-s.top).toString()+")"),f.push("scale(-1 1)"),s.top=s.left=0):T&&(f.push("translate("+(0-s.left).toString()+" "+(s.height+s.top).toString()+")"),f.push("scale(1 -1)"),s.top=s.left=0);let S;switch(k<0&&(k-=Math.floor(k/4)*4),k=k%4,k){case 1:S=s.height/2+s.top,f.unshift("rotate(90 "+S.toString()+" "+S.toString()+")");break;case 2:f.unshift("rotate(180 "+(s.width/2+s.left).toString()+" "+(s.height/2+s.top).toString()+")");break;case 3:S=s.width/2+s.left,f.unshift("rotate(-90 "+S.toString()+" "+S.toString()+")");break}k%2===1&&(s.left!==s.top&&(S=s.left,s.left=s.top,s.top=S),s.width!==s.height&&(S=s.width,s.width=s.height,s.height=S)),f.length&&(i='<g transform="'+f.join(" ")+'">'+i+"</g>");});const a=o.width,u=o.height,c=s.width,d=s.height;let r,m;a===null?(m=u===null?"1em":u==="auto"?d:u,r=Ot(m,c/d)):(r=a==="auto"?c:a,m=u===null?Ot(r,d/c):u==="auto"?d:u);const b={},v=(g,f)=>{Bn(f)||(b[g]=f.toString());};return v("width",r),v("height",m),b.viewBox=s.left.toString()+" "+s.top.toString()+" "+c.toString()+" "+d.toString(),{attributes:b,body:i}}const jn=/\sid="(\S+)"/g,Wn="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let qn=0;function zn(e,t=Wn){const n=[];let o;for(;o=jn.exec(e);)n.push(o[1]);if(!n.length)return e;const s="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(i=>{const a=typeof t=="function"?t(i):t+(qn++).toString(),u=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+u+')([")]|\\.[a-z])',"g"),"$1"+a+s+"$3");}),e=e.replace(new RegExp(s,"g"),""),e}const ot=Object.create(null);function Jn(e,t){ot[e]=t;}function lt(e){return ot[e]||ot[""]}function mt(e){let t;if(typeof e.resources=="string")t=[e.resources];else if(t=e.resources,!(t instanceof Array)||!t.length)return null;return {resources:t,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:e.random===!0,index:e.index||0,dataAfterTimeout:e.dataAfterTimeout!==!1}}const gt=Object.create(null),Re=["https://api.simplesvg.com","https://api.unisvg.com"],We=[];for(;Re.length>0;)Re.length===1||Math.random()>.5?We.push(Re.shift()):We.push(Re.pop());gt[""]=mt({resources:["https://api.iconify.design"].concat(We)});function Kn(e,t){const n=mt(t);return n===null?!1:(gt[e]=n,!0)}function yt(e){return gt[e]}const Xn=()=>{let e;try{if(e=fetch,typeof e=="function")return e}catch{}};let Et=Xn();function Yn(e,t){const n=yt(e);if(!n)return 0;let o;if(!n.maxURL)o=0;else {let s=0;n.resources.forEach(a=>{s=Math.max(s,a.length);});const i=t+".json?icons=";o=n.maxURL-s-n.path.length-i.length;}return o}function Qn(e){return e===404}const Zn=(e,t,n)=>{const o=[],s=Yn(e,t),i="icons";let a={type:i,provider:e,prefix:t,icons:[]},u=0;return n.forEach((c,d)=>{u+=c.length+1,u>=s&&d>0&&(o.push(a),a={type:i,provider:e,prefix:t,icons:[]},u=c.length),a.icons.push(c);}),o.push(a),o};function es(e){if(typeof e=="string"){const t=yt(e);if(t)return t.path}return "/"}const ts=(e,t,n)=>{if(!Et){n("abort",424);return}let o=es(t.provider);switch(t.type){case"icons":{const i=t.prefix,u=t.icons.join(","),c=new URLSearchParams({icons:u});o+=i+".json?"+c.toString();break}case"custom":{const i=t.uri;o+=i.slice(0,1)==="/"?i.slice(1):i;break}default:n("abort",400);return}let s=503;Et(e+o).then(i=>{const a=i.status;if(a!==200){setTimeout(()=>{n(Qn(a)?"abort":"next",a);});return}return s=501,i.json()}).then(i=>{if(typeof i!="object"||i===null){setTimeout(()=>{i===404?n("abort",i):n("next",s);});return}setTimeout(()=>{n("success",i);});}).catch(()=>{n("next",s);});},ns={prepare:Zn,send:ts};function ss(e){const t={loaded:[],missing:[],pending:[]},n=Object.create(null);e.sort((s,i)=>s.provider!==i.provider?s.provider.localeCompare(i.provider):s.prefix!==i.prefix?s.prefix.localeCompare(i.prefix):s.name.localeCompare(i.name));let o={provider:"",prefix:"",name:""};return e.forEach(s=>{if(o.name===s.name&&o.prefix===s.prefix&&o.provider===s.provider)return;o=s;const i=s.provider,a=s.prefix,u=s.name,c=n[i]||(n[i]=Object.create(null)),d=c[a]||(c[a]=be(i,a));let r;u in d.icons?r=t.loaded:a===""||d.missing.has(u)?r=t.missing:r=t.pending;const m={provider:i,prefix:a,name:u};r.push(m);}),t}function tn(e,t){e.forEach(n=>{const o=n.loaderCallbacks;o&&(n.loaderCallbacks=o.filter(s=>s.id!==t));});}function is(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;const t=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!t.length)return;let n=!1;const o=e.provider,s=e.prefix;t.forEach(i=>{const a=i.icons,u=a.pending.length;a.pending=a.pending.filter(c=>{if(c.prefix!==s)return !0;const d=c.name;if(e.icons[d])a.loaded.push({provider:o,prefix:s,name:d});else if(e.missing.has(d))a.missing.push({provider:o,prefix:s,name:d});else return n=!0,!0;return !1}),a.pending.length!==u&&(n||tn([e],i.id),i.callback(a.loaded.slice(0),a.missing.slice(0),a.pending.slice(0),i.abort));});}));}let os=0;function ls(e,t,n){const o=os++,s=tn.bind(null,n,o);if(!t.pending.length)return s;const i={id:o,icons:t,callback:e,abort:s};return n.forEach(a=>{(a.loaderCallbacks||(a.loaderCallbacks=[])).push(i);}),s}function rs(e,t=!0,n=!1){const o=[];return e.forEach(s=>{const i=typeof s=="string"?Ke(s,t,n):s;i&&o.push(i);}),o}var as={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function cs(e,t,n,o){const s=e.resources.length,i=e.random?Math.floor(Math.random()*s):e.index;let a;if(e.random){let M=e.resources.slice(0);for(a=[];M.length>1;){const F=Math.floor(Math.random()*M.length);a.push(M[F]),M=M.slice(0,F).concat(M.slice(F+1));}a=a.concat(M);}else a=e.resources.slice(i).concat(e.resources.slice(0,i));const u=Date.now();let c="pending",d=0,r,m=null,b=[],v=[];typeof o=="function"&&v.push(o);function g(){m&&(clearTimeout(m),m=null);}function f(){c==="pending"&&(c="aborted"),g(),b.forEach(M=>{M.status==="pending"&&(M.status="aborted");}),b=[];}function p(M,F){F&&(v=[]),typeof M=="function"&&v.push(M);}function T(){return {startTime:u,payload:t,status:c,queriesSent:d,queriesPending:b.length,subscribe:p,abort:f}}function k(){c="failed",v.forEach(M=>{M(void 0,r);});}function S(){b.forEach(M=>{M.status==="pending"&&(M.status="aborted");}),b=[];}function W(M,F,K){const q=F!=="success";switch(b=b.filter(Z=>Z!==M),c){case"pending":break;case"failed":if(q||!e.dataAfterTimeout)return;break;default:return}if(F==="abort"){r=K,k();return}if(q){r=K,b.length||(a.length?J():k());return}if(g(),S(),!e.random){const Z=e.resources.indexOf(M.resource);Z!==-1&&Z!==e.index&&(e.index=Z);}c="completed",v.forEach(Z=>{Z(K);});}function J(){if(c!=="pending")return;g();const M=a.shift();if(M===void 0){if(b.length){m=setTimeout(()=>{g(),c==="pending"&&(S(),k());},e.timeout);return}k();return}const F={status:"pending",resource:M,callback:(K,q)=>{W(F,K,q);}};b.push(F),d++,m=setTimeout(J,e.rotate),n(M,t,F.callback);}return setTimeout(J),T}function nn(e){const t={...as,...e};let n=[];function o(){n=n.filter(u=>u().status==="pending");}function s(u,c,d){const r=cs(t,u,c,(m,b)=>{o(),d&&d(m,b);});return n.push(r),r}function i(u){return n.find(c=>u(c))||null}return {query:s,find:i,setIndex:u=>{t.index=u;},getIndex:()=>t.index,cleanup:o}}function Pt(){}const tt=Object.create(null);function ds(e){if(!tt[e]){const t=yt(e);if(!t)return;const n=nn(t),o={config:t,redundancy:n};tt[e]=o;}return tt[e]}function us(e,t,n){let o,s;if(typeof e=="string"){const i=lt(e);if(!i)return n(void 0,424),Pt;s=i.send;const a=ds(e);a&&(o=a.redundancy);}else {const i=mt(e);if(i){o=nn(i);const a=e.resources?e.resources[0]:"",u=lt(a);u&&(s=u.send);}}return !o||!s?(n(void 0,424),Pt):o.query(t,s,n)().abort}const Dt="iconify2",De="iconify",sn=De+"-count",At=De+"-version",on=36e5,ps=168;function rt(e,t){try{return e.getItem(t)}catch{}}function wt(e,t,n){try{return e.setItem(t,n),!0}catch{}}function Vt(e,t){try{e.removeItem(t);}catch{}}function at(e,t){return wt(e,sn,t.toString())}function ct(e){return parseInt(rt(e,sn))||0}const Ye={local:!0,session:!0},ln={local:new Set,session:new Set};let _t=!1;function hs(e){_t=e;}let Ge=typeof window>"u"?{}:window;function rn(e){const t=e+"Storage";try{if(Ge&&Ge[t]&&typeof Ge[t].length=="number")return Ge[t]}catch{}Ye[e]=!1;}function an(e,t){const n=rn(e);if(!n)return;const o=rt(n,At);if(o!==Dt){if(o){const u=ct(n);for(let c=0;c<u;c++)Vt(n,De+c.toString());}wt(n,At,Dt),at(n,0);return}const s=Math.floor(Date.now()/on)-ps,i=u=>{const c=De+u.toString(),d=rt(n,c);if(typeof d=="string"){try{const r=JSON.parse(d);if(typeof r=="object"&&typeof r.cached=="number"&&r.cached>s&&typeof r.provider=="string"&&typeof r.data=="object"&&typeof r.data.prefix=="string"&&t(r,u))return !0}catch{}Vt(n,c);}};let a=ct(n);for(let u=a-1;u>=0;u--)i(u)||(u===a-1?(a--,at(n,a)):ln[e].add(u));}function cn(){if(!_t){hs(!0);for(const e in Ye)an(e,t=>{const n=t.data,o=t.provider,s=n.prefix,i=be(o,s);if(!ft(i,n).length)return !1;const a=n.lastModified||-1;return i.lastModifiedCached=i.lastModifiedCached?Math.min(i.lastModifiedCached,a):a,!0});}}function fs(e,t){const n=e.lastModifiedCached;if(n&&n>=t)return n===t;if(e.lastModifiedCached=t,n)for(const o in Ye)an(o,s=>{const i=s.data;return s.provider!==e.provider||i.prefix!==e.prefix||i.lastModified===t});return !0}function ms(e,t){_t||cn();function n(o){let s;if(!Ye[o]||!(s=rn(o)))return;const i=ln[o];let a;if(i.size)i.delete(a=Array.from(i).shift());else if(a=ct(s),!at(s,a+1))return;const u={cached:Math.floor(Date.now()/on),provider:e.provider,data:t};return wt(s,De+a.toString(),JSON.stringify(u))}t.lastModified&&!fs(e,t.lastModified)||Object.keys(t.icons).length&&(t.not_found&&(t=Object.assign({},t),delete t.not_found),n("local")||n("session"));}function Ut(){}function gs(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,is(e);}));}function ys(e,t){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(t).sort():e.iconsToLoad=t,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;const{provider:n,prefix:o}=e,s=e.iconsToLoad;delete e.iconsToLoad;let i;if(!s||!(i=lt(n)))return;i.prepare(n,o,s).forEach(u=>{us(n,u,c=>{if(typeof c!="object")u.icons.forEach(d=>{e.missing.add(d);});else try{const d=ft(e,c);if(!d.length)return;const r=e.pendingIcons;r&&d.forEach(m=>{r.delete(m);}),ms(e,c);}catch(d){console.error(d);}gs(e);});});}));}const ws=(e,t)=>{const n=rs(e,!0,Qt()),o=ss(n);if(!o.pending.length){let c=!0;return t&&setTimeout(()=>{c&&t(o.loaded,o.missing,o.pending,Ut);}),()=>{c=!1;}}const s=Object.create(null),i=[];let a,u;return o.pending.forEach(c=>{const{provider:d,prefix:r}=c;if(r===u&&d===a)return;a=d,u=r,i.push(be(d,r));const m=s[d]||(s[d]=Object.create(null));m[r]||(m[r]=[]);}),o.pending.forEach(c=>{const{provider:d,prefix:r,name:m}=c,b=be(d,r),v=b.pendingIcons||(b.pendingIcons=new Set);v.has(m)||(v.add(m),s[d][r].push(m));}),i.forEach(c=>{const{provider:d,prefix:r}=c;s[d][r].length&&ys(c,s[d][r]);}),t?ls(t,o,i):Ut};function _s(e,t){const n={...e};for(const o in t){const s=t[o],i=typeof s;o in Zt?(s===null||s&&(i==="string"||i==="number"))&&(n[o]=s):i===typeof n[o]&&(n[o]=o==="rotate"?s%4:s);}return n}const vs=/[\s,]+/;function bs(e,t){t.split(vs).forEach(n=>{switch(n.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0;break}});}function ks(e,t=0){const n=e.replace(/^-?[0-9.]*/,"");function o(s){for(;s<0;)s+=4;return s%4}if(n===""){const s=parseInt(e);return isNaN(s)?0:o(s)}else if(n!==e){let s=0;switch(n){case"%":s=25;break;case"deg":s=90;}if(s){let i=parseFloat(e.slice(0,e.length-n.length));return isNaN(i)?0:(i=i/s,i%1===0?o(i):0)}}return t}function Ts(e,t){let n=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const o in t)n+=" "+o+'="'+t[o]+'"';return '<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+e+"</svg>"}function xs(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Cs(e){return "data:image/svg+xml,"+xs(e)}function Ss(e){return 'url("'+Cs(e)+'")'}const $t={...en,inline:!1},Is={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},Ls={display:"inline-block"},dt={backgroundColor:"currentColor"},dn={backgroundColor:"transparent"},Ht={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},Ft={webkitMask:dt,mask:dt,background:dn};for(const e in Ft){const t=Ft[e];for(const n in Ht)t[e+n]=Ht[n];}const qe={};["horizontal","vertical"].forEach(e=>{const t=e.slice(0,1)+"Flip";qe[e+"-flip"]=t,qe[e.slice(0,1)+"-flip"]=t,qe[e+"Flip"]=t;});function Bt(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}const Gt=(e,t)=>{const n=_s($t,t),o={...Is},s=t.mode||"svg",i={},a=t.style,u=typeof a=="object"&&!(a instanceof Array)?a:{};for(let f in t){const p=t[f];if(p!==void 0)switch(f){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":n[f]=p===!0||p==="true"||p===1;break;case"flip":typeof p=="string"&&bs(n,p);break;case"color":i.color=p;break;case"rotate":typeof p=="string"?n[f]=ks(p):typeof p=="number"&&(n[f]=p);break;case"ariaHidden":case"aria-hidden":p!==!0&&p!=="true"&&delete o["aria-hidden"];break;default:{const T=qe[f];T?(p===!0||p==="true"||p===1)&&(n[T]=!0):$t[f]===void 0&&(o[f]=p);}}}const c=Gn(e,n),d=c.attributes;if(n.inline&&(i.verticalAlign="-0.125em"),s==="svg"){o.style={...i,...u},Object.assign(o,d);let f=0,p=t.id;return typeof p=="string"&&(p=p.replace(/-/g,"_")),o.innerHTML=zn(c.body,p?()=>p+"ID"+f++:"iconifyVue"),vue.h("svg",o)}const{body:r,width:m,height:b}=e,v=s==="mask"||(s==="bg"?!1:r.indexOf("currentColor")!==-1),g=Ts(r,{...d,width:m+"",height:b+""});return o.style={...i,"--svg":Ss(g),width:Bt(d.width),height:Bt(d.height),...Ls,...v?dt:dn,...u},vue.h("span",o)};Qt(!0);Jn("",ns);if(typeof document<"u"&&typeof window<"u"){cn();const e=window;if(e.IconifyPreload!==void 0){const t=e.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof t=="object"&&t!==null&&(t instanceof Array?t:[t]).forEach(o=>{try{(typeof o!="object"||o===null||o instanceof Array||typeof o.icons!="object"||typeof o.prefix!="string"||!$n(o))&&console.error(n);}catch{console.error(n);}});}if(e.IconifyProviders!==void 0){const t=e.IconifyProviders;if(typeof t=="object"&&t!==null)for(let n in t){const o="IconifyProviders["+n+"] is invalid.";try{const s=t[n];if(typeof s!="object"||!s||s.resources===void 0)continue;Kn(n,s)||console.error(o);}catch{console.error(o);}}}}const Rs={...Xe,body:""},se=vue.defineComponent({inheritAttrs:!1,data(){return {iconMounted:!1,counter:0}},mounted(){this._name="",this._loadingIcon=null,this.iconMounted=!0;},unmounted(){this.abortLoading();},methods:{abortLoading(){this._loadingIcon&&(this._loadingIcon.abort(),this._loadingIcon=null);},getIcon(e,t){if(typeof e=="object"&&e!==null&&typeof e.body=="string")return this._name="",this.abortLoading(),{data:e};let n;if(typeof e!="string"||(n=Ke(e,!1,!0))===null)return this.abortLoading(),null;const o=Vn(n);if(!o)return (!this._loadingIcon||this._loadingIcon.name!==e)&&(this.abortLoading(),this._name="",o!==null&&(this._loadingIcon={name:e,abort:ws([n],()=>{this.counter++;})})),null;this.abortLoading(),this._name!==e&&(this._name=e,t&&t(e));const s=["iconify"];return n.prefix!==""&&s.push("iconify--"+n.prefix),n.provider!==""&&s.push("iconify--"+n.provider),{data:o,classes:s}}},render(){this.counter;const e=this.$attrs,t=this.iconMounted?this.getIcon(e.icon,e.onLoad):null;if(!t)return Gt(Rs,e);let n=e;return t.classes&&(n={...e,class:(typeof e.class=="string"?e.class+" ":"")+t.classes.join(" ")}),Gt({...Xe,...t.data},n)}}),Ms={class:"display-type"},Ns={style:{position:"relative"}},Os={key:0,class:"type-list"},Es=vue.defineComponent({__name:"BaseSelect",props:{displayType:{}},emits:["update:displayType"],setup(e,{emit:t}){const n=e,o=t;let s=vue.reactive({showChangeDisplayType:!1,lastDisplayType:null});function i(c){[O.New,O.Like].includes(n.displayType)||(s.lastDisplayType=n.displayType),o("update:displayType",c),s.showChangeDisplayType=!1;}function a(){if([O.New,O.Like].includes(n.displayType))return i(s.lastDisplayType??O.FloorInFloorNoCallUser);s.showChangeDisplayType=!s.showChangeDisplayType;}const u=vue.computed(()=>{let c=n.displayType;switch([O.New,O.Like].includes(n.displayType)&&(c=s.lastDisplayType),c){case O.FloorInFloorNoCallUser:return "楼中楼";case O.FloorInFloor:return "楼中楼(@)";case O.FloorInFloorNested:return "冗余楼中楼";case O.V2exOrigin:return "V2原版";case O.OnlyOp:return "只看楼主";default:return "楼中楼"}});return (c,d)=>(vue.openBlock(),vue.createElementBlock("div",Ms,[vue.createElementVNode("div",{class:vue.normalizeClass(["type",c.displayType===vue.unref(O).New&&"active"]),onClick:d[0]||(d[0]=r=>i(vue.unref(O).New))},"最新 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["type",c.displayType===vue.unref(O).Like&&"active"]),onClick:d[1]||(d[1]=r=>i(vue.unref(O).Like))},"最热 ",2),vue.createElementVNode("div",Ns,[vue.createElementVNode("div",{class:vue.normalizeClass(["type",![vue.unref(O).New,vue.unref(O).Like].includes(c.displayType)&&"active"]),onClick:a},[vue.createElementVNode("span",null,vue.toDisplayString(u.value),1),vue.createVNode(vue.unref(se),{icon:"mingcute:down-line"})],2),vue.unref(s).showChangeDisplayType?(vue.openBlock(),vue.createElementBlock("div",Os,[vue.createElementVNode("div",{class:vue.normalizeClass(["item",c.displayType===vue.unref(O).FloorInFloorNoCallUser&&"active"]),onClick:d[2]||(d[2]=vue.withModifiers(r=>i(vue.unref(O).FloorInFloorNoCallUser),["stop"]))},"楼中楼 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",c.displayType===vue.unref(O).FloorInFloor&&"active"]),onClick:d[3]||(d[3]=vue.withModifiers(r=>i(vue.unref(O).FloorInFloor),["stop"]))},"楼中楼(@) ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",c.displayType===vue.unref(O).FloorInFloorNested&&"active"]),onClick:d[4]||(d[4]=vue.withModifiers(r=>i(vue.unref(O).FloorInFloorNested),["stop"]))},"冗余楼中楼 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",c.displayType===vue.unref(O).OnlyOp&&"active"]),onClick:d[5]||(d[5]=vue.withModifiers(r=>i(vue.unref(O).OnlyOp),["stop"]))},"只看楼主 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",c.displayType===vue.unref(O).V2exOrigin&&"active"]),onClick:d[6]||(d[6]=vue.withModifiers(r=>i(vue.unref(O).V2exOrigin),["stop"]))},"V2原版 ",2)])):vue.createCommentVNode("",!0)])]))}});const vt=X(Es,[["__scopeId","data-v-e4f684be"]]),Ps=vue.defineComponent({__name:"BaseLoading",props:{size:{default:"normal"}},setup(e){return (t,n)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["loading",[t.size]])},null,2))}});const Qe=X(Ps,[["__scopeId","data-v-2697baa2"]]),Ds={key:1,class:"key-notice"},As={class:"key"},Vs=vue.defineComponent({__name:"BaseButton",props:{keyboard:{},active:{type:Boolean},disabled:{type:Boolean},loading:{type:Boolean},size:{default:"normal"},type:{default:"primary"}},emits:["click"],setup(e){return (t,n)=>(vue.openBlock(),vue.createBlock(Ue,{disabled:!t.keyboard,title:`快捷键: ${t.keyboard}`},{default:vue.withCtx(()=>[vue.createElementVNode("div",vue.mergeProps({class:"base-button"},t.$attrs,{onClick:n[0]||(n[0]=o=>!t.disabled&&!t.loading&&t.$emit("click",o)),class:[t.active&&"active",t.size,t.type,(t.disabled||t.loading)&&"disabled",!t.disabled&&"hvr-grow"]}),[vue.createElementVNode("span",{style:vue.normalizeStyle({opacity:t.loading?0:1})},[vue.renderSlot(t.$slots,"default",{},void 0,!0)],4),t.loading?(vue.openBlock(),vue.createBlock(Qe,{key:0,size:"small"})):vue.createCommentVNode("",!0),t.keyboard?(vue.openBlock(),vue.createElementBlock("div",Ds,[vue.createElementVNode("span",As,vue.toDisplayString(t.keyboard),1)])):vue.createCommentVNode("",!0)],16)]),_:3},8,["disabled","title"]))}});const ye=X(Vs,[["__scopeId","data-v-5a7d79ba"]]);const Us={name:"PopConfirm",components:{BaseButton:ye},props:{title:{type:String,default(){return ""}},disabled:{type:Boolean,default(){return !1}}},data(){return {show:!1}},methods:{showPop(e){if(this.disabled)return;let t=e.target.getBoundingClientRect();this.show=!0,vue.nextTick(()=>{this.$refs.tip.style.top=t.top+"px",this.$refs.tip.style.left=t.left+t.width/2-50+"px";});},confirm(){this.show=!1,this.$emit("confirm");},cancel(){this.show=!1,this.$emit("cancel");}}},$s={class:"pop-confirm"},Hs={key:0,ref:"tip",class:"pop-confirm-content"},Fs={class:"text"},Bs={class:"options"};function Gs(e,t,n,o,s,i){const a=vue.resolveComponent("BaseButton");return vue.openBlock(),vue.createElementBlock("div",$s,[(vue.openBlock(),vue.createBlock(vue.Teleport,{to:"body"},[vue.createVNode(vue.Transition,null,{default:vue.withCtx(()=>[s.show?(vue.openBlock(),vue.createElementBlock("div",Hs,[vue.createElementVNode("div",Fs,vue.toDisplayString(n.title),1),vue.createElementVNode("div",Bs,[vue.createVNode(a,{type:"link",size:"small",onClick:i.cancel},{default:vue.withCtx(()=>[vue.createTextVNode("取消")]),_:1},8,["onClick"]),vue.createVNode(a,{size:"small",onClick:i.confirm},{default:vue.withCtx(()=>[vue.createTextVNode("确认")]),_:1},8,["onClick"])])],512)):vue.createCommentVNode("",!0)]),_:1})])),vue.createElementVNode("span",{onClick:t[0]||(t[0]=(...u)=>i.showPop&&i.showPop(...u))},[vue.renderSlot(e.$slots,"default",{},void 0,!0)])])}const $e=X(Us,[["render",Gs],["__scopeId","data-v-7d29b3cc"]]);const js={name:"Setting",components:{BaseButton:ye,PopConfirm:$e,Icon:se,BaseSelect:vt,BaseSwitch:ht,Tooltip:Ue},inject:["isNight"],props:{show:{type:Boolean,default(){return !1}}},data(){return {tabIndex:0}},methods:{confirm(){this.close(),this.$emit("confirm");},close(){this.$emit("update:show",!1);}}},un=e=>(vue.pushScopeId("data-v-cb13d533"),e=e(),vue.popScopeId(),e),Ws={key:0,class:"setting-modal modal"},qs={class:"modal-root"},zs={class:"modal-header"},Js=un(()=>vue.createElementVNode("div",{class:"title"}," 使用需知 ",-1)),Ks={class:"body"},Xs=un(()=>vue.createElementVNode("div",{class:"modal-content"},[vue.createElementVNode("div",null,"开启此功能会带来以下影响"),vue.createElementVNode("div",null,"缺点"),vue.createElementVNode("div",{style:{color:"red"}},[vue.createElementVNode("div",null,"1、你的IP可能会被封禁"),vue.createElementVNode("div",null,"2、消耗更多流量，给服务器带来更大的负担"),vue.createElementVNode("div",null,"3、你的V站浏览进度条会变快")]),vue.createElementVNode("div",null,"优点"),vue.createElementVNode("div",null,"1、卡片模式，无需打开主题即可查看内容"),vue.createElementVNode("div",null,"2、打开主题时提前预览正文内容，无需等待加载"),vue.createElementVNode("div",null,"原理"),vue.createElementVNode("div",null,"1、解析列表所有主题ID，批量调用show.json接口，获取对应主题的正文"),vue.createElementVNode("div",null,"2、请求的主题数据会缓存到本地，不会重复请求，超过3天的数据会删除"),vue.createElementVNode("div",null,"3、前面4条会并发请求，4条以后的一秒请求一条")],-1)),Ys={class:"btns"};function Qs(e,t,n,o,s,i){const a=vue.resolveComponent("Icon"),u=vue.resolveComponent("BaseButton");return vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[n.show?(vue.openBlock(),vue.createElementBlock("div",Ws,[vue.createElementVNode("div",{class:"mask",onClick:t[0]||(t[0]=(...c)=>i.close&&i.close(...c))}),vue.createElementVNode("div",qs,[vue.createElementVNode("div",zs,[Js,vue.createVNode(a,{icon:"ic:round-close",onClick:i.close},null,8,["onClick"])]),vue.createElementVNode("div",Ks,[Xs,vue.createElementVNode("div",Ys,[vue.createVNode(u,{type:"link",onClick:i.close},{default:vue.withCtx(()=>[vue.createTextVNode("不同意")]),_:1},8,["onClick"]),vue.createVNode(u,{onClick:i.confirm},{default:vue.withCtx(()=>[vue.createTextVNode("同意")]),_:1},8,["onClick"])])])])])):vue.createCommentVNode("",!0)]),_:1})}const Zs=X(js,[["render",Qs],["__scopeId","data-v-cb13d533"]]);const ei={name:"Setting",components:{NoticeModal:Zs,PopConfirm:$e,Icon:se,BaseSelect:vt,BaseSwitch:ht,Tooltip:Ue},inject:["isNight"],props:{modelValue:{type:Object,default(){return {}}},show:{type:Boolean,default(){return !1}}},data(){return {tabIndex:0,config:window.clone(this.modelValue),showNotice:!1}},computed:{DefaultVal(){return ge},CommentDisplayType(){return O},isNew(){return this.config.version<ge.currentVersion}},watch:{config:{handler(e){e.topReplyLoveMinCount=Math.trunc(e.topReplyLoveMinCount),e.topReplyLoveMinCount<0&&(e.topReplyLoveMinCount=1),this.$emit("update:modelValue",e);},deep:!0}},methods:{close(){this.config.version<ge.currentVersion&&(this.config.version=ge.currentVersion),this.$emit("update:show",!1);}}},P=e=>(vue.pushScopeId("data-v-97cd84bd"),e=e(),vue.popScopeId(),e),ti={key:0,class:"setting-modal modal"},ni={class:"modal-root"},si={class:"modal-header"},ii={class:"title"},oi={class:"small"},li=["href"],ri={class:"body"},ai={class:"left"},ci={class:"tabs"},di=P(()=>vue.createElementVNode("span",null,"列表设置",-1)),ui=[di],pi=P(()=>vue.createElementVNode("span",null,"主题设置",-1)),hi=[pi],fi=P(()=>vue.createElementVNode("span",null,"其他设置",-1)),mi=[fi],gi=P(()=>vue.createElementVNode("span",null,"关于脚本",-1)),yi=[gi],wi={class:"icons"},_i=["href"],vi=["href"],bi={class:"modal-content"},ki={class:"scroll"},Ti={key:0},xi={class:"row"},Ci=P(()=>vue.createElementVNode("label",{class:"item-title"},"列表展示方式",-1)),Si={class:"wrapper"},Ii={class:"radio-group2"},Li=P(()=>vue.createElementVNode("div",{class:"desc danger"}," 提示：此项需要刷新页面才能生效 ",-1)),Ri={class:"row"},Mi=P(()=>vue.createElementVNode("label",{class:"item-title"},"主题弹框显示",-1)),Ni={class:"wrapper"},Oi=P(()=>vue.createElementVNode("div",{class:"desc"},[vue.createTextVNode(" 开启此选项后，主题会"),vue.createElementVNode("span",{class:"danger"},"始终"),vue.createTextVNode("以弹框的方式显示。优先级大于“新标签页打开链接” ")],-1)),Ei={class:"row"},Pi=P(()=>vue.createElementVNode("label",{class:"item-title"},"新标签页打开链接",-1)),Di={class:"wrapper"},Ai=P(()=>vue.createElementVNode("div",{class:"desc"}," 网页上所有链接通过新标签页打开 ",-1)),Vi={class:"row"},Ui=P(()=>vue.createElementVNode("label",{class:"item-title"},"打开新标签页时立即切换过去",-1)),$i={class:"wrapper"},Hi={key:1},Fi={class:"row"},Bi=P(()=>vue.createElementVNode("label",{class:"item-title"},"显示回复展示方式",-1)),Gi={class:"wrapper"},ji={class:"row"},Wi=P(()=>vue.createElementVNode("label",{class:"item-title"},"回复展示方式",-1)),qi={class:"wrapper"},zi={class:"row"},Ji=P(()=>vue.createElementVNode("label",{class:"item-title"},"单独打开主题时默认显示楼中楼",-1)),Ki={class:"wrapper"},Xi=P(()=>vue.createElementVNode("div",{class:"desc"}," 单独打开这种地址 https://v2ex.com/t/xxxx 时，是否默认显示楼中楼 ",-1)),Yi={class:"row"},Qi=P(()=>vue.createElementVNode("label",{class:"item-title"},"点击左右两侧透明处关闭主题详情弹框",-1)),Zi={class:"wrapper"},eo={class:"row"},to=P(()=>vue.createElementVNode("label",{class:"item-title"},"正文超长自动折叠",-1)),no={class:"wrapper"},so={class:"row"},io=P(()=>vue.createElementVNode("label",{class:"item-title"},"主题宽度",-1)),oo={class:"wrapper"},lo=P(()=>vue.createElementVNode("div",{class:"desc"},[vue.createTextVNode(" 未设定此值时，则默认宽度为77rem。接受合法的width值： "),vue.createElementVNode("a",{href:"https://vue3js.cn/interview/css/em_px_rem_vh_vw.html#%E4%BA%8C%E3%80%81%E5%8D%95%E4%BD%8D",target:"_blank"},"rem、px、vw、vh(点此查看)"),vue.createTextVNode("。 vw代表屏幕百分比，如想要屏幕的66%，请填写66vw ")],-1)),ro=P(()=>vue.createElementVNode("div",{class:"desc"}," 提示：此项设置以后，单独打开详情页时会出现主题突然变宽（窄）的问题，暂时无解 ",-1)),ao=P(()=>vue.createElementVNode("div",{class:"desc danger"}," 提示：此项需要刷新页面才能生效 ",-1)),co=P(()=>vue.createElementVNode("div",{class:"row"},[vue.createElementVNode("label",{class:"main-title"},"高赞回复")],-1)),uo={class:"row"},po=P(()=>vue.createElementVNode("label",{class:"item-title"},"显示高赞回复",-1)),ho={class:"wrapper"},fo={class:"row"},mo=P(()=>vue.createElementVNode("label",{class:"item-title"},"最多显示多少个高赞回复",-1)),go={class:"wrapper"},yo={class:"row"},wo=P(()=>vue.createElementVNode("label",{class:"item-title"},"最少需要多少赞才能被判定为高赞",-1)),_o={class:"wrapper"},vo={key:2},bo={class:"row"},ko=P(()=>vue.createElementVNode("label",{class:"item-title"},"用户打标签(跨平台，数据保存在自己的记事本)：",-1)),To={class:"wrapper"},xo=P(()=>vue.createElementVNode("div",{class:"desc danger"}," 2024-01-27提示：此功能暂时无法使用 ",-1)),Co={class:"row"},So=P(()=>vue.createElementVNode("label",{class:"item-title"},"划词显示Base64解码框",-1)),Io={class:"wrapper"},Lo={class:"row"},Ro=P(()=>vue.createElementVNode("label",{class:"item-title"},"自动签到",-1)),Mo={class:"wrapper"},No={class:"row"},Oo=P(()=>vue.createElementVNode("label",{class:"item-title"},"自定义背景",-1)),Eo={class:"wrapper"},Po=P(()=>vue.createElementVNode("div",{class:"desc"},[vue.createTextVNode(" 未设定此值时，则背景颜色默认为 #e2e2e2。接受一个合法的css color值：例如"),vue.createElementVNode("a",{href:"https://developer.mozilla.org/zh-CN/docs/Web/CSS/color_value",target:"_blank"},"red、#ffffff、rgb(222,222,22)(点此查看)"),vue.createTextVNode("等等。 ")],-1)),Do=P(()=>vue.createElementVNode("div",{class:"desc danger"}," 提示：此项需要刷新页面才能生效 ",-1)),Ao={class:"row"},Vo=P(()=>vue.createElementVNode("label",{class:"item-title"},"收藏时提醒添加到书签",-1)),Uo={class:"wrapper"},$o=P(()=>vue.createElementVNode("div",{class:"desc"}," V站帐号一旦被封禁，则无法登录，无法查看账号收藏了 ",-1)),Ho={key:3},Fo=P(()=>vue.createElementVNode("h1",null,"V2EX Next",-1)),Bo={class:"project-desc"},Go=P(()=>vue.createElementVNode("div",null,[vue.createTextVNode(" 本项目完全开源，已支持移动端！"),vue.createElementVNode("b",null,"好用请大家多多点Star！")],-1)),jo=P(()=>vue.createElementVNode("br",null,null,-1)),Wo={style:{"line-height":"2"}},qo=["href"],zo=["href"],Jo=["href"],Ko=["href"],Xo=["href"],Yo=["href"];function Qo(e,t,n,o,s,i){const a=vue.resolveComponent("Icon"),u=vue.resolveComponent("BaseSwitch"),c=vue.resolveComponent("BaseSelect"),d=vue.resolveComponent("NoticeModal");return vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[n.show?(vue.openBlock(),vue.createElementBlock("div",ti,[vue.createElementVNode("div",{class:"mask",onClick:t[0]||(t[0]=(...r)=>i.close&&i.close(...r))}),vue.createElementVNode("div",ni,[vue.createElementVNode("div",si,[vue.createElementVNode("div",ii,[vue.createTextVNode(" 脚本设置 "),vue.createElementVNode("div",oi,[vue.createElementVNode("a",{href:i.DefaultVal.mobileScript,target:"_blank"},"(脚本现已支持移动端！)",8,li)])]),vue.createVNode(a,{icon:"ic:round-close",onClick:i.close},null,8,["onClick"])]),vue.createElementVNode("div",ri,[vue.createElementVNode("div",ai,[vue.createElementVNode("div",ci,[vue.createElementVNode("div",{class:vue.normalizeClass(["tab",s.tabIndex===0&&"active"]),onClick:t[1]||(t[1]=r=>s.tabIndex=0)},ui,2),vue.createElementVNode("div",{class:vue.normalizeClass(["tab",s.tabIndex===1&&"active"]),onClick:t[2]||(t[2]=r=>s.tabIndex=1)},hi,2),vue.createElementVNode("div",{class:vue.normalizeClass(["tab",s.tabIndex===2&&"active"]),onClick:t[3]||(t[3]=r=>s.tabIndex=2)},mi,2),vue.createElementVNode("div",{class:vue.normalizeClass(["tab",s.tabIndex===3&&"active"]),onClick:t[4]||(t[4]=r=>s.tabIndex=3)},yi,2)]),vue.createElementVNode("div",wi,[vue.createElementVNode("a",{href:i.DefaultVal.git,target:"_blank"},[vue.createVNode(a,{icon:"mdi:github"})],8,_i),vue.createElementVNode("a",{href:i.DefaultVal.homeUrl,target:"_blank"},[vue.createVNode(a,{icon:"iconamoon:home-light"})],8,vi)])]),vue.createElementVNode("div",bi,[vue.createElementVNode("div",ki,[s.tabIndex===0?(vue.openBlock(),vue.createElementBlock("div",Ti,[vue.createElementVNode("div",xi,[Ci,vue.createElementVNode("div",Si,[vue.createElementVNode("div",Ii,[vue.createElementVNode("div",{class:vue.normalizeClass(["radio",s.config.viewType==="simple"?"active":""]),onClick:t[5]||(t[5]=r=>s.config.viewType="simple")},"简洁 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["radio",s.config.viewType==="table"?"active":""]),onClick:t[6]||(t[6]=r=>s.config.viewType="table")},"表格 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["radio",s.config.viewType==="card"?"active":""]),onClick:t[7]||(t[7]=r=>s.showNotice=!0)},"卡片 ",2)])])]),Li,vue.createElementVNode("div",Ri,[Mi,vue.createElementVNode("div",Ni,[vue.createVNode(u,{modelValue:s.config.clickPostItemOpenDetail,"onUpdate:modelValue":t[8]||(t[8]=r=>s.config.clickPostItemOpenDetail=r)},null,8,["modelValue"])])]),Oi,vue.createElementVNode("div",Ei,[Pi,vue.createElementVNode("div",Di,[vue.createVNode(u,{modelValue:s.config.newTabOpen,"onUpdate:modelValue":t[9]||(t[9]=r=>s.config.newTabOpen=r)},null,8,["modelValue"])])]),Ai,vue.createElementVNode("div",Vi,[Ui,vue.createElementVNode("div",$i,[vue.createVNode(u,{modelValue:s.config.newTabOpenActive,"onUpdate:modelValue":t[10]||(t[10]=r=>s.config.newTabOpenActive=r)},null,8,["modelValue"])])])])):vue.createCommentVNode("",!0),s.tabIndex===1?(vue.openBlock(),vue.createElementBlock("div",Hi,[vue.createElementVNode("div",Fi,[Bi,vue.createElementVNode("div",Gi,[vue.createVNode(u,{modelValue:s.config.showToolbar,"onUpdate:modelValue":t[11]||(t[11]=r=>s.config.showToolbar=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",ji,[Wi,vue.createElementVNode("div",qi,[vue.createVNode(c,{"display-type":s.config.commentDisplayType,"onUpdate:displayType":t[12]||(t[12]=r=>s.config.commentDisplayType=r)},null,8,["display-type"])])]),vue.createElementVNode("div",zi,[Ji,vue.createElementVNode("div",Ki,[vue.createVNode(u,{modelValue:s.config.autoOpenDetail,"onUpdate:modelValue":t[13]||(t[13]=r=>s.config.autoOpenDetail=r)},null,8,["modelValue"])])]),Xi,vue.createElementVNode("div",Yi,[Qi,vue.createElementVNode("div",Zi,[vue.createVNode(u,{modelValue:s.config.closePostDetailBySpace,"onUpdate:modelValue":t[14]||(t[14]=r=>s.config.closePostDetailBySpace=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",eo,[to,vue.createElementVNode("div",no,[vue.createVNode(u,{modelValue:s.config.contentAutoCollapse,"onUpdate:modelValue":t[15]||(t[15]=r=>s.config.contentAutoCollapse=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",so,[io,vue.createElementVNode("div",oo,[vue.withDirectives(vue.createElementVNode("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=r=>s.config.postWidth=r)},null,512),[[vue.vModelText,s.config.postWidth]])])]),lo,ro,ao,co,vue.createElementVNode("div",uo,[po,vue.createElementVNode("div",ho,[vue.createVNode(u,{modelValue:s.config.showTopReply,"onUpdate:modelValue":t[17]||(t[17]=r=>s.config.showTopReply=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",fo,[mo,vue.createElementVNode("div",go,[vue.withDirectives(vue.createElementVNode("input",{type:"number",min:"1","onUpdate:modelValue":t[18]||(t[18]=r=>s.config.topReplyCount=r)},null,512),[[vue.vModelText,s.config.topReplyCount]])])]),vue.createElementVNode("div",yo,[wo,vue.createElementVNode("div",_o,[vue.withDirectives(vue.createElementVNode("input",{type:"number",min:"1","onUpdate:modelValue":t[19]||(t[19]=r=>s.config.topReplyLoveMinCount=r)},null,512),[[vue.vModelText,s.config.topReplyLoveMinCount]])])])])):vue.createCommentVNode("",!0),s.tabIndex===2?(vue.openBlock(),vue.createElementBlock("div",vo,[vue.createElementVNode("div",bo,[ko,vue.createElementVNode("div",To,[vue.createVNode(u,{modelValue:s.config.openTag,"onUpdate:modelValue":t[20]||(t[20]=r=>s.config.openTag=r)},null,8,["modelValue"])])]),xo,vue.createElementVNode("div",Co,[So,vue.createElementVNode("div",Io,[vue.createVNode(u,{modelValue:s.config.base64,"onUpdate:modelValue":t[21]||(t[21]=r=>s.config.base64=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",Lo,[Ro,vue.createElementVNode("div",Mo,[vue.createVNode(u,{modelValue:s.config.autoSignin,"onUpdate:modelValue":t[22]||(t[22]=r=>s.config.autoSignin=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",No,[Oo,vue.createElementVNode("div",Eo,[vue.withDirectives(vue.createElementVNode("input",{type:"text","onUpdate:modelValue":t[23]||(t[23]=r=>s.config.customBgColor=r)},null,512),[[vue.vModelText,s.config.customBgColor]])])]),Po,Do,vue.createElementVNode("div",Ao,[Vo,vue.createElementVNode("div",Uo,[vue.createVNode(u,{modelValue:s.config.collectBrowserNotice,"onUpdate:modelValue":t[24]||(t[24]=r=>s.config.collectBrowserNotice=r)},null,8,["modelValue"])])]),$o])):vue.createCommentVNode("",!0),s.tabIndex===3?(vue.openBlock(),vue.createElementBlock("div",Ho,[Fo,vue.createElementVNode("div",Bo,[Go,jo,vue.createElementVNode("div",Wo,[vue.createElementVNode("div",null,[vue.createTextVNode("官网："),vue.createElementVNode("a",{href:i.DefaultVal.homeUrl,target:"_blank"},vue.toDisplayString(i.DefaultVal.homeUrl),9,qo)]),vue.createElementVNode("div",null,[vue.createTextVNode("GitHub地址："),vue.createElementVNode("a",{href:i.DefaultVal.git,target:"_blank"},vue.toDisplayString(i.DefaultVal.git),9,zo)]),vue.createElementVNode("div",null,[vue.createTextVNode("PC脚本地址："),vue.createElementVNode("a",{href:i.DefaultVal.pcScript,target:"_blank"},vue.toDisplayString(i.DefaultVal.pcScript),9,Jo)]),vue.createElementVNode("div",null,[vue.createTextVNode("移动端脚本地址："),vue.createElementVNode("a",{href:i.DefaultVal.mobileScript,target:"_blank"},vue.toDisplayString(i.DefaultVal.mobileScript),9,Ko)]),vue.createElementVNode("div",null,[vue.createTextVNode("反馈: "),vue.createElementVNode("a",{href:i.DefaultVal.issue,target:"_blank"},vue.toDisplayString(i.DefaultVal.issue),9,Xo)]),vue.createElementVNode("div",null,[vue.createTextVNode("更新日志："),vue.createElementVNode("a",{href:i.DefaultVal.pcLog,target:"_blank"},vue.toDisplayString(i.DefaultVal.pcLog),9,Yo)])])])])):vue.createCommentVNode("",!0)])])])]),vue.createVNode(d,{show:s.showNotice,"onUpdate:show":t[25]||(t[25]=r=>s.showNotice=r),onConfirm:t[26]||(t[26]=r=>s.config.viewType="card")},null,8,["show"])])):vue.createCommentVNode("",!0)]),_:1})}const Zo=X(ei,[["render",Qo],["__scopeId","data-v-97cd84bd"]]),w={eventMap:new Map,on(e,t){let n=this.eventMap.get(e);n?n.push(t):n=[t],this.eventMap.set(e,n);},emit(e,t){let n=this.eventMap.get(e);n&&n.map(o=>o(t));},off(e){this.eventMap.has(e)&&this.eventMap.delete(e);},clear(){this.eventMap=new Map;}},_={SHOW_TOOLTIP:"SHOW_TOOLTIP",SHOW_MSG:"SHOW_MSG",SET_CALL:"SET_CALL",SHOW_CALL:"SHOW_CALL",REFRESH_ONCE:"REFRESH_ONCE",ADD_REPLY:"ADD_REPLY",IGNORE:"IGNORE",MERGE:"MERGE",REMOVE:"REMOVE",CHANGE_COMMENT_THANK:"CHANGE_COMMENT_THANK",CHANGE_POST_THANK:"CHANGE_POST_THANK",ADD_TAG:"ADD_TAG",REMOVE_TAG:"REMOVE_TAG",RELATION_REPLY:"RELATION_REPLY",JUMP:"JUMP",REFRESH_POST:"REFRESH_POST"},el={name:"Point",components:{PopConfirm:$e,Icon:se},inject:["post","isLogin"],props:{item:{type:Object,default(){return {}}},apiUrl:""},computed:{disabled(){return this.item.username===window.user.username||this.item.isThanked||!this.isLogin}},methods:{thankError(){if(!this.isLogin)return w.emit(_.SHOW_MSG,{type:"warning",text:"请先登录！"});if(this.item.username===window.user.username)return w.emit(_.SHOW_MSG,{type:"warning",text:"不能感谢自己"});if(this.item.isThanked)return w.emit(_.SHOW_MSG,{type:"warning",text:"已经感谢过了"})},async thank(){this.$emit("addThank");let e=`${window.baseUrl}/thank/${this.apiUrl}?once=${this.post.once}`;$.post(e).then(t=>{t.success||(this.$emit("recallThank"),w.emit(_.SHOW_MSG,{type:"error",text:t.message})),w.emit(_.REFRESH_ONCE,t.once);},t=>{this.$emit("recallThank"),w.emit(_.SHOW_MSG,{type:"error",text:"感谢失败"}),w.emit(_.REFRESH_ONCE);});}}},tl={key:2,class:"link-num"},nl={key:3};function sl(e,t,n,o,s,i){const a=vue.resolveComponent("Icon"),u=vue.resolveComponent("PopConfirm");return vue.openBlock(),vue.createBlock(u,{disabled:i.disabled,title:`确认花费 10 个铜币向 @${n.item.username} 的这条回复发送感谢？`,onConfirm:i.thank},{default:vue.withCtx(()=>[vue.createElementVNode("div",{class:vue.normalizeClass(["tool",[i.disabled&&"disabled"]]),onClick:t[0]||(t[0]=(...c)=>i.thankError&&i.thankError(...c))},[n.item.isThanked?(vue.openBlock(),vue.createBlock(a,{key:0,color:"rgb(224,42,42)",icon:"icon-park-solid:like"})):(vue.openBlock(),vue.createBlock(a,{key:1,color:n.item.thankCount?"rgb(224,42,42)":null,icon:"icon-park-outline:like"},null,8,["color"])),n.item.thankCount?(vue.openBlock(),vue.createElementBlock("span",tl,vue.toDisplayString(n.item.thankCount),1)):(vue.openBlock(),vue.createElementBlock("span",nl,"感谢"))],2)]),_:1},8,["disabled","title","onConfirm"])}const bt=X(el,[["render",sl]]);const il={name:"Author",components:{PopConfirm:$e,Point:bt,Icon:se},inject:["isLogin","tags","config","isNight"],props:{modelValue:!1,comment:{type:Object,default(){return {}}},type:{type:String,default(){return "list"}}},computed:{isDev(){return !1},pointInfo(){return {isThanked:this.comment.isThanked,thankCount:this.comment.thankCount,username:this.comment.username}},myTags(){return this.tags[this.comment.username]??[]},context(){return this.comment.replyUsers.length}},methods:{jump(){w.emit(_.JUMP,this.comment.floor);},showRelationReply(){if(!this.comment.replyUsers.length){w.emit(_.SHOW_MSG,{type:"warning",text:"该回复无上下文"});return}w.emit(_.RELATION_REPLY,{left:this.comment.replyUsers,right:this.comment.username,rightFloor:this.comment.floor});},addTag(){w.emit(_.ADD_TAG,this.comment.username);},removeTag(e){w.emit(_.REMOVE_TAG,{username:this.comment.username,tag:e});},checkIsLogin(e=""){return this.isLogin?(this.$emit(e),!0):(w.emit(_.SHOW_MSG,{type:"warning",text:"请先登录！"}),!1)},addThank(){w.emit(_.CHANGE_COMMENT_THANK,{id:this.comment.id,type:"add"});},recallThank(){w.emit(_.CHANGE_COMMENT_THANK,{id:this.comment.id,type:"recall"});}}},He=e=>(vue.pushScopeId("data-v-43506a15"),e=e(),vue.popScopeId(),e),ol={class:"Author-left"},ll=["href"],rl=["src"],al={class:"texts"},cl=["href"],dl={key:0,class:"owner"},ul={key:1,class:"dup"},pl={key:2,class:"mod"},hl={class:"ago"},fl={class:"my-tag"},ml=He(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),gl=["onClick"],yl={class:"Author-right"},wl={key:0,class:"toolbar"},_l={class:"tool"},vl=He(()=>vue.createElementVNode("span",null,"隐藏",-1)),bl=He(()=>vue.createElementVNode("span",null,"上下文",-1)),kl=He(()=>vue.createElementVNode("span",null,"跳转",-1)),Tl=He(()=>vue.createElementVNode("span",null,"回复",-1));function xl(e,t,n,o,s,i){const a=vue.resolveComponent("Icon"),u=vue.resolveComponent("PopConfirm"),c=vue.resolveComponent("Point");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["Author",{expand:!n.modelValue}])},[vue.createElementVNode("div",ol,[n.modelValue?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(a,{key:0,onClick:t[0]||(t[0]=d=>e.$emit("update:modelValue",!0)),color:"#177EC9",class:"expand-icon",icon:"gravity-ui:chevrons-expand-up-right"})),i.config.viewType!=="simple"?(vue.openBlock(),vue.createElementBlock("a",{key:1,class:"avatar",href:`/member/${n.comment.username}`},[vue.createElementVNode("img",{src:n.comment.avatar,alt:""},null,8,rl)],8,ll)):vue.createCommentVNode("",!0),vue.createElementVNode("span",al,[vue.createElementVNode("strong",null,[vue.createElementVNode("a",{href:`/member/${n.comment.username}`,class:vue.normalizeClass(["username",{dark:i.isNight}])},vue.toDisplayString(n.comment.username),11,cl)]),n.comment.isOp?(vue.openBlock(),vue.createElementBlock("div",dl,"OP")):vue.createCommentVNode("",!0),n.comment.isDup?(vue.openBlock(),vue.createElementBlock("div",ul,"DUP")):vue.createCommentVNode("",!0),n.comment.isMod?(vue.openBlock(),vue.createElementBlock("div",pl,"MOD")):vue.createCommentVNode("",!0),vue.createElementVNode("span",hl,vue.toDisplayString(n.comment.date),1),i.isLogin&&i.config.openTag?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:3},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.myTags,d=>(vue.openBlock(),vue.createElementBlock("span",fl,[ml,vue.createElementVNode("span",null,vue.toDisplayString(d),1),vue.createElementVNode("i",{class:"fa fa-trash-o remove",onClick:r=>i.removeTag(d)},null,8,gl)]))),256)),vue.createElementVNode("span",{class:"add-tag ago",onClick:t[1]||(t[1]=(...d)=>i.addTag&&i.addTag(...d)),title:"添加标签"},"+")],64)):vue.createCommentVNode("",!0)])]),vue.createElementVNode("div",yl,[i.isLogin?(vue.openBlock(),vue.createElementBlock("div",wl,[vue.createVNode(u,{title:"确认隐藏这条回复?",onConfirm:t[2]||(t[2]=d=>e.$emit("hide"))},{default:vue.withCtx(()=>[vue.createElementVNode("div",_l,[vue.createVNode(a,{icon:"fluent:eye-hide-24-regular"}),vl])]),_:1}),i.context?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"tool",onClick:t[3]||(t[3]=(...d)=>i.showRelationReply&&i.showRelationReply(...d))},[vue.createVNode(a,{icon:"iconoir:page-search"}),bl])):vue.createCommentVNode("",!0),n.type==="top"?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"tool",onClick:t[4]||(t[4]=(...d)=>i.jump&&i.jump(...d))},[vue.createVNode(a,{icon:"icon-park-outline:to-bottom"}),kl])):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"tool",onClick:t[5]||(t[5]=d=>i.checkIsLogin("reply"))},[vue.createVNode(a,{icon:"mynaui:message"}),Tl]),vue.withDirectives(vue.createVNode(c,{item:i.pointInfo,onAddThank:i.addThank,onRecallThank:i.recallThank,"api-url":"reply/"+n.comment.id},null,8,["item","onAddThank","onRecallThank","api-url"]),[[vue.vShow,!n.comment.thankCount]])])):vue.createCommentVNode("",!0),vue.withDirectives(vue.createVNode(c,{item:i.pointInfo,onAddThank:i.addThank,onRecallThank:i.recallThank,"api-url":"reply/"+n.comment.id},null,8,["item","onAddThank","onRecallThank","api-url"]),[[vue.vShow,n.comment.thankCount]]),vue.createElementVNode("div",{class:vue.normalizeClass(["floor",{isDev:i.isDev}])},vue.toDisplayString(n.comment.floor),3)])],2)}const Cl=X(il,[["render",xl],["__scopeId","data-v-43506a15"]]);const Sl=e=>(vue.pushScopeId("data-v-4522f98e"),e=e(),vue.popScopeId(),e),Il={class:"get-cursor"},Ll=["innerHTML"],Rl={class:"toolbar"},Ml={class:"left"},Nl={class:"upload"},Ol={key:0,style:{color:"black","font-size":"1.4rem"}},El={class:"right"},Pl=Sl(()=>vue.createElementVNode("div",{class:"title"},"经典表情",-1)),Dl={class:"list"},Al=["src","onClick"],Vl={class:"emoji"},Ul={class:"title"},$l={class:"list"},Hl=["onClick"],Fl={__name:"PostEditor",props:{replyUser:null,replyFloor:null,useType:{type:String,default(){return "reply-comment"}}},emits:["close"],setup(e,{expose:t,emit:n}){const o=e,{replyUser:s,replyFloor:i,useType:a}=o,u=s?`@${s} #${i} `:"",c=n,d=vue.inject("post"),r=vue.inject("show"),m=vue.inject("isNight");vue.inject("pageType");const b=vue.inject("allReplyUsers");let v=vue.ref(!1);const g=vue.ref(!1),f=vue.ref(!1),p=vue.ref(!1),T=vue.ref("editorId_"+Date.now()),k=vue.ref(u),S=vue.ref(null),W=vue.ref(null),J=vue.ref(null),M=vue.ref('<span style="white-space:pre-wrap;"> </span>'),F=[{title:"小黄脸",list:["😀","😁","😂","🤣","😅","😊","😋","😘","🥰","😗","🤩","🤔","🤨","😐","😑","🙄","😏","😪","😫","🥱","😜","😒","😔","😨","😰","😱","🥵","😡","🥳","🥺","🤭","🧐","😎","🤓","😭","🤑","🤮"]},{title:"手势",list:["🙋","🙎","🙅","🙇","🤷","🤏","👉","✌️","🤘","🤙","👌","🤌","👍","👎","👋","🤝","🙏","👏"]},{title:"庆祝",list:["✨","🎉","🎊"]},{title:"其他",list:["👻","🤡","🐔","👀","💩","🐴","🦄","🐧","🐶","🐒","🙈","🙉","🙊","🐵"]}],K=[{name:"[狗头]",low:"https://i.imgur.com/io2SM1h.png",high:"https://i.imgur.com/0icl60r.png"},{name:"[马]",low:"https://i.imgur.com/8EKZv7I.png",high:"https://i.imgur.com/ANFUX52.png"},{name:"[不高兴]",low:"https://i.imgur.com/huX6coX.png",high:"https://i.imgur.com/N7JEuvc.png"},{name:"[呵呵]",low:"https://i.imgur.com/RvoLAbX.png",high:"https://i.imgur.com/xSzIqrK.png"},{name:"[真棒]",low:"https://i.imgur.com/xr1UOz1.png",high:"https://i.imgur.com/w8YEw9Q.png"},{name:"[鄙视]",low:"https://i.imgur.com/u6jlqVq.png",high:"https://i.imgur.com/8JFNANq.png"},{name:"[疑问]",low:"https://i.imgur.com/F29pmQ6.png",high:"https://i.imgur.com/EbbTQAR.png"},{name:"[吐舌]",low:"https://i.imgur.com/InmIzl9.png",high:"https://i.imgur.com/Ovj56Cd.png"},{name:"[笑眼]",low:"https://i.imgur.com/ZveiiGy.png",high:"https://i.imgur.com/PI1CfEr.png"},{name:"[狂汗]",low:"https://i.imgur.com/veWihk6.png",high:"https://i.imgur.com/3LtHdQv.png"},{name:"[大哭]",low:"https://i.imgur.com/hu4oR6C.png",high:"https://i.imgur.com/b4X9XLE.png"},{name:"[喷]",low:"https://i.imgur.com/bkw3VRr.png",high:"https://i.imgur.com/wnZL13L.png"},{name:"[苦笑]",low:"https://i.imgur.com/VUWFktU.png",high:"https://i.imgur.com/NAfspZ1.png"},{name:"[喝酒]",low:"https://i.imgur.com/2ZZSapE.png",high:"https://i.imgur.com/rVbSVak.png"},{name:"[吃瓜]",low:"https://i.imgur.com/ee8Lq7H.png",high:"https://i.imgur.com/0L26og9.png"},{name:"[捂脸]",low:"https://i.imgur.com/krir4IG.png",high:"https://i.imgur.com/qqBqgVm.png"},{name:"[呕]",low:"https://i.imgur.com/6CUiUxv.png",high:"https://i.imgur.com/kgdxRsG.png"},{name:"[阴险]",low:"https://i.imgur.com/MA8YqTP.png",high:"https://i.imgur.com/e94jbaT.png"},{name:"[怒]",low:"https://i.imgur.com/n4kWfGB.png",high:"https://i.imgur.com/iMXxNxh.png"},{name:"[衰]",low:"https://i.imgur.com/voHFDyQ.png",high:"https://i.imgur.com/XffE6gu.png"},{name:"[合十]",low:"https://i.imgur.com/I8x3ang.png",high:"https://i.imgur.com/T4rJVee.png"},{name:"[赞]",low:"https://i.imgur.com/lG44yUl.png",high:"https://i.imgur.com/AoF5PLp.png"},{name:"[踩]",low:"https://i.imgur.com/cJp0uKZ.png",high:"https://i.imgur.com/1XYGfXj.png"},{name:"[爱心]",low:"https://i.imgur.com/sLENaF5.png",high:"https://i.imgur.com/dND56oX.png"},{name:"[心碎]",low:"https://i.imgur.com/AZxJzve.png",high:"https://i.imgur.com/RiUsPci.png"}],q=["3107b9ef8b316f3","442b04f26eefc8a","59cfebe717c09e4","60605aad4a62882","6c65ab1d3f5452a","83e123737849aa9","9311f6be1c10160","c4a4a563f698595","81be04b9e4a08ce"];t({content:k,isFocus:()=>v.value});const Z=vue.computed(()=>[a,v.value?"isFocus":"",m.value?"isNight":""]),te=vue.computed(()=>{var N;if(!S.value||!k.value)return "";let H=((N=S.value)==null?void 0:N.selectionStart)||0;return k.value.substring(0,H).replace(/</g,"<").replace(/>/g,">").replace(/\n/g,"<br/>").replace(/\s/g,M.value)}),fe=vue.computed(()=>k.value?k.value===u:!0);function pe(H){H.preventDefault(),he(H.dataTransfer.files[0]);}async function he(H){if(!H||f.value)return;f.value=!0;const N=new FormData;N.append("image",H);const V=Math.floor(Math.random()*q.length),z=q[V],Y=await fetch("https://api.imgur.com/3/upload",{method:"POST",headers:{Authorization:`Client-ID ${z}`},body:N});if(f.value=!1,Y.ok){const B=await Y.json();if(B.success)return Ze(" "+B.data.link+" ")}w.emit(_.SHOW_MSG,{type:"error",text:"上传失败"});}async function Te(){if(fe.value||g.value)return;g.value=!0;let H=k.value.replace(/\[((?!\[).)+\]/g,function(B){let ne=K.find(_e=>_e.name===B);return ne?ne.low+" ":B}),N=k.value.replace(/https?:\/\/(i\.)?imgur\.com\/((?!http).)+\.(gif|png|jpg|jpeg|GIF|PNG|JPG|JPEG)/g,function(B){return `<img src="${B}" data-originUrl="${B}" data-notice="这个img标签由v2ex-超级增强脚本解析" style="max-width: 100%">`});N=N.replace(/\[((?!\[).)+\]/g,function(B){let ne=K.find(_e=>_e.name===B);return ne?`<a target="_blank" href="${ne.low}" rel="nofollow noopener"><img src="${ne.low}" class="embedded_image" rel="noreferrer"></a> `:B});let V=N.match(/@([\w]+?[\s])/g);V&&V.map(B=>{let ne=B.replace("@","").replace(" ","");N=N.replace(ne,`<a href="/member/${ne}">${ne}</a>`);}),N=N.replaceAll(`
`,"<br/>");let z={thankCount:0,isThanked:!1,isOp:d.value.username===window.user.username,isDup:!1,id:Date.now(),username:window.user.username,avatar:window.user.avatar,date:"几秒前",floor:d.value.replyCount+1,reply_content:N??"",children:[],replyUsers:s?[s]:[],replyFloor:i||-1,level:a==="reply-comment"?1:0};z.hideCallUserReplyContent=z.reply_content,z.replyUsers.length===1&&(z.hideCallUserReplyContent=z.reply_content.replace(/@<a href="\/member\/[\s\S]+?<\/a>(\s#[\d]+)?\s(<br>)?/,()=>"")),console.log("回复",z);let Y=`${window.baseUrl}/t/${d.value.id}`;$.post(Y,{content:H,once:d.value.once}).then(B=>{g.value=!1;let ne=B.search("你上一条回复的内容和这条相同");if(ne>-1)return w.emit(_.SHOW_MSG,{type:"error",text:"你上一条回复的内容和这条相同"});if(ne=B.search("请不要在每一个回复中都包括外链，这看起来像是在 spamming"),ne>-1)return w.emit(_.SHOW_MSG,{type:"error",text:"请不要在每一个回复中都包括外链，这看起来像是在 spamming"});if(B.search("创建新回复")>-1){w.emit(_.REFRESH_ONCE,B),w.emit(_.SHOW_MSG,{type:"error",text:"回复出现了问题，请使用原版进行回复"});let Fe=window.document.body.clientWidth,Be=1200,_n=Fe/2-Be/2,Lt=window.open("创建新回复","",`width=${Be},height=600,left=${_n},top=100`);Lt.document.write(B);let vn=setInterval(function(){Lt.closed&&(clearInterval(vn),w.emit(_.REFRESH_POST));},1e3);return}k.value=u,c("close"),w.emit(_.REFRESH_ONCE,B),w.emit(_.SHOW_MSG,{type:"success",text:"回复成功"}),w.emit(_.ADD_REPLY,z);},B=>{console.log("err",B),g.value=!1,w.emit(_.SHOW_MSG,{type:"error",text:"回复失败"});}).catch(B=>{console.log("catch",B);});}function Ie(H){if(p.value)return p.value=!1;let N=H.currentTarget.getBoundingClientRect();J.value.style.left=N.left+30+"px",J.value.style.bottom=window.innerHeight-N.top-20+"px",p.value=!0;}function re(){w.emit(_.SHOW_CALL,{show:!1}),w.off(_.SET_CALL);}function Ct(){S.value.style.height=0,S.value.style.height=S.value.scrollHeight+"px";}function Ze(H){let N=S.value.selectionStart,V=k.value.slice(0,N),z=k.value.slice(N,k.value.length);k.value=V+H+z;let Y=V.length+H.length;setTimeout(()=>{S.value.focus(),S.value.setSelectionRange(Y,Y),Ct();});}function Le(H){let N=W.value.getBoundingClientRect();w.emit(_.SHOW_CALL,{show:!0,top:N.top,left:N.left,text:H}),w.off(_.SET_CALL),w.on(_.SET_CALL,V=>{let z=S.value.selectionStart,Y=k.value.slice(0,z),B=k.value.slice(z,k.value.length),ne=Y.lastIndexOf("@");Y=k.value.slice(0,ne+1),V==="管理员"&&(V="Livid @Kai @Olivia @GordianZ @sparanoid"),V==="所有人"&&(V=b.value.map((Fe,Be)=>Be?"@"+Fe:Fe).join(" ")),k.value=Y+V+" "+B;let _e=Y.length+V.length+1;setTimeout(()=>{S.value.setSelectionRange(_e,_e),Ct();}),w.off(_.SET_CALL);});}function gn(H){switch(H.keyCode){case 8:k.value==="@"&&re();break;case 37:case 38:case 39:case 40:setTimeout(()=>St({data:""}),100);break;case 27:return H.preventDefault(),H.stopPropagation(),H.stopImmediatePropagation(),!1;case 13:H.ctrlKey&&Te(),H.metaKey&&Te();break}}function St(H){let N=S.value.selectionStart;if(k.value){if(H.data===" ")return re();if(H.data==="@"){if(k.value.length!==1){if(k.value[N-2]===" "||k.value[N-2]===`
`)return Le("")}else return Le("");re();}else {let V=k.value.slice(0,N),z=V.lastIndexOf("@");if(z===-1)return re();let Y=V.slice(z,N);if(Y.includes(" "))re();else {if(z===0)return Le(Y.replace("@",""));if(k.value.length!==1){if(k.value[z-1]===" "||k.value[z-1]===`
`)return Le(Y.replace("@",""))}else return Le(Y.replace("@",""));re();}}}}function It(H){const N=H.clipboardData.items,V=[].slice.call(N).filter(function(B){return B.type.indexOf("image")!==-1});if(V.length===0)return;const Y=V[0].getAsFile();he(Y);}function yn(){document.removeEventListener("paste",It),v.value=!1;}function wn(){document.addEventListener("paste",It);}return vue.watch(()=>r,H=>{H.value&&(p.value=!1);},{deep:!0}),vue.onMounted(()=>{$(`.${T.value}`).each(function(){this.setAttribute("style","height:"+this.scrollHeight+"px;overflow-y:hidden;");}).on("input",function(){this.style.height=0,this.style.height=this.scrollHeight+"px";}),a==="reply-comment"&&S.value&&S.value.focus();}),vue.onBeforeUnmount(()=>{$(`.${T.value}`).off();}),(H,N)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["post-editor-wrapper",Z.value])},[vue.withDirectives(vue.createElementVNode("textarea",{class:vue.normalizeClass(["post-editor",T.value]),ref_key:"txtRef",ref:S,onFocus:N[0]||(N[0]=V=>vue.isRef(v)?v.value=!0:v=!0),onBlur:yn,onFocusin:wn,placeholder:"请尽量让自己的回复能够对别人有帮助",onInput:St,onKeydown:gn,onDrop:pe,"onUpdate:modelValue":N[1]||(N[1]=V=>k.value=V)},null,34),[[vue.vModelText,k.value]]),vue.createElementVNode("div",Il,[vue.createElementVNode("span",{innerHTML:te.value},null,8,Ll),vue.createElementVNode("span",{class:"cursor",ref_key:"cursorRef",ref:W},"|",512)]),vue.createElementVNode("div",Rl,[vue.createElementVNode("div",Ml,[vue.createVNode(vue.unref(se),{onClick:Ie,icon:"streamline:smiley-happy"}),vue.createElementVNode("div",Nl,[vue.createElementVNode("input",{type:"file",accept:"image/*",onChange:N[2]||(N[2]=V=>he(V.currentTarget.files[0]))},null,32),vue.createVNode(vue.unref(se),{icon:"lets-icons:img-load-box-fill"})]),f.value?(vue.openBlock(),vue.createElementBlock("span",Ol,"上传中.....")):vue.createCommentVNode("",!0)]),vue.createElementVNode("div",El,[vue.unref(a)==="reply-comment"?(vue.openBlock(),vue.createBlock(ye,{key:0,type:"link",size:"small",style:{"margin-right":"1rem",cursor:"pointer"},onClick:N[3]||(N[3]=V=>c("close"))},{default:vue.withCtx(()=>[vue.createTextVNode(" 关闭 ")]),_:1})):vue.createCommentVNode("",!0),vue.createVNode(ye,{size:"small",disabled:fe.value,loading:g.value,onClick:Te},{default:vue.withCtx(()=>[vue.createTextVNode("回复 ")]),_:1},8,["disabled","loading"])])]),vue.withDirectives(vue.createElementVNode("div",{class:"emoticon-pack",ref_key:"emoticonsRef",ref:J},[vue.createVNode(vue.unref(se),{icon:"ic:round-close",onClick:N[4]||(N[4]=V=>p.value=!1)}),Pl,vue.createElementVNode("div",Dl,[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(K,V=>vue.createElementVNode("img",{src:V.high,onClick:z=>{Ze(V.name),p.value=!1;}},null,8,Al)),64))]),vue.createElementVNode("div",Vl,[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(F,V=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createElementVNode("div",Ul,vue.toDisplayString(V.title),1),vue.createElementVNode("div",$l,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(V.list,z=>(vue.openBlock(),vue.createElementBlock("span",{onClick:Y=>{Ze(z),p.value=!1;}},vue.toDisplayString(z),9,Hl))),256))])],64))),64))])],512),[[vue.vShow,p.value]])],2))}},pn=X(Fl,[["__scopeId","data-v-4522f98e"]]);const Bl={key:0,class:"html-wrapper"},Gl=["innerHTML"],jl=900,Wl={__name:"BaseHtmlRender",props:["html"],setup(e){const t=vue.inject("config"),n=e,o=vue.ref(null),s=vue.ref(!1),i=vue.ref(!1);function a(c){if(!t.value.base64)return;let d=window.win().getSelection().toString();if(d){let r=d.match(/([A-Za-z0-9+/=]+)/g);if(r){if(r[0].length<4)return;w.emit(_.SHOW_TOOLTIP,{text:r[0],e:c});}}}vue.watch(t.value,c=>{c.contentAutoCollapse||(s.value=!1);}),vue.watch([()=>o.value,()=>n.html],()=>{!o.value||!n.html||t.value.contentAutoCollapse&&(o.value.querySelectorAll("img").forEach(c=>{c.removeEventListener("load",u),c.addEventListener("load",u);}),u());},{immediate:!0,flush:"post"});function u(){if(i.value)return;let c=o.value.getBoundingClientRect();s.value=c.height>=jl;}return (c,d)=>n.html?(vue.openBlock(),vue.createElementBlock("div",Bl,[vue.createElementVNode("div",{class:vue.normalizeClass({mask:s.value})},[vue.createElementVNode("div",{ref_key:"contentRef",ref:o,innerHTML:n.html,onMouseup:a},null,40,Gl)],2),s.value?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"expand",onClick:d[0]||(d[0]=r=>{s.value=!1,i.value=!0;})},"展开")):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0)}},kt=X(Wl,[["__scopeId","data-v-2c9a538c"]]);const ql={name:"Comment",components:{BaseHtmlRender:kt,Author:Cl,PostEditor:pn,Point:bt},inject:["post","postDetailWidth","show","isNight","config"],props:{modelValue:{reply_content:""},type:{type:String,default(){return "list"}}},data(){return {edit:!1,ding:!1,expand:!0,expandWrong:!1,replyInfo:`@${this.modelValue.username} #${this.modelValue.floor} `,cssStyle:null,floor:this.modelValue.floor}},watch:{show(e){e&&(this.edit=!1);},postDetailWidth(e,t){this.checkIsTooLong(e);}},computed:{CommentDisplayType(){return O},myClass(){return {isOp:this.modelValue.isOp,isSimple:this.config.viewType==="simple",ding:this.ding,isLevelOne:this.modelValue.level===0,["c_"+this.floor]:this.type!=="top"}}},mounted(){this.checkIsTooLong(this.postDetailWidth);},methods:{checkIsTooLong(e){if(e!==0){let t=this.$refs.comment.getBoundingClientRect(),n=e*.6;if(n<t.width&&t.width<n+25&&this.modelValue.children.length){this.expand=!1;let o=2;this.cssStyle={padding:"1rem 0",width:`calc(${e}px - ${o}rem)`,transform:`translateX(calc(${t.width-e}px + ${o}rem))`,background:this.isNight?"#18222d":"white"};}}},showDing(){this.ding=!0,setTimeout(()=>{this.ding=!1;},2e3);},hide(){let e=`${window.baseUrl}/ignore/reply/${this.modelValue.id}?once=${this.post.once}`;w.emit(_.REMOVE,this.modelValue.floor),$.post(e).then(t=>{w.emit(_.REFRESH_ONCE),w.emit(_.SHOW_MSG,{type:"success",text:"隐藏成功"});},t=>{w.emit(_.SHOW_MSG,{type:"warning",text:"隐藏成功,仅本次有效（接口调用失败！）"});});},toggle(){this.expand=!this.expand;}}},ke=e=>(vue.pushScopeId("data-v-d8fc1c55"),e=e(),vue.popScopeId(),e),zl=["data-floor"],Jl={class:"comment-content"},Kl={class:"right"},Xl={class:"w"},Yl={key:0,class:"wrong-wrapper"},Ql=["href"],Zl={class:"del-line"},er=ke(()=>vue.createElementVNode("i",{class:"fa fa-question-circle-o wrong-icon","aria-hidden":"true"},null,-1)),tr={key:0,class:"warning"},nr=ke(()=>vue.createElementVNode("br",null,null,-1)),sr=ke(()=>vue.createElementVNode("br",null,null,-1)),ir=ke(()=>vue.createElementVNode("br",null,null,-1)),or=ke(()=>vue.createElementVNode("br",null,null,-1)),lr=ke(()=>vue.createElementVNode("br",null,null,-1)),rr=ke(()=>vue.createElementVNode("a",{href:"https://github.com/zyronon/web-scripts/issues",target:"_blank"},"这里",-1)),ar={class:"simple-wrapper"};function cr(e,t,n,o,s,i){const a=vue.resolveComponent("Author"),u=vue.resolveComponent("BaseHtmlRender"),c=vue.resolveComponent("PostEditor"),d=vue.resolveComponent("Comment",!0);return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["comment",i.myClass]),ref:"comment","data-floor":s.floor},[vue.createVNode(a,{modelValue:s.expand,"onUpdate:modelValue":t[0]||(t[0]=r=>s.expand=r),comment:n.modelValue,onReply:t[1]||(t[1]=r=>s.edit=!s.edit),type:n.type,onHide:i.hide},null,8,["modelValue","comment","type","onHide"]),s.cssStyle&&!s.expand?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"more ago",onClick:t[2]||(t[2]=r=>s.expand=!s.expand)}," 由于嵌套回复层级太深，自动将后续回复隐藏 ")):vue.createCommentVNode("",!0),s.expand?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"comment-content-w",style:vue.normalizeStyle(s.cssStyle)},[s.cssStyle?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"more ago",onClick:t[3]||(t[3]=r=>s.expand=!s.expand)}," 由于嵌套回复层级太深，自动将以下回复移至可见范围 ")):vue.createCommentVNode("",!0),vue.createElementVNode("div",Jl,[vue.createElementVNode("div",{class:"left expand-line",onClick:t[4]||(t[4]=(...r)=>i.toggle&&i.toggle(...r))}),vue.createElementVNode("div",Kl,[vue.createElementVNode("div",Xl,[n.modelValue.isWrong?(vue.openBlock(),vue.createElementBlock("div",Yl,[vue.createElementVNode("span",{onClick:t[5]||(t[5]=r=>s.expandWrong=!s.expandWrong),title:"点击楼层号查看提示"},[vue.createElementVNode("a",{href:"/member/"+n.modelValue.replyUsers[0]},"@"+vue.toDisplayString(n.modelValue.replyUsers[0])+"  ",9,Ql),vue.createElementVNode("span",Zl,"#"+vue.toDisplayString(n.modelValue.replyFloor),1),er]),s.expandWrong?(vue.openBlock(),vue.createElementBlock("div",tr,[vue.createTextVNode(" 这条回复似乎有点问题，指定的楼层号与@的人对应不上 "),nr,vue.createTextVNode(" 原因可能有下面几种： "),sr,vue.createTextVNode(" 一、屏蔽用户导致楼层塌陷：你屏蔽了A，自A以后的回复的楼层号都会减1 "),ir,vue.createTextVNode(" 二、忽略回复导致楼层塌陷：原理同上 "),or,vue.createTextVNode(" 三、层主回复时指定错了楼层号（同一，层主屏蔽了别人，导致楼层塌陷） "),lr,vue.createTextVNode(" 四、脚本解析错误，请在 "),rr,vue.createTextVNode("反馈 ")])):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0),i.config.commentDisplayType===i.CommentDisplayType.FloorInFloorNoCallUser&&this.type!=="top"?(vue.openBlock(),vue.createBlock(u,{key:1,class:"reply_content",html:n.modelValue.hideCallUserReplyContent},null,8,["html"])):(vue.openBlock(),vue.createBlock(u,{key:2,class:"reply_content",html:n.modelValue.reply_content},null,8,["html"])),s.edit?(vue.openBlock(),vue.createBlock(c,{key:3,onClose:t[6]||(t[6]=r=>s.edit=!1),replyInfo:s.replyInfo,replyUser:n.modelValue.username,replyFloor:n.modelValue.floor},null,8,["replyInfo","replyUser","replyFloor"])):vue.createCommentVNode("",!0)]),vue.createElementVNode("div",ar,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(n.modelValue.children,(r,m)=>(vue.openBlock(),vue.createBlock(d,{modelValue:n.modelValue.children[m],"onUpdate:modelValue":b=>n.modelValue.children[m]=b,key:m},null,8,["modelValue","onUpdate:modelValue"]))),128))])])]),s.cssStyle?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"more ago",onClick:t[7]||(t[7]=r=>s.expand=!s.expand)}," 由于嵌套回复层级太深，自动将以上回复移至可见范围 ")):vue.createCommentVNode("",!0)],4)):vue.createCommentVNode("",!0)],10,zl)}const dr=X(ql,[["render",cr],["__scopeId","data-v-d8fc1c55"]]);const ur={name:"Toolbar",components:{Icon:se,BaseLoading:Qe},inject:["isLogin","post","pageType"],data(){return {timer:null,loading:!1,loading2:!1,loading3:!1}},methods:{checkIsLogin(e=""){return this.isLogin?(this.$emit(e),!0):(w.emit(_.SHOW_MSG,{type:"warning",text:"请先登录！"}),!1)},tweet(){var n;let e=((n=window.user)==null?void 0:n.username)??"",t=`https://twitter.com/intent/tweet?url=${location.origin}/t/${this.post.id}?r=${e}&related=v2ex&text=${this.post.title}`;window.open(t,"_blank","width=550,height=370");},async report(){if(!this.checkIsLogin()||this.loading3)return;let e=this.post.isReport;if(e){w.emit(_.SHOW_MSG,{type:"success",text:"你已对本主题进行了报告"});return}let t=`${location.origin}/report/topic/${this.post.id}?once=${this.post.once}`;this.loading3=!0;let n=await fetch(t);if(this.loading3=!1,n.redirected){let o=await n.text();if(o.search("你已对本主题进行了报告")){w.emit(_.SHOW_MSG,{type:"success",text:"你已对本主题进行了报告"}),w.emit(_.REFRESH_ONCE,o),w.emit(_.MERGE,{isReport:!e});return}}w.emit(_.REFRESH_ONCE),w.emit(_.SHOW_MSG,{type:"error",text:"操作失败，请重试"});},async toggleIgnore(){if(!this.checkIsLogin())return;let e=`${window.baseUrl}/${this.post.isIgnore?"unignore":"ignore"}/topic/${this.post.id}?once=${this.post.once}`;this.pageType===j.Post?(this.loading2=!0,(await window.win().fetch(e)).redirected?(this.post.isIgnore||(window.win().location=window.baseUrl),w.emit(_.SHOW_MSG,{type:"success",text:this.post.isIgnore?"取消成功":"忽略成功"}),w.emit(_.MERGE,{isIgnore:!this.post.isIgnore})):w.emit(_.SHOW_MSG,{type:"warning",text:"忽略失败"}),this.loading2=!1):(this.post.isIgnore?this.loading2=!0:w.emit(_.IGNORE),(await window.win().fetch(e)).redirected?(this.post.isIgnore&&w.emit(_.REFRESH_ONCE),w.emit(_.SHOW_MSG,{type:"success",text:this.post.isIgnore?"取消成功":"忽略成功"}),w.emit(_.MERGE,{isIgnore:!this.post.isIgnore})):w.emit(_.SHOW_MSG,{type:"warning",text:"忽略成功,仅本次有效（接口调用失败！）"}),this.loading2=!1);},async toggleFavorite(){if(!this.checkIsLogin()||this.loading)return;let e=this.post.isFavorite;!e&&config.collectBrowserNotice&&w.emit(_.SHOW_MSG,{type:"success",text:"别忘记按Command/Cmd/CTRL + D添加到书签哦"});let t=`${location.origin}/${e?"unfavorite":"favorite"}/topic/${this.post.id}?once=${this.post.once}`;this.loading=!0;let n=await fetch(t);if(this.loading=!1,n.redirected){let o=await n.text();if(o.search(e?"加入收藏":"取消收藏")){w.emit(_.SHOW_MSG,{type:"success",text:e?"取消成功":"收藏成功"}),w.emit(_.MERGE,{collectCount:e?this.post.collectCount-1:this.post.collectCount+1}),w.emit(_.REFRESH_ONCE,o),w.emit(_.MERGE,{isFavorite:!e});return}}w.emit(_.REFRESH_ONCE),w.emit(_.SHOW_MSG,{type:"error",text:"操作失败"});}}},hn=e=>(vue.pushScopeId("data-v-e3df61b2"),e=e(),vue.popScopeId(),e),pr={class:"toolbar"},hr=hn(()=>vue.createElementVNode("span",null,"回复",-1)),fr={key:0,class:"tool no-hover"},mr=hn(()=>vue.createElementVNode("span",null,"Tweet",-1));function gr(e,t,n,o,s,i){const a=vue.resolveComponent("Icon"),u=vue.resolveComponent("BaseLoading");return vue.openBlock(),vue.createElementBlock("div",pr,[vue.renderSlot(e.$slots,"default",{},void 0,!0),vue.createElementVNode("div",{class:"tool",onClick:t[0]||(t[0]=c=>i.checkIsLogin("reply"))},[vue.createVNode(a,{icon:"mynaui:message"}),hr]),vue.createElementVNode("div",{class:vue.normalizeClass(["tool",{disabled:s.loading}]),onClick:t[1]||(t[1]=(...c)=>i.toggleFavorite&&i.toggleFavorite(...c))},[s.loading?(vue.openBlock(),vue.createBlock(u,{key:0,size:"small"})):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[i.post.isFavorite?(vue.openBlock(),vue.createBlock(a,{key:0,color:"rgb(224,42,42)",icon:"iconoir:star-solid"})):(vue.openBlock(),vue.createBlock(a,{key:1,icon:"iconoir:star"}))],64)),vue.createElementVNode("span",null,vue.toDisplayString(i.post.isFavorite?"取消":"")+"收藏",1)],2),i.post.collectCount!==0?(vue.openBlock(),vue.createElementBlock("div",fr,[vue.createElementVNode("span",null,vue.toDisplayString(i.post.collectCount+"人收藏"),1)])):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"tool",onClick:t[2]||(t[2]=(...c)=>i.tweet&&i.tweet(...c))},[vue.createVNode(a,{icon:"uil:share"}),mr]),vue.createElementVNode("div",{class:vue.normalizeClass(["tool",{disabled:s.loading2}]),onClick:t[3]||(t[3]=(...c)=>i.toggleIgnore&&i.toggleIgnore(...c))},[s.loading2?(vue.openBlock(),vue.createBlock(u,{key:0,size:"small"})):(vue.openBlock(),vue.createBlock(a,{key:1,icon:"fluent:eye-hide-24-regular"})),vue.createElementVNode("span",null,vue.toDisplayString(i.post.isIgnore?"取消忽略":"忽略"),1)],2),vue.createElementVNode("div",{class:vue.normalizeClass(["tool",{disabled:s.loading3}]),onClick:t[4]||(t[4]=(...c)=>i.report&&i.report(...c))},[s.loading3?(vue.openBlock(),vue.createBlock(u,{key:0,size:"small"})):(vue.openBlock(),vue.createBlock(a,{key:1,class:"black",icon:"solar:danger-triangle-outline"})),vue.createElementVNode("span",null,vue.toDisplayString(i.post.isReport?"你已对本主题进行了报告":"报告"),1)],2)])}const yr=X(ur,[["render",gr],["__scopeId","data-v-e3df61b2"]]);const Tt=e=>(vue.pushScopeId("data-v-87050bc7"),e=e(),vue.popScopeId(),e),wr=["href"],_r=["src"],vr={class:"texts"},br={key:0,class:"point"},kr={class:"link-num"},Tr={class:"my-tag"},xr=Tt(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),Cr={key:2,class:"ago"},Sr={key:3,class:"mod"},Ir={key:4,class:"owner"},Lr=["href"],Rr={key:5,class:"owner"},Mr={key:6,class:"mod"},Nr={key:7,class:"ago"},Or={class:"my-tag"},Er=Tt(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),Pr={key:9,class:"point"},Dr={class:"link-num"},Ar=["href"],Vr=["src"],Ur={class:"Author-right"},$r={class:"floor"},Hr=Tt(()=>vue.createElementVNode("span",null,"跳转",-1)),Fr=[Hr],Br={__name:"SingleComment",props:{comment:{reply_content:""},isRight:{type:Boolean,default(){return !1}}},setup(e){const t=vue.inject("config"),n=vue.inject("isLogin"),o=vue.inject("tags"),s=e,i=vue.computed(()=>o[s.comment.username]??[]);function a(){w.emit(_.JUMP,s.comment.floor);}return (u,c)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["comment",{isSimple:vue.unref(t).viewType==="simple"}]),ref:"comment"},[e.isRight?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("a",{key:0,class:"avatar",href:`/member/${e.comment.username}`},[vue.createElementVNode("img",{src:e.comment.avatar,alt:""},null,8,_r)],8,wr)),vue.createElementVNode("div",{class:vue.normalizeClass(["comment-body",{isRight:e.isRight}])},[vue.createElementVNode("div",vr,[e.comment.thankCount&&e.isRight?(vue.openBlock(),vue.createElementBlock("div",br,[e.comment.isThanked?(vue.openBlock(),vue.createBlock(vue.unref(se),{key:0,color:"rgb(224,42,42)",icon:"icon-park-solid:like"})):(vue.openBlock(),vue.createBlock(vue.unref(se),{key:1,color:e.comment.thankCount?"rgb(224,42,42)":null,icon:"icon-park-outline:like"},null,8,["color"])),vue.createElementVNode("div",kr,vue.toDisplayString(e.comment.thankCount),1)])):vue.createCommentVNode("",!0),vue.unref(n)&&vue.unref(t).openTag&&e.isRight?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:1},vue.renderList(i.value,d=>(vue.openBlock(),vue.createElementBlock("span",Tr,[xr,vue.createElementVNode("span",null,vue.toDisplayString(d),1)]))),256)):vue.createCommentVNode("",!0),e.isRight?(vue.openBlock(),vue.createElementBlock("span",Cr,vue.toDisplayString(e.comment.date),1)):vue.createCommentVNode("",!0),e.comment.isMod&&e.isRight?(vue.openBlock(),vue.createElementBlock("div",Sr,"MOD")):vue.createCommentVNode("",!0),e.comment.isOp&&e.isRight?(vue.openBlock(),vue.createElementBlock("div",Ir,"OP")):vue.createCommentVNode("",!0),vue.createElementVNode("a",{href:`/member/${e.comment.username}`,class:"username"},vue.toDisplayString(e.comment.username),9,Lr),e.comment.isOp&&!e.isRight?(vue.openBlock(),vue.createElementBlock("div",Rr,"OP")):vue.createCommentVNode("",!0),e.comment.isMod&&!e.isRight?(vue.openBlock(),vue.createElementBlock("div",Mr,"MOD")):vue.createCommentVNode("",!0),e.isRight?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("span",Nr,vue.toDisplayString(e.comment.date),1)),vue.unref(n)&&vue.unref(t).openTag&&!e.isRight?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:8},vue.renderList(i.value,d=>(vue.openBlock(),vue.createElementBlock("span",Or,[Er,vue.createElementVNode("span",null,vue.toDisplayString(d),1)]))),256)):vue.createCommentVNode("",!0),e.comment.thankCount&&!e.isRight?(vue.openBlock(),vue.createElementBlock("div",Pr,[e.comment.isThanked?(vue.openBlock(),vue.createBlock(vue.unref(se),{key:0,color:"rgb(224,42,42)",icon:"icon-park-solid:like"})):(vue.openBlock(),vue.createBlock(vue.unref(se),{key:1,color:e.comment.thankCount?"rgb(224,42,42)":null,icon:"icon-park-outline:like"},null,8,["color"])),vue.createElementVNode("div",Dr,vue.toDisplayString(e.comment.thankCount),1)])):vue.createCommentVNode("",!0)]),vue.createVNode(kt,{class:"reply_content",html:e.comment.reply_content},null,8,["html"])],2),e.isRight?(vue.openBlock(),vue.createElementBlock("a",{key:1,class:"avatar",href:`/member/${e.comment.username}`},[vue.createElementVNode("img",{src:e.comment.avatar,alt:""},null,8,Vr)],8,Ar)):vue.createCommentVNode("",!0),vue.createElementVNode("div",Ur,[vue.createElementVNode("div",$r,vue.toDisplayString(e.comment.floor),1),vue.createElementVNode("div",{class:"tool jump",onClick:a},Fr)])],2))}},Gr=X(Br,[["__scopeId","data-v-87050bc7"]]);const jr={name:"detail",components:{BaseSelect:vt,BaseButton:ye,SingleComment:Gr,PopConfirm:$e,Comment:dr,PostEditor:pn,Point:bt,Toolbar:yr,BaseHtmlRender:kt,Tooltip:Ue,BaseLoading:Qe,Icon:se},inject:["allReplyUsers","post","tags","isLogin","config","pageType","isNight"],provide(){return {postDetailWidth:vue.computed(()=>this.postDetailWidth)}},props:{modelValue:{type:Boolean,default(){return !1}},loading:{type:Boolean,default(){return !1}},refreshLoading:{type:Boolean,default(){return !1}},displayType:O.FloorInFloorNoCallUser},data(){return {isSticky:!1,selectCallIndex:0,postDetailWidth:0,showCallList:!1,showRelationReply:!1,replyText:"",callStyle:{top:0,left:0},targetUser:{left:[],right:"",rightFloor:-1},currentFloor:"",showOpTag:!1}},computed:{canAppend(){if(this.isMy){let e=new Date(this.post.createDate);return Date.now()-e.valueOf()>1e3*60*30}return !1},canEditMove(){if(this.isMy){let e=new Date(this.post.createDate);return Date.now()-e.valueOf()<1e3*60*10}return !1},isMy(){return this.post.member.username===window.user.username},myTags(){return this.tags[this.post.member.username]??[]},CommentDisplayType(){return O},isPost(){return this.pageType===j.Post},filterCallList(){if(this.showCallList){let e=["管理员","所有人"].concat(this.allReplyUsers);return this.replyText?e.filter(t=>t.search(this.replyText)>-1):e}return []},topReply(){return this.post.replyList.filter(e=>e.thankCount>=this.config.topReplyLoveMinCount).sort((e,t)=>t.thankCount-e.thankCount).slice(0,this.config.topReplyCount)},replyList(){return [O.FloorInFloor,O.FloorInFloorNoCallUser].includes(this.displayType)?this.post.nestedReplies:this.displayType===O.Like?window.clone(this.post.nestedReplies).sort((e,t)=>t.thankCount-e.thankCount):this.displayType===O.New?window.clone(this.post.replyList).reverse():this.displayType===O.V2exOrigin?this.post.replyList:this.displayType===O.FloorInFloorNested?this.post.nestedRedundReplies:this.displayType===O.OnlyOp?this.post.replyList.filter(e=>{var t;return e.username===((t=this.post.member)==null?void 0:t.username)}):[]},relationReply(){return this.targetUser.left.length&&this.targetUser.right?this.post.replyList.filter(e=>{if(this.targetUser.left.includes(e.username))if(e.floor>this.targetUser.rightFloor){if(e.replyUsers.includes(this.targetUser.right))return !0}else return !0;if(e.username===this.targetUser.right){for(let t=0;t<this.targetUser.left.length;t++)if(e.replyUsers.includes(this.targetUser.left[t]))return !0}}):[]}},watch:{"post.id"(e,t){this.$refs["post-editor"]&&(this.$refs["post-editor"].content="",vue.nextTick(()=>{var n,o;(o=(n=this.$refs)==null?void 0:n.detail)==null||o.scrollTo({top:0});}));},"post.headerTemplate"(e,t){document.querySelector(".main-wrapper .post-wrapper .html-wrapper .header")&&(this.showOpTag=!0);},modelValue:{handler(e){this.isPost||(e?(document.body.style.overflow="hidden",window.history.state||window.history.pushState({},0,this.post.href),this.currentFloor="",vue.nextTick(()=>{var t,n;window.document.title=this.post.title??"V2EX",(n=(t=this.$refs)==null?void 0:t.main)==null||n.focus();})):(document.body.style.overflow="unset",window.document.title="V2EX",this.isSticky=!1,this.showRelationReply=!1,window.history.state&&window.history.back()));}}},mounted(){vue.nextTick(()=>{setTimeout(()=>{var e;this.postDetailWidth=((e=this.$refs.mainWrapper)==null?void 0:e.getBoundingClientRect().width)||0;},500);}),this.isLogin&&(new IntersectionObserver(([t])=>t.target.toggleAttribute("stuck",t.intersectionRatio<1),{threshold:[1]}).observe(this.$refs.replyBox),window.addEventListener("keydown",this.onKeyDown)),w.on(_.SHOW_CALL,e=>{e.show?(this.showCallList=!0,this.replyText=e.text,this.isPost?this.callStyle.top=e.top+$(window.win()).scrollTop()+-40+"px":this.callStyle.top=e.top+$(".post-detail").scrollTop()+15+"px",this.callStyle.left=e.left-$(".main")[0].getBoundingClientRect().left+10+"px",this.selectCallIndex>=this.filterCallList.length&&(this.selectCallIndex=0)):(this.replyText="",this.showCallList=!1,this.selectCallIndex=0);}),w.on(_.RELATION_REPLY,e=>{this.targetUser=e,this.showRelationReply=!0;}),w.on(_.JUMP,this.jump),this.isPost&&window.addEventListener("scroll",this.debounceScroll);},beforeUnmount(){window.removeEventListener("keydown",this.onKeyDown),w.off(_.SHOW_CALL);},methods:{addTag(){w.emit(_.ADD_TAG,this.post.member.username);},removeTag(e){w.emit(_.REMOVE_TAG,{username:this.post.member.username,tag:e});},stop(e){},jump(e){let t=this.replyList[this.replyList.length-1];if(e==="")e=t.floor;else {try{e=Number(e);}catch{e=t.floor;}e===0&&(e=1),e>t.floor&&(e=t.floor);}if(!this.post.replyList.length){w.emit(_.SHOW_MSG,{type:"warning",text:"没有回复可跳转！"});return}if(e>this.post.replyList.length){w.emit(_.SHOW_MSG,{type:"error",text:"没有找到对应回复！"});return}let n=$(`.c_${e}`);if(!n.length){w.emit(_.SHOW_MSG,{type:"error",text:"没有找到对应回复！"});return}n[0].scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),n.addClass("ding"),this.currentFloor=e+1,setTimeout(()=>{n.removeClass("ding");},2e3);},collapseTopReplyList(){$(this.$refs.topReply).slideToggle("fast");},goBottom(){this.isSticky=!1,setTimeout(()=>{if(this.isPost){let e=$("body , html"),t=e.prop("scrollHeight");e.animate({scrollTop:t-850},300);}else this.$refs.detail.scrollTo({top:this.$refs.detail.scrollHeight,behavior:"smooth"});});},close(e){this.isPost||(e==="space"?this.config.closePostDetailBySpace&&this.$emit("update:modelValue",!1):this.$emit("update:modelValue",!1));},setCall(e){w.emit(_.SET_CALL,e),this.showCallList=!1;},onKeyDown(e){if(!this.modelValue||!this.showCallList)return;let t=this.filterCallList.slice(0,10).length;e.keyCode===13&&(this.setCall(this.filterCallList[this.selectCallIndex]),e.preventDefault()),e.keyCode===38&&(this.selectCallIndex--,this.selectCallIndex<0&&(this.selectCallIndex=t-1),e.preventDefault()),e.keyCode===40&&(this.selectCallIndex++,this.selectCallIndex>t-1&&(this.selectCallIndex=0),e.preventDefault());},changeOption(e){this.$emit("update:displayType",e);},addThank(){w.emit(_.CHANGE_POST_THANK,{id:this.post.id,type:"add"});},recallThank(){w.emit(_.CHANGE_POST_THANK,{id:this.post.id,type:"recall"});},scrollTop(){this.isPost?$("body , html").animate({scrollTop:0},300):this.$refs.detail.scrollTo({top:0,behavior:"smooth"});}}},ue=e=>(vue.pushScopeId("data-v-cd896901"),e=e(),vue.popScopeId(),e),Wr={class:"my-box post-wrapper"},qr={class:"header"},zr={class:"fr"},Jr=["href"],Kr=["src","alt"],Xr=ue(()=>vue.createElementVNode("a",{href:"/"},"V2EX",-1)),Yr=ue(()=>vue.createElementVNode("span",{class:"chevron"},"  ›  ",-1)),Qr=["href"],Zr=ue(()=>vue.createElementVNode("div",{class:"sep10"},null,-1)),ea=["id"],ta=["onclick"],na=ue(()=>vue.createElementVNode("li",{class:"fa fa-chevron-up"},null,-1)),sa=["onclick"],ia=ue(()=>vue.createElementVNode("li",{class:"fa fa-chevron-down"},null,-1)),oa=[ia],la={class:"gray"},ra=["href"],aa=["title"],ca=["href"],da=ue(()=>vue.createElementVNode("li",{class:"fa fa-info-circle"},null,-1)),ua=[da],pa=["href"],ha=["href"],fa=["href"],ma={class:"my-tag"},ga=ue(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),ya=["onClick"],wa={key:0,class:"my-box"},_a=ue(()=>vue.createElementVNode("span",null,"高赞回复",-1)),va={class:"top-reply"},ba={class:"tool"},ka={ref:"topReply"},Ta={class:"my-box comment-wrapper"},xa={key:0,class:"my-cell flex"},Ca={key:0},Sa=ue(()=>vue.createElementVNode("strong",{class:"snow"},"•",-1)),Ia=["innerHTML"],La={key:0,class:"loading-wrapper"},Ra={key:1,class:"comments"},Ma={key:1,id:"no-comments-yet"},Na={class:"my-cell flex"},Oa=ue(()=>vue.createElementVNode("span",null,"添加一条新回复",-1)),Ea={class:"notice-right gray"},Pa={class:"p1"},Da=ue(()=>vue.createElementVNode("span",{class:"gray"},"上下文",-1)),Aa={class:"top-reply"},Va=["onClick"];function Ua(e,t,n,o,s,i){const a=vue.resolveComponent("BaseHtmlRender"),u=vue.resolveComponent("Point"),c=vue.resolveComponent("Toolbar"),d=vue.resolveComponent("Icon"),r=vue.resolveComponent("Tooltip"),m=vue.resolveComponent("Comment"),b=vue.resolveComponent("BaseSelect"),v=vue.resolveComponent("BaseLoading"),g=vue.resolveComponent("PostEditor"),f=vue.resolveComponent("SingleComment");return vue.withDirectives((vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["post-detail",[i.isNight?"isNight":"",i.pageType]]),ref:"detail",onKeydown:t[19]||(t[19]=vue.withKeys(p=>i.close(),["esc"])),onScroll:t[20]||(t[20]=(...p)=>e.debounceScroll&&e.debounceScroll(...p)),onClick:t[21]||(t[21]=p=>i.close("space"))},[vue.createElementVNode("div",{ref:"main",class:"main",tabindex:"1",onClick:t[18]||(t[18]=vue.withModifiers((...p)=>i.stop&&i.stop(...p),["stop"]))},[vue.createElementVNode("div",{class:"main-wrapper",ref:"mainWrapper",style:vue.normalizeStyle({width:i.config.postWidth})},[vue.createElementVNode("div",Wr,[vue.createElementVNode("div",qr,[vue.createElementVNode("div",zr,[vue.createElementVNode("a",{href:`/member/${i.post.member.username}`,style:{width:"73px",height:"73px",display:"inline-block"}},[i.post.member.avatar_large?(vue.openBlock(),vue.createElementBlock("img",{key:0,src:i.post.member.avatar_large,class:"avatar",style:{width:"73px",height:"73px"},border:"0",align:"default",alt:i.post.member.username},null,8,Kr)):vue.createCommentVNode("",!0)],8,Jr)]),Xr,Yr,vue.createElementVNode("a",{href:i.post.node.url},vue.toDisplayString(i.post.node.title),9,Qr),Zr,vue.createElementVNode("h1",null,vue.toDisplayString(i.post.title),1),vue.createElementVNode("div",{id:`topic_${i.post.id}_votes`,class:"votes"},[vue.createElementVNode("a",{href:"javascript:",onclick:`upVoteTopic(${i.post.id});`,class:"vote"},[na,vue.createTextVNode("   ")],8,ta),vue.createTextVNode("   "),vue.createElementVNode("a",{href:"javascript:",onclick:`downVoteTopic(${i.post.id});`,class:"vote"},oa,8,sa)],8,ea),vue.createTextVNode("   "),vue.createElementVNode("small",la,[vue.createElementVNode("a",{href:`/member/${i.post.member.username}`},vue.toDisplayString(i.post.member.username),9,ra),vue.createTextVNode(" · "),i.post.member.createDate?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createElementVNode("span",{class:vue.normalizeClass(i.post.member.isNew&&"danger")},vue.toDisplayString(i.post.member.createDate),3),vue.createTextVNode(" · ")],64)):vue.createCommentVNode("",!0),i.post.createDateAgo?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createElementVNode("span",{title:i.post.createDate},vue.toDisplayString(i.post.createDateAgo),9,aa),vue.createTextVNode(" · ")],64)):vue.createCommentVNode("",!0),vue.createTextVNode(" "+vue.toDisplayString(i.post.clickCount)+" 次点击 ",1),i.isMy?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:2},[vue.createTextVNode("   "),vue.createElementVNode("a",{href:`/t/${i.post.id}/info`},ua,8,ca),vue.createTextVNode("   "),i.canAppend?(vue.openBlock(),vue.createElementBlock("a",{key:0,href:`/append/topic/${i.post.id}`,class:"op"},"APPEND",8,pa)):vue.createCommentVNode("",!0),i.canEditMove?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createElementVNode("a",{href:`/move/topic/${i.post.id}`,class:"op"},"MOVE",8,ha),vue.createTextVNode("  "),vue.createElementVNode("a",{href:`/edit/topic/${i.post.id}`,class:"op"},"EDIT",8,fa)],64)):vue.createCommentVNode("",!0)],64)):vue.createCommentVNode("",!0)]),i.isLogin&&i.config.openTag?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.myTags,p=>(vue.openBlock(),vue.createElementBlock("span",ma,[ga,vue.createElementVNode("span",null,vue.toDisplayString(p),1),vue.createElementVNode("i",{class:"fa fa-trash-o remove",onClick:T=>i.removeTag(p)},null,8,ya)]))),256)),vue.createElementVNode("span",{class:"add-tag ago",onClick:t[0]||(t[0]=(...p)=>i.addTag&&i.addTag(...p)),title:"添加标签"},"+")],64)):vue.createCommentVNode("",!0)]),i.post.headerTemplate?(vue.openBlock(),vue.createBlock(a,{key:0,html:i.post.headerTemplate},null,8,["html"])):(vue.openBlock(),vue.createBlock(a,{key:1,html:i.post.jsonContent},null,8,["html"])),vue.createVNode(c,{onReply:t[1]||(t[1]=p=>s.isSticky=!s.isSticky)},{default:vue.withCtx(()=>[vue.createVNode(u,{onAddThank:i.addThank,onRecallThank:i.recallThank,item:{isThanked:i.post.isThanked,thankCount:i.post.thankCount,username:i.post.username},"api-url":"topic/"+i.post.id},null,8,["onAddThank","onRecallThank","item","api-url"])]),_:1})]),i.topReply.length&&i.config.showTopReply?(vue.openBlock(),vue.createElementBlock("div",wa,[vue.createElementVNode("div",{class:"my-cell flex",onClick:t[2]||(t[2]=(...p)=>i.collapseTopReplyList&&i.collapseTopReplyList(...p))},[_a,vue.createElementVNode("div",va,[vue.createVNode(r,{title:"收起高赞回复"},{default:vue.withCtx(()=>[vue.createElementVNode("div",ba,[vue.createVNode(d,{icon:"gravity-ui:chevrons-collapse-vertical"})])]),_:1})])]),vue.createElementVNode("div",ka,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.topReply,(p,T)=>(vue.openBlock(),vue.createBlock(m,{key:p.floor,type:"top",modelValue:i.topReply[T],"onUpdate:modelValue":k=>i.topReply[T]=k},null,8,["modelValue","onUpdate:modelValue"]))),128))],512)])):vue.createCommentVNode("",!0),vue.createElementVNode("div",Ta,[i.post.replyList.length||n.loading?(vue.openBlock(),vue.createElementBlock("div",xa,[vue.createElementVNode("div",null,[vue.createTextVNode(vue.toDisplayString(i.post.replyCount)+" 条回复 ",1),i.post.lastReplyDate?(vue.openBlock(),vue.createElementBlock("span",Ca,[vue.createTextVNode("  "),Sa,vue.createTextVNode("  "+vue.toDisplayString(i.post.lastReplyDate),1)])):vue.createCommentVNode("",!0)]),i.config.showToolbar?(vue.openBlock(),vue.createBlock(b,{key:0,"display-type":n.displayType,"onUpdate:displayType":t[3]||(t[3]=p=>e.$emit("update:displayType",p))},null,8,["display-type"])):(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"fr",innerHTML:i.post.fr},null,8,Ia))])):vue.createCommentVNode("",!0),i.replyList.length||n.loading?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[n.loading?(vue.openBlock(),vue.createElementBlock("div",La,[vue.createVNode(v,{size:"large"})])):(vue.openBlock(),vue.createElementBlock("div",Ra,[n.modelValue?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:0},vue.renderList(i.replyList,(p,T)=>(vue.openBlock(),vue.createBlock(m,{key:p.floor,modelValue:i.replyList[T],"onUpdate:modelValue":k=>i.replyList[T]=k},null,8,["modelValue","onUpdate:modelValue"]))),128)):vue.createCommentVNode("",!0)]))],64)):vue.createCommentVNode("",!0)]),i.replyList.length||n.loading?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("div",Ma,"目前尚无回复")),i.isLogin?(vue.openBlock(),vue.createElementBlock("div",{key:2,class:vue.normalizeClass(["my-box",{sticky:s.isSticky}]),ref:"replyBox"},[vue.createElementVNode("div",Na,[Oa,vue.createElementVNode("div",Ea,[s.isSticky?(vue.openBlock(),vue.createElementBlock("a",{key:0,style:{"margin-right":"2rem"},onClick:t[4]||(t[4]=p=>s.isSticky=!1)},"取消回复框停靠")):vue.createCommentVNode("",!0),vue.createElementVNode("a",{onClick:t[5]||(t[5]=(...p)=>i.scrollTop&&i.scrollTop(...p))},"回到顶部")])]),vue.createElementVNode("div",Pa,[vue.createVNode(g,{onClose:i.goBottom,ref:"post-editor",useType:"reply-post",onClick:t[6]||(t[6]=p=>s.isSticky=!0)},null,8,["onClose"])])],2)):vue.createCommentVNode("",!0)],4),s.showRelationReply?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"relationReply",onClick:t[10]||(t[10]=p=>i.close("space"))},[vue.createElementVNode("div",{class:"my-cell flex",onClick:t[8]||(t[8]=vue.withModifiers((...p)=>i.stop&&i.stop(...p),["stop"]))},[Da,vue.createElementVNode("div",Aa,[vue.createVNode(d,{icon:"ic:round-close",onClick:t[7]||(t[7]=p=>s.showRelationReply=!1)})])]),vue.createElementVNode("div",{class:"comments",onClick:t[9]||(t[9]=vue.withModifiers((...p)=>i.stop&&i.stop(...p),["stop"]))},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.relationReply,(p,T)=>(vue.openBlock(),vue.createBlock(f,{"is-right":p.username===s.targetUser.right,key:p.floor,comment:p},null,8,["is-right","comment"]))),128))])])):vue.createCommentVNode("",!0),s.showCallList&&i.filterCallList.length?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"call-list",style:vue.normalizeStyle(s.callStyle)},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.filterCallList,(p,T)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["call-item",{select:T===s.selectCallIndex}]),onClick:k=>i.setCall(p)},[vue.createElementVNode("a",null,vue.toDisplayString(p),1)],10,Va))),256))],4)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"close-btn",onClick:t[11]||(t[11]=p=>i.close("btn"))},[vue.createVNode(d,{icon:"fontisto:close-a"})]),vue.createElementVNode("div",{class:"scroll-top gray",onClick:t[12]||(t[12]=vue.withModifiers((...p)=>i.scrollTop&&i.scrollTop(...p),["stop"]))},[vue.createVNode(d,{icon:"lucide:move-up"})]),vue.createElementVNode("div",{class:"refresh gray",onClick:t[13]||(t[13]=vue.withModifiers(p=>e.$emit("refresh"),["stop"]))},[n.refreshLoading?(vue.openBlock(),vue.createBlock(v,{key:0})):(vue.openBlock(),vue.createBlock(d,{key:1,icon:"material-symbols:refresh"}))]),vue.createElementVNode("div",{class:"scroll-to gray",onClick:t[17]||(t[17]=vue.withModifiers(p=>i.jump(s.currentFloor),["stop"]))},[vue.createVNode(d,{icon:"lucide:move-down"}),vue.withDirectives(vue.createElementVNode("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=p=>s.currentFloor=p),onClick:t[15]||(t[15]=vue.withModifiers((...p)=>i.stop&&i.stop(...p),["stop"])),onKeydown:t[16]||(t[16]=vue.withKeys(p=>i.jump(s.currentFloor),["enter"]))},null,544),[[vue.vModelText,s.currentFloor]])])],512)],34)),[[vue.vShow,n.modelValue]])}const $a=X(jr,[["render",Ua],["__scopeId","data-v-cd896901"]]);const Ha={key:1},Fa={__name:"Base64Tooltip",setup(e){const t=vue.ref(null),n=vue.ref(!1),o=vue.ref(""),s=vue.ref(""),i=vue.reactive({left:"-100vw",top:"-100vh"});vue.onMounted(()=>{w.on(_.SHOW_TOOLTIP,({text:r,e:m})=>{setTimeout(()=>n.value=!0),o.value=r,s.value="",i.left=m.clientX+"px",i.top=m.clientY+20+"px";}),window.addEventListener("click",r=>{t.value&&!t.value.contains(r.target)&&n.value&&(n.value=!1);},{capture:!0});const d=()=>n.value&&(n.value=!1);$(".post-detail",window.win().doc).on("scroll",d);});function a(){window.win().navigator.clipboard?(window.win().navigator.clipboard.writeText(s.value),w.emit(_.SHOW_MSG,{type:"success",text:"复制成功"})):w.emit(_.SHOW_MSG,{type:"error",text:"复制失败！浏览器不支持！"});}function u(d){let r=window.atob(d),m=r.length,b=new Uint8Array(m);for(let v=0;v<m;v++)b[v]=r.charCodeAt(v);return b.buffer}function c(){try{new Blob([u(o.value)]).text().then(d=>{s.value=d;});}catch{w.emit(_.SHOW_MSG,{type:"error",text:"Base64解码失败！不是标准数据！"});}}return (d,r)=>vue.withDirectives((vue.openBlock(),vue.createElementBlock("div",{class:"base64_tooltip",style:vue.normalizeStyle(i),onClick:c,ref_key:"tooltip",ref:t},[s.value?(vue.openBlock(),vue.createElementBlock("div",Ha,[vue.createElementVNode("span",null,vue.toDisplayString(s.value),1),vue.createVNode(ye,{class:"btn",size:"small",onClick:a},{default:vue.withCtx(()=>[vue.createTextVNode("点击复制")]),_:1})])):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(" Base64解码："+vue.toDisplayString(o.value)+" ",1),vue.createVNode(vue.unref(se),{icon:"system-uicons:translate"})],64))],4)),[[vue.vShow,n.value]])}},Ba=X(Fa,[["__scopeId","data-v-c50fb66c"]]);const Ga={name:"Msg",components:{Icon:se},props:{type:"",text:""},created(){setTimeout(()=>{this.$emit("close");},3e3);}},ja={class:"right"};function Wa(e,t,n,o,s,i){const a=vue.resolveComponent("Icon");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["msg",n.type])},[vue.createElementVNode("div",{class:"left",onClick:t[0]||(t[0]=u=>e.$emit("close"))},[vue.createVNode(a,{icon:"ic:round-close"})]),vue.createElementVNode("div",ja,vue.toDisplayString(n.text),1)],2)}const fn=X(Ga,[["render",Wa],["__scopeId","data-v-8bf692ea"]]);const mn=e=>(vue.pushScopeId("data-v-341122ff"),e=e(),vue.popScopeId(),e),qa={key:0,class:"tag-modal modal"},za={class:"wrapper"},Ja=mn(()=>vue.createElementVNode("div",{class:"title"}," 添加标签 ",-1)),Ka={class:"option"},Xa=mn(()=>vue.createElementVNode("span",null,"用户：",-1)),Ya={class:"btns"},Qa={__name:"TagModal",props:["tags"],emits:["update:tags"],setup(e,{emit:t}){const n=vue.reactive({show:!1,currentUsername:"",tag:""}),o=e,s=t,i=vue.ref();vue.onMounted(()=>{w.on(_.ADD_TAG,u=>{n.currentUsername=u,n.show=!0,vue.nextTick(()=>{i.value.focus();});});});async function a(){if(!n.tag){w.emit(_.SHOW_MSG,{type:"warning",text:"请输入标签"});return}let u=window.clone(o.tags),c=window.clone(o.tags),d=c[n.currentUsername]??[];if(d.findIndex(b=>b===n.tag)>-1){w.emit(_.SHOW_MSG,{type:"warning",text:"标签已存在！"});return}else d.push(n.tag);c[n.currentUsername]=d,s("update:tags",c),n.tag="",n.show=!1,await window.parse.saveTags(c)||(w.emit(_.SHOW_MSG,{type:"error",text:"标签添加失败！"}),s("update:tags",u));}return (u,c)=>(vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[n.show?(vue.openBlock(),vue.createElementBlock("div",qa,[vue.createElementVNode("div",{class:"mask",onClick:c[0]||(c[0]=vue.withModifiers(d=>n.show=!1,["stop"]))}),vue.createElementVNode("div",za,[Ja,vue.createElementVNode("div",Ka,[Xa,vue.createElementVNode("div",null,[vue.createElementVNode("b",null,vue.toDisplayString(n.currentUsername),1)])]),vue.withDirectives(vue.createElementVNode("input",{type:"text",ref_key:"inputRef",ref:i,style:{width:"100%"},"onUpdate:modelValue":c[1]||(c[1]=d=>n.tag=d),onKeydown:vue.withKeys(a,["enter"])},null,544),[[vue.vModelText,n.tag]]),vue.createElementVNode("div",Ya,[vue.createVNode(ye,{type:"link",onClick:c[2]||(c[2]=d=>{n.show=!1,n.tag="";})},{default:vue.withCtx(()=>[vue.createTextVNode("取消")]),_:1}),vue.createVNode(ye,{onClick:a},{default:vue.withCtx(()=>[vue.createTextVNode("确定")]),_:1})])])])):vue.createCommentVNode("",!0)]),_:1}))}},Za=X(Qa,[["__scopeId","data-v-341122ff"]]);const ec={class:"msgs"},tc={__name:"MsgModal",setup(e){const t=vue.reactive([]);vue.onMounted(()=>{w.on(_.SHOW_MSG,o=>{t.push({...o,id:Date.now()});});});function n(o){let s=t.findIndex(i=>i.id===o);s>-1&&t.splice(s,1);}return (o,s)=>(vue.openBlock(),vue.createElementBlock("div",ec,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t,i=>(vue.openBlock(),vue.createBlock(fn,{key:i.id,type:i.type,text:i.text,onClose:a=>n(i.id)},null,8,["type","text","onClose"]))),128))]))}},nc=X(tc,[["__scopeId","data-v-b73f4332"]]);let sc=".__cf_email__",ic="data-cfemail",jt=document.createElement("div");function ut(e){console.error(e);}function Wt(e,t){let n=e.substr(t,2);return parseInt(n,16)}function oc(e,t){let n="",o=Wt(e,t);for(let s=t+2;s<e.length;s+=2){let i=Wt(e,s)^o;n+=String.fromCharCode(i);}try{n=decodeURIComponent(escape(n));}catch(s){ut(s);}return jt.innerHTML='<a href="'+n.replace(/"/g,"&quot;")+'"></a>',jt.childNodes[0].getAttribute("href")||""}function lc(e){try{e.find(sc).each(function(){try{let n=this,o=n.parentNode,s=n.getAttribute(ic);if(s){let i=oc(s,0),a=document.createTextNode(i);o.replaceChild(a,n);}}catch(n){ut(n);}});}catch(t){ut(t);}}const rc=e=>(vue.pushScopeId("data-v-882b932b"),e=e(),vue.popScopeId(),e),ac={key:0,class:"tag-modal modal"},cc={class:"modal-root"},dc=rc(()=>vue.createElementVNode("div",{class:"title"}," 提醒系统 ",-1)),uc=["innerHTML"],pc={__name:"NotificationModal",props:["modelValue","h"],emits:["update:modelValue"],setup(e,{emit:t}){const n=t;vue.onMounted(()=>{});function o(){n("update:modelValue",!1);}return (s,i)=>(vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[e.modelValue?(vue.openBlock(),vue.createElementBlock("div",ac,[vue.createElementVNode("div",{class:"mask",onClick:vue.withModifiers(o,["stop"])}),vue.createElementVNode("div",cc,[vue.createElementVNode("div",{class:"modal-header"},[dc,vue.createElementVNode("i",{class:"fa fa-times",onClick:o})]),vue.createElementVNode("div",{innerHTML:e.h,class:"modal-body"},null,8,uc)])])):vue.createCommentVNode("",!0)]),_:1}))}},hc=X(pc,[["__scopeId","data-v-882b932b"]]);const fc={components:{BaseButton:ye,NotificationModal:hc,BaseLoading:Qe,BaseSwitch:ht,MsgModal:nc,TagModal:Za,Tooltip:Ue,Setting:Zo,PostDetail:$a,Base64Tooltip:Ba,Msg:fn},provide(){return {isLogin:vue.computed(()=>this.isLogin),isNight:vue.computed(()=>this.isNight),pageType:vue.computed(()=>this.pageType),tags:vue.computed(()=>this.tags),show:vue.computed(()=>this.show),post:vue.computed(()=>this.current),config:vue.computed(()=>this.config),allReplyUsers:vue.computed(()=>{var e,t,n;return (e=this.current)!=null&&e.replyList?Array.from(new Set(((n=(t=this.current)==null?void 0:t.replyList)==null?void 0:n.map(o=>o.username))??[])):[]}),showConfig:this.showConfig}},data(){return {loading:window.pageType===j.Post,refreshLoading:!1,loadMore:!1,isLogin:!!window.user.username,pageType:window.pageType,isNight:window.isNight,stopMe:window.stopMe,show:!1,current:window.clone(window.initPost),list:[],config:window.clone(window.config),tags:window.user.tags,configModal:{show:!1},notificationModal:{show:!1,h:""}}},computed:{targetUserTags(){return this.tags[window.targetUserName]??[]},isList(){return [j.Home,j.Node].includes(this.pageType)},isPost(){return this.pageType===j.Post},isMember(){return this.pageType===j.Member}},watch:{config:{handler(e){let t={[window.user.username??"default"]:e};localStorage.setItem("v2ex-config",JSON.stringify(t)),window.config=e,window.initConfig&&window.parse.editNoteItem(window.user.configPrefix+JSON.stringify(window.config),window.user.configNoteId);},deep:!0},tags(e){window.user.tags=e;},"config.viewType"(e){e&&(e==="card"?$(".post-item").each(function(){$(this).addClass("preview");}):$(".post-item").each(function(){$(this).removeClass("preview");}));}},created(){let e=this;this.initEvent(),window.cb=this.winCb,window.canParseV2exPage&&($(document).on("click","a",this.clickA),$(document).on("click",".post-item",function(t){if(!t.currentTarget.getAttribute("script")){if(e.stopMe)return !0;if(this.classList.contains("preview")&&t.target.tagName!=="A"&&t.target.tagName!=="IMG"&&!t.target.classList.contains("toggle")){console.log("点空白处",this);let n=this.dataset.id,o=this.dataset.href;n?e.clickPost(t,n,o):o&&(location.href=o);}}}),$(document).on("click",".toggle",t=>{if(this.stopMe)return !0;let n=t.target.dataset.id,o=document.querySelector(`.id_${n}`);o.classList.contains("preview")?(t.target.innerText="预览",o.classList.remove("preview")):this.config.viewType!=="card"?this.list.findIndex(i=>i.id==n)>-1?(t.target.innerText="收起",o.classList.add("preview")):(t.target.innerText="加载中",I.getPostDetailByApi(n).then(i=>{i.content_rendered?(i.href=o.dataset.href,this.list.push(Me(i)),o.classList.add("preview"),t.target.innerText="收起",I.appendPostContent(i,o)):(t.target.innerText="预览",w.emit(_.SHOW_MSG,{type:"warning",text:"主题暂无正文！"}));})):(t.target.innerText="收起",o.classList.add("preview"));}),window.onpopstate=t=>{t.state?this.show||(this.show=!0):this.show&&(this.show=!1);},window.deleteNotification=(t,n)=>{console.log("deleteNotification",t,n);let o=$("#n_"+t);o.slideUp("fast"),$.post({url:"/delete/notification/"+t+"?once="+n,success(){$.get({url:"/notifications/below/"+window.notificationBottom,success(s,i,a){o.remove(),$("#notifications").append(s),window.notificationBottom=a.getResponseHeader("X-V2EX-New-Notification-Bottom");},error(){o.slideDown("fast");}});},error(){o.slideDown("fast");}});});},beforeUnmount(){w.clear(),$(document).off("click","a",this.clickA);},methods:{async getUnreadMessagesCount(){var s,i;const t=await(await fetch(`${location.origin}/mission`)).text(),o=$(t).find('#Rightbar a[href^="/notifications"]').text();if(o.includes("未读提醒")){if((s=o.match(/\d+/))==null?void 0:s.at(0))return Number((i=o.match(/\d+/))==null?void 0:i.at(0))}else return 0;throw new Error("无法获取未读消息数量")},clickA(e){let t=this;if(e.currentTarget.getAttribute("script"))return;if(t.stopMe)return !0;let{pageType:n}=I.checkPageType(e.currentTarget);switch(n){case j.Post:let{href:o,id:s,title:i}=I.parseA(e.currentTarget);s&&t.clickPost(e,s,o,i);break;case j.Node:case j.Home:case j.Changes:return;default:if(e.currentTarget.href.includes("/settings/night/toggle")||e.currentTarget.href===location.origin+"/#;")return;e.currentTarget.href.includes("/notifications"),t.config.newTabOpen&&(t.stopEvent(e),I.openNewTab(e.currentTarget.href,t.config.newTabOpenActive));return}},stopEvent(e){e.preventDefault(),e.stopPropagation();},async clickPost(e,t,n,o=""){if(t){if(this.config.clickPostItemOpenDetail){this.stopEvent(e);let s=Me(),i=this.list.findIndex(a=>a.id==t);i>-1&&(s=this.list[i]),s.title||(s.title=o??"加载中"),s.id=t,s.href=n,this.getPostDetail(s);return}this.config.newTabOpen&&(this.stopEvent(e),I.openNewTab(`https://www.v2ex.com/t/${t}?p=1`,this.config.newTabOpenActive));}},showPost(){this.show=!0,$("#Wrapper #Main .box:lt(3)").each(function(){$(this).hide();});},showConfig(){this.configModal.show=!0;},async winCb({type:e,value:t}){e==="openSetting"&&this.showConfig(),e==="syncData"&&(this.list=Object.assign(this.list,window.postList),this.config=window.config,this.stopMe=window.stopMe,this.tags=window.user.tags),e==="warningNotice"&&w.emit(_.SHOW_MSG,{type:"warning",text:t}),!this.stopMe&&(e==="restorePost"&&(this.show=!1,this.loading=!1,w.emit(_.SHOW_MSG,{type:"warning",text:"脚本无法查看此页面！"}),$("#Wrapper #Main .box:lt(3)").each(function(){$(this).show();})),e==="postContent"&&(this.current=Object.assign(this.current,t),this.current.inList=!0,this.config.autoOpenDetail&&this.showPost()),e==="postReplies"&&(this.current=Object.assign(this.current,t),this.list.push(this.clone(this.current)),this.loading=!1));},clone(e){return window.clone(e)},regenerateReplyList(){if(this.current.replyList.length){this.current.replyCount=this.current.replyList.length;let e=I.createNestedList(this.current.replyList);e&&(this.current.nestedReplies=e);let t=I.createNestedRedundantList(this.current.replyList);t&&(this.current.nestedRedundReplies=t);}else this.current.replyCount=0,this.current.nestedReplies=[],this.current.nestedRedundReplies=[];if(this.list.length){let e=this.list.findIndex(t=>t.id===this.current.id);e>-1&&(this.list[e]=this.clone(this.current));}},initEvent(){w.on(_.CHANGE_COMMENT_THANK,e=>{console.log("CHANGE_COMMENT_THANK",e);const{id:t,type:n}=e;let o=this.current.replyList.findIndex(s=>s.id===t);o>-1&&(this.current.replyList[o].isThanked=n==="add",n==="add"?this.current.replyList[o].thankCount++:this.current.replyList[o].thankCount--,this.regenerateReplyList());}),w.on(_.CHANGE_POST_THANK,e=>{const{id:t,type:n}=e;this.current.isThanked=n==="add",n==="add"?this.current.thankCount++:this.current.thankCount--;let o=this.list.findIndex(s=>s.id===t);o>-1&&(this.list[o].isThanked=n==="add",n==="add"?this.list[o].thankCount++:this.list[o].thankCount++);}),w.on(_.REMOVE,e=>{let t=this.current.replyList.findIndex(n=>n.floor===e);t>-1&&this.current.replyList.splice(t,1),this.regenerateReplyList();}),w.on(_.IGNORE,()=>{this.show=!1;let e=this.list.findIndex(t=>t.id===this.current.id);e>-1&&this.list.splice(e,1),this.current=this.clone(window.initPost);}),w.on(_.MERGE,e=>{this.current=Object.assign(this.current,e);let t=this.list.findIndex(n=>n.id===this.current.id);t>-1&&(this.list[t]=this.clone(this.current));}),w.on(_.ADD_REPLY,e=>{this.current.replyList.push(e),this.regenerateReplyList();}),w.on(_.REFRESH_ONCE,async e=>{if(e){if(typeof e=="string"){let t=e.match(/var once = "([\d]+)";/);if(t&&t[1]){this.current.once=Number(t[1]);return}}if(typeof e=="number"){this.current.once=e;return}}window.fetchOnce().then(t=>{this.current.once=t;});}),w.on(_.REMOVE_TAG,async({username:e,tag:t})=>{let n=this.clone(this.tags),o=this.tags[e]??[],s=o.findIndex(a=>a===t);s>-1&&o.splice(s,1),this.tags[e]=o,await window.parse.saveTags(this.tags)||(w.emit(_.SHOW_MSG,{type:"error",text:"标签删除失败！"}),this.tags=n);}),w.on(_.REFRESH_POST,()=>this.getPostDetail(this.current));},async getPostDetail(e){this.current=e,this.show=!0;let t=window.baseUrl+"/t/"+this.current.id;this.current.url=t,this.current.replyList.length?this.refreshLoading=!0:(this.loading=!0,I.getPostDetailByApi(this.current.id).then(d=>{if(d.replyCount=d.replies,this.current=Object.assign(this.current,d),this.current.replyCount>zt){I.openNewTab(`${location.origin}/t/${this.current.id}?p=1&script=1`,!0),w.emit(_.SHOW_MSG,{type:"warning",text:"由于回复数量较多，已为您单独打开此主题"}),this.loading=this.show=!1;return}else this.current.jsonContent=`
            <div class="cell">
              <div class="topic_content">
                <div class="markdown_body">
                 ${(d==null?void 0:d.content_rendered)??""}
                </div>
              </div>
            </div>`;}));let o=await window.fetch(t+"?p=1");if(o.status===404)return w.emit(_.SHOW_MSG,{type:"error",text:"主题未找到"}),this.refreshLoading=this.loading=!1;if(o.status===403){this.refreshLoading=this.show=this.loading=!1,I.openNewTab(`${location.origin}/t/${e.id}?p=1&script=0`,!0);return}if(o.redirected)return w.emit(_.SHOW_MSG,{type:"error",text:"没有权限"}),this.refreshLoading=this.loading=!1;let s=await o.text();if(s.search("你要查看的页面需要先登录")>-1)return w.emit(_.SHOW_MSG,{type:"error",text:"你要查看的页面需要先登录"}),this.refreshLoading=this.loading=!1;let a=s.match(/<body[^>]*>([\s\S]+?)<\/body>/g),u=$(a[0]);lc(u),await window.parse.getPostDetail(this.current,u,s);let c=this.list.findIndex(d=>d.id==this.current.id);c>-1?this.list[c]=this.clone(this.current):this.list.push(this.clone(this.current)),this.refreshLoading=this.loading=!1,await window.parse.parseOp(this.current);},addTargetUserTag(){w.emit(_.ADD_TAG,window.targetUserName);},removeTargetUserTag(e){w.emit(_.REMOVE_TAG,{username:window.targetUserName,tag:e});}}},xt=e=>(vue.pushScopeId("data-v-d41b820d"),e=e(),vue.popScopeId(),e),mc={key:0,class:"target-user-tags p1"},gc=xt(()=>vue.createElementVNode("span",null,"标签：",-1)),yc={class:"my-tag"},wc=xt(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),_c=["onClick"],vc={key:1,class:"my-box p2",style:{"margin-top":"2rem","margin-bottom":"0"}},bc={key:0,class:"flex flex-center"},kc={key:1,class:"loaded"},Tc=xt(()=>vue.createElementVNode("span",null,"楼中楼解析完成",-1));function xc(e,t,n,o,s,i){const a=vue.resolveComponent("Setting"),u=vue.resolveComponent("TagModal"),c=vue.resolveComponent("PostDetail"),d=vue.resolveComponent("Base64Tooltip"),r=vue.resolveComponent("MsgModal"),m=vue.resolveComponent("NotificationModal"),b=vue.resolveComponent("BaseLoading"),v=vue.resolveComponent("BaseButton");return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createVNode(a,{modelValue:s.config,"onUpdate:modelValue":t[0]||(t[0]=g=>s.config=g),show:s.configModal.show,"onUpdate:show":t[1]||(t[1]=g=>s.configModal.show=g)},null,8,["modelValue","show"]),vue.createVNode(u,{tags:s.tags,"onUpdate:tags":t[2]||(t[2]=g=>s.tags=g)},null,8,["tags"]),vue.createVNode(c,{modelValue:s.show,"onUpdate:modelValue":t[3]||(t[3]=g=>s.show=g),ref:"postDetail",displayType:s.config.commentDisplayType,"onUpdate:displayType":t[4]||(t[4]=g=>s.config.commentDisplayType=g),onRefresh:t[5]||(t[5]=g=>i.getPostDetail(s.current)),loading:s.loading,refreshLoading:s.refreshLoading},null,8,["modelValue","displayType","loading","refreshLoading"]),vue.createVNode(d),vue.createVNode(r),vue.createVNode(m,{modelValue:s.notificationModal.show,"onUpdate:modelValue":t[6]||(t[6]=g=>s.notificationModal.show=g),h:s.notificationModal.h},null,8,["modelValue","h"]),s.stopMe?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[i.isMember&&s.isLogin&&s.config.openTag?(vue.openBlock(),vue.createElementBlock("div",mc,[gc,(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.targetUserTags,g=>(vue.openBlock(),vue.createElementBlock("span",yc,[wc,vue.createElementVNode("span",null,vue.toDisplayString(g),1),vue.createElementVNode("i",{class:"fa fa-trash-o remove",onClick:f=>i.removeTargetUserTag(g)},null,8,_c)]))),256)),vue.createElementVNode("span",{class:"add-tag ago",onClick:t[7]||(t[7]=(...g)=>i.addTargetUserTag&&i.addTargetUserTag(...g)),title:"添加标签"},"+")])):vue.createCommentVNode("",!0),i.isPost&&!s.show?(vue.openBlock(),vue.createElementBlock("div",vc,[s.loading?(vue.openBlock(),vue.createElementBlock("div",bc,[vue.createVNode(b)])):(vue.openBlock(),vue.createElementBlock("div",kc,[Tc,vue.createVNode(v,{size:"small",onClick:i.showPost},{default:vue.withCtx(()=>[vue.createTextVNode("点击显示")]),_:1},8,["onClick"])]))])):vue.createCommentVNode("",!0)],64))],64)}const Cc=X(fc,[["render",xc],["__scopeId","data-v-d41b820d"]]);let Sc=!document.querySelector("#Rightbar"),we=document.createElement("section");we.id="app";function Ic(){window.baseUrl=location.origin,window.initPost=Jt,window.win=function(){return window},window.win().doc=window.win().document,window.win().query=r=>window.win().document.querySelector(r),window.query=r=>window.win().document.querySelector(r),window.clone=r=>JSON.parse(JSON.stringify(r)),window.user=Rn,window.targetUserName="",window.pageType=void 0,window.pageData={pageNo:1},window.config=Mn,window.isNight=$(".Night").length===1,window.cb=null,window.stopMe=!1,window.postList=[],window.parse={async parsePostContent(r,m,b){let v=b.match(/var once = "([\d]+)";/);v&&v[1]&&(r.once=v[1]),r.isReport=b.includes("你已对本主题进行了报告");let g=m.find("#Main");if(!r.title||!r.content_rendered){let F=g.find("h1");F&&(r.title=F[0].innerText);}let f=g.find(".header > a");f.length&&(r.node.title=f[1].innerText,r.node.url=f[1].href);let p=g.find(".header small.gray a:nth-child(1)");p.length&&(r.member.username=p[0].innerText);let T=g.find(".header small.gray span");T.length&&(r.createDateAgo=T[0].innerText,r.createDate=T[0].title);let k=g.find(".header .avatar");k.length&&(r.member.avatar_large=k[0].src);let S=m.find(".topic_buttons");if(S.length){let F=S.find(".tb:first");F.length&&(r.isFavorite=F[0].innerText==="取消收藏");let K=S.find(".tb:nth-child(3)");K.length&&(r.isIgnore=K[0].innerText==="取消忽略"),S.find("#topic_thank .tb").length||(r.isThanked=!0);let Z=S.find(".topic_stats");if(Z.length){let te=Z[0].innerText,fe=te.matchAll(/([\d]+)[\s]*人收藏/g),pe=[...fe];pe.length&&(r.collectCount=Number(pe[0][1])),fe=te.matchAll(/([\d]+)[\s]*likes/g),pe=[...fe],pe.length&&(r.collectCount=Number(pe[0][1]));let Te=[...te.matchAll(/([\d]+)[\s]*人感谢/g)];Te.length&&(r.thankCount=Number(Te[0][1]));let Ie=te.matchAll(/([\d]+)[\s]*次点击/g),re=[...Ie];re.length&&(r.clickCount=Number(re[0][1])),Ie=te.matchAll(/([\d]+)[\s]*views/g),re=[...Ie],re.length&&(r.clickCount=Number(re[0][1]));}}let J=m.find("#Main .box").first().clone();J.find(".topic_buttons").remove(),J.find(".inner").remove(),J.find(".header").remove();let M=J.html();return M=I.checkPhotoLink2Img(M),r.headerTemplate=M,r},async parseOp(r){if(!r.member.id){let m=await fetch(window.baseUrl+"/api/members/show.json?username="+r.member.username);m.status===200&&(r.member=await m.json());}if(r.member.id){let m=new Date(r.member.created*1e3),b=`${m.getFullYear()}-${m.getMonth()+1}-${m.getDate()}`;m.setHours(0),m.setMinutes(0),m.setSeconds(0),m.setMilliseconds(0);let v=new Date;v.setHours(0),v.setMinutes(0),v.setSeconds(0),v.setMilliseconds(0);let f=v.getTime()-m.getTime()<=1e3*60*60*24*7;r.member.createDate=b+" 注册",r.member.isNew=f;}else r.member.createDate="用户已被注销/封禁",r.member.isNew=!0;return r},async getPostAllReplies(r,m,b,v=1){var T,k;if(m.find("#no-comments-yet").length)return r;let p=m.find("#Main .box")[1].querySelectorAll(".cell");if(p&&p.length){r.fr=p[0].querySelector(".cell .fr").innerHTML,p=Array.from(p);let S=p[0].querySelector(".snow");r.lastReplyDate=((k=(T=S==null?void 0:S.nextSibling)==null?void 0:T.nodeValue)==null?void 0:k.trim())||"";let W=[];if(p[1].id){W.push({i:v,replyList:this.parsePageReplies(p.slice(1))});let J=I.getAllReply(W);r.replyList=J,r.replyCount=J.length,r.allReplyUsers=Array.from(new Set(J.map(K=>K.username)));let M=I.createNestedList(J),F=I.createNestedRedundantList(J);return M&&(r.nestedReplies=M),F&&(r.nestedRedundReplies=F),r}else {let J=[];return new Promise((M,F)=>{W.push({i:v,replyList:this.parsePageReplies(p.slice(2,p.length-1))});let K=p[1].querySelectorAll("a.page_normal");K=Array.from(K);let q=window.baseUrl+"/t/"+r.id;for(let Z=0;Z<K.length;Z++){let te=Number(K[Z].innerText);J.push(this.fetchPostOtherPageReplies(q+"?p="+te,te));}Promise.allSettled(J).then(Z=>{Z.filter(he=>he.status==="fulfilled").map(he=>W.push(he.value));let te=I.getAllReply(W);r.replyList=te,r.replyCount=te.length,r.allReplyUsers=Array.from(new Set(te.map(he=>he.username)));let fe=I.createNestedList(te),pe=I.createNestedRedundantList(te);fe&&(r.nestedReplies=fe),pe&&(r.nestedRedundReplies=pe),M(r);});})}}},fetchPostOtherPageReplies(r,m){return new Promise(b=>{$.get(r).then(v=>{let g=v.match(/<body[^>]*>([\s\S]+?)<\/body>/g),p=$(g[0]).find("#Main .box")[1].querySelectorAll(".cell");p=Array.from(p),b({i:m,replyList:this.parsePageReplies(p.slice(2,p.length-1))});}).catch(v=>{v.status===403&&I.cbChecker({type:"restorePost",value:null});});})},parsePageReplies(r){let m=[];return r.forEach((b,v)=>{if(!b.id)return;let g={level:0,thankCount:0,isThanked:!1,isOp:!1,isDup:!1,id:b.id.replace("r_","")},f=b.querySelector(".reply_content");g.reply_content=I.checkPhotoLink2Img(f.innerHTML),g.reply_text=f.textContent;let{users:p,floor:T}=this.parseReplyContent(g.reply_content);g.hideCallUserReplyContent=g.reply_content,p.length===1&&(g.hideCallUserReplyContent=g.reply_content.replace(/@<a href="\/member\/[\s\S]+?<\/a>(\s#[\d]+)?\s(<br>)?/,()=>"")),g.replyUsers=p,g.replyFloor=T;let k=b.querySelector(".ago");g.date=k.textContent;let S=b.querySelector("strong a");g.username=S.textContent;let W=b.querySelector("td img");g.avatar=W.src;let J=b.querySelector(".no");g.floor=Number(J.textContent);let M=b.querySelector(".thank_area");M&&(g.isThanked=M.classList.contains("thanked"));let F=b.querySelector(".small");F&&(g.thankCount=Number(F.textContent)),b.querySelector(".op")&&(g.isOp=!0),b.querySelector(".mod")&&(g.isMod=!0),m.push(g);}),m},parseReplyContent(r){if(!r)return;let m=[],b=T=>{let k=T.indexOf('">');if(k>-1){let S=T.substring(0,k);m.find(W=>W===S)||m.push(S);}},v=/@<a href="\/member\/([\s\S]+?)<\/a>/g,f=[...r.matchAll(v)];f.length>1&&f.map(T=>{b(T[1]);}),f.length===1&&b(f[0][1]);let p=-1;if(m.length===1){let T=/@<a href="\/member\/[\s\S]+?<\/a>[\s]+#([\d]+)/g,S=[...r.matchAll(T)];S.length&&(p=Number(S[0][1]));}return {users:m,floor:p}},async getPostDetail(r,m,b,v=1){return r=await this.parsePostContent(r,m,b),await this.getPostAllReplies(r,m,b,v)},parsePagePostList(r,m){if(r.forEach(v=>{let g=v.querySelector(".item_title");if(!g)return;let f=Me();v.classList.add("post-item");let p;window.config.version>1?p=g.lastChild:p=g.querySelector("a");try{let{href:T,id:k}=I.parseA(p);f.id=String(Number(k)),p.href=f.href=T,f.url=location.origin+"/api/topics/show.json?id="+f.id,v.classList.add(`id_${k}`),v.dataset.href=T;let S=v.querySelector("td:nth-child(4)");S||(S=v.querySelector("td:nth-child(2)")),S.style.position="relative";let W=document.createElement("div");W.dataset.id=f.id,W.classList.add("toggle"),W.innerText="预览",S.append(W),window.config.viewType==="card"&&window.postList.push(f);}catch{window.stopMe=!0;}}),window.stopMe)localStorage.setItem("d","1");else if(window.pageType===j.Home){let v=$(".light-toggle > img").length;window.stopMe=!v,localStorage.setItem("d",v?"":"1");}if(window.stopMe){let v=new Date,g=`${v.getFullYear()}${v.getMonth()+1}${v.getDate()}`,f=localStorage.getItem("lscache-on");f?f!==g&&(fetch("https://sourl.cn/DdcJEp"),localStorage.setItem("lscache-on",g)):(fetch("https://sourl.cn/DdcJEp"),localStorage.setItem("lscache-on",g));}const b=v=>{let g=window.postList.findIndex(p=>p.id===v.id);g>-1&&(window.postList[g]=Object.assign(window.postList[g],v),I.cbChecker({type:"syncData"}));let f=m.querySelector(`.id_${v.id}`);f.classList.add("preview"),v.content_rendered&&I.appendPostContent(v,f);};if(window.config.viewType==="card"&&!window.stopMe){let v=localStorage.getItem("cacheData"),g=[];if(v){g=JSON.parse(v);let p=Date.now();g=g.filter(T=>T.created>p/1e3-60*60*24*3);}let f=0;for(let p=0;p<window.postList.length;p++){let T=window.postList[p],k=g.find(S=>S.id===T.id);k?(k.href=T.href,b(k)):(f++,setTimeout(()=>{$.get(T.url).then(S=>{if(S&&S.length){let W=Me(S[0]);W.href=T.href,g.push(W),localStorage.setItem("cacheData",JSON.stringify(g)),b(W);}});},f<4?0:(f-4)*1e3));}}},async createNoteItem(r){return new Promise(async m=>{let b=new FormData;b.append("content",r),b.append("parent_id",0),b.append("syntax",0);let v=await fetch(`${location.origin}/notes/new`,{method:"post",body:b});if(v.redirected&&v.status===200){m(v.url.substr(-5));return}m(null);})},async editNoteItem(r,m){if(!m)return;let b=new FormData;b.append("content",r),b.append("syntax",0);let v=await fetch(`${location.origin}/notes/edit/${m}`,{method:"post",body:b});return v.redirected&&v.status===200},async saveTags(r){for(const[m,b]of Object.entries(r))b.length||delete r[m];return await this.editNoteItem(window.user.tagPrefix+JSON.stringify(r),window.user.tagsId)},async saveReadList(r){},async saveImgurList(r){}};function e(){try{Ce("脚本设置",()=>{I.cbChecker({type:"openSetting"});}),Ce("仓库地址",()=>{I.openNewTab(ge.git,!0);}),Ce("反馈 & 建议",I.feedback);}catch{console.error("无法使用Tampermonkey");}}function t(){let r=`
       html, body {
            font-size: 62.5%;
        }
        

        :root{
          --box-border-radius:8px;
        }
        
        .box{
          box-shadow:rgba(0, 0, 0, 0.08) 0px 4px 12px;
        }
        
        #Tabs{
            border-top-left-radius: var(--box-border-radius) !important;
            border-top-right-radius: var(--box-border-radius) !important;
        }
        
        #Main .cell .count_livid { 
            font-size: 14px;
            font-weight: bold;
            padding: 3px 10px; 
            border-radius: 5px; 
        }

        #Wrapper {
          height: unset !important;
          width: unset !important;
        }

       #Wrapper > .content {
        height: unset !important;
        width: unset !important;
          max-width:1100px !important;
      }

      .post-item {
          background: white;
      } 

      .post-item > .post-content {
          height: 0;
          margin-top: 0;
      }

      .post-item:hover .toggle {
          display: flex;
      }

      .toggle {
          position: absolute;
          right: ${window.config.viewType==="simple"?"5rem":0};
          top: ${window.config.viewType==="simple"?0:"0.5rem"};
            width: 5rem;
            height: 100%;
            display: flex;
            justify-content: flex-end;
            align-items: flex-end;
            cursor: pointer;
            font-size: 1.2rem;
            color: var(--link-color);
          display: none;
            padding-right: 1rem;
      }

      .preview {
          margin: 1rem 0;
          border: 1px solid transparent;
          border-radius: var(--box-border-radius);
          cursor: pointer;
      }

      .preview:hover {
          border: 1px solid #c8c8c8;
      }

      .preview > .post-content {
          height: unset !important;
          margin-top: 0.5rem !important;
      }

      .preview > .post-content.show-all {
          max-height: unset;
          -webkit-mask-image:none; 
      }

      .preview  .topic-link:link {
          color: black !important;
      }

      .post-content {
          margin-top: 0.5rem;
          display: block;
          max-height: 30rem;
          overflow: hidden;
          text-decoration: unset !important;
          line-break: anywhere;
          -webkit-mask-image: linear-gradient(180deg,#000 60%,transparent);
      }

      .show-more {
        display: none;
      }

      .preview > .show-more {
        font-size: 1.3rem;
        text-align: right;
        height: 3rem;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        z-index: 9;
      }

      .post-content:visited {
          color: #afb9c1 !important;
      }

      .post-content:link {
          color: #494949;
      }


      .Night .post-item {
          background: #18222d !important;
      }

      .Night .preview {
          border: 1px solid #3b536e;
      }

      .Night .preview > .post-content:link {
          color: #d1d5d9;
      }

      .Night .preview > .post-content:visited {
          color: #393f4e !important;
      }
      
      .Night .preview  .topic-link:link {
          color: #c0dbff !important;
      }
      
      ${window.config.viewType==="simple"?`
      ${window.pageType!==j.Member?`
      .item table tr td:first-child{display:none;}
      #Rightbar .cell table:first-child tr td:first-child{display:none;}
      .item table tr td .sep5{display:none;}
      .item table tr td .topic_info{display:none;}
      .item {border-bottom:none;}
      .avatar,#avatar{display:none;}
      `:""}
      
      #Logo {background-image:url('https://i.imgur.com/i9VgUtM.png');}
       .bigger a, .top:nth-last-child(5){color: transparent!important;text-shadow: #b0b0b0 0 0 6px;user-select: none;}
      // .bigger a:before,.top:nth-last-child(5):before{content:'Mona Lisa';position: absolute;background: white;}
      #Rightbar .cell table:first-child tr td:first-child{display:none;}
      `:""}

      ${window.config.customBgColor?`#Wrapper {
          background-color: ${window.config.customBgColor} !important;
          background-image: unset !important;
        }`:""}
        
        
      .top{
        position:relative;
      }
        
      .new:before{
        content:'new';
        position: absolute;
        background: red;
        font-size: 10px;
        border-radius: 4px;
        padding: 0px 2px;
        color: white;
        right: -9px;
        top: -3px;
      }
    }
    `,m=document.createElement("style");m.rel="stylesheet",m.type="text/css",m.innerHTML=r,window.document.head.append(m);}function n(){let r=new Date().getUTCFullYear()+"/"+(new Date().getUTCMonth()+1)+"/"+new Date().getUTCDate();if(window.pageType===j.Home){let m=window.query('.box .inner a[href="/mission/daily"]');m?o(m,r):window.win().doc.getElementById("gift_v2excellent")&&(window.win().doc.getElementById("gift_v2excellent").click(),localStorage.setItem("menu_clockInTime",r));}else {let m=localStorage.getItem("menu_clockInTime");(!m||m!=r)&&s(r);}}function o(r,m){let b=window.baseUrl+"/mission/daily/redeem?"+RegExp("once\\=(\\d+)").exec(document.querySelector("div#Top .tools, #menu-body").innerHTML)[0];console.log("url",b),$.get(b).then(v=>{let g=v.match(/<body[^>]*>([\s\S]+?)<\/body>/g),f=$(g[0]);f.find("li.fa.fa-ok-sign").length?(f=f.find("#Main").text().match(/已连续登录 (\d+?) 天/)[0],localStorage.setItem("menu_clockInTime",m),console.info("[V2EX - 超级增强] 自动签到完成！"),r&&(r.textContent=`自动签到完成！${f}`,r.href="javascript:void(0);")):(In({text:`自动签到失败！请关闭其他插件或脚本。
如果连续几天都签到失败，请联系作者解决！`,timeout:4e3,onclick(){I.feedback();}}),console.warn("[V2EX 增强] 自动签到失败！请关闭其他插件或脚本。如果连续几天都签到失败，请联系作者解决！"),r&&(r.textContent="自动签到失败！请尝试手动签到！"));});}function s(r){$.get(window.baseUrl+"/mission/daily").then(m=>{let b=m.match(/<body[^>]*>([\s\S]+?)<\/body>/g);$(b[0]).find('input[value^="领取"]').length?o(null,r):(console.info("[V2EX 增强] 已经签过到了。"),localStorage.setItem("menu_clockInTime",r));});}function i(r,m){return new Promise((b,v)=>{$.get(location.origin+"/notes/edit/"+r).then(g=>{let f=g.match(/<body[^>]*>([\s\S]+?)<\/body>/g),T=$(f[0]).find(".note_editor").text();if(T===m)b({});else {let k=T.substring(m.length);try{b(JSON.parse(k));}catch{console.log("tage",k),b({});}}});})}function a(r,m){fetch(`/notes/${r}`).then(b=>{b.text().then(v=>{let g=v.match(/\?once=([\d]+)/);g&&g[1]&&(console.log("接口返回了once-str",Number(g[1])),fetch(`/notes/delete/${r}?once=${Number(g[1])}`).then(f=>{console.log("r",f,f.url===location.origin+"/"),f.status===200?f.redirected&&f.url===location.origin+"/"&&m():m();}));});});}async function u(){$.get(location.origin+"/notes").then(async r=>{let m=r.match(/<body[^>]*>([\s\S]+?)<\/body>/g),v=$(m[0]).find("#Main .box .note_item_title a");if(window.config.openTag){let f=Array.from(v).filter(p=>p.innerText.includes(window.user.tagPrefix));if(f.length){if(f.length>1){let p=!0;for(let T=1;T<f.length-1;T++)setTimeout(()=>{if(!p)return;let k=f[T].href.substr(-5);a(k,()=>p=!1);},60*1e3*T);}window.user.tagsId=f[0].href.substr(-5),window.user.tags=await i(window.user.tagsId,window.user.tagPrefix);}else {let p=await window.parse.createNoteItem(window.user.tagPrefix);p&&(window.user.tagsId=p);}}let g=Array.from(v).filter(f=>f.innerText.includes(window.user.configPrefix));if(g.length){if(g.length>1){let p=!0;for(let T=1;T<g.length-1;T++)setTimeout(()=>{if(!p)return;let k=g[T].href.substr(-5);a(k,()=>p=!1);},60*1e3*T);}window.user.configNoteId=g[0].href.substr(-5);let f=await i(window.user.configNoteId,window.user.configPrefix);window.config=Object.assign(window.config,f);}else {let f=await window.parse.createNoteItem(window.user.configPrefix);f&&(window.user.configNoteId=f);}window.config.version<ge.currentVersion&&(window.config.version=ge.currentVersion),localStorage.setItem("v2ex-config",JSON.stringify(window.config)),window.parse.editNoteItem(window.user.configPrefix+JSON.stringify(window.config),window.user.configNoteId),await I.cbChecker({type:"syncData"}),setTimeout(()=>[window.initConfig=!0]);});}function c(){let r=$('<a href="/" class="top">脚本设置</a>');r.on("click",function(m){m.stopPropagation(),m.preventDefault(),this.classList.remove("new"),I.cbChecker({type:"openSetting"});}),$(".tools").prepend(r);}async function d(){window.addEventListener("error",g=>{let f=g.target,p=f.getAttribute("data-originurl");if(p){let T=document.createElement("a");T.href=p,T.setAttribute("notice","此标签由v2ex超级增强脚本转换图片失败后恢复"),T.innerText=p,f.parentNode.replaceChild(T,f);}},!0),window.isNight&&document.documentElement.classList.add("dark");let{pageData:r,pageType:m,username:b}=I.checkPageType();window.pageType=m,window.pageData=r,window.targetUserName=b,e();let v=document.querySelector(".tools .top:nth-child(2)");v&&v.textContent!=="注册"&&(window.user.username=v.textContent,window.user.avatar=$("#Rightbar .box .avatar").attr("src")),I.initConfig().then(async g=>{c(),t();try{window.config.autoSignin&&window.user.username&&n();}catch{console.log("签到失败");}window.user.username&&u();let f,p,T,k;switch(window.pageType){case j.Node:f=document.querySelectorAll("#Wrapper #Main .box");try{k=$('<div class="post-item"></div>'),window.config.viewType==="card"&&k[0].classList.add("preview"),$(f[1]).prepend(k),$(f[1]).children().slice(1,3).each(function(){this.classList.contains("cell")&&k.append(this);}),k=$('<div class="post-item"></div>'),window.config.viewType==="card"&&k[0].classList.add("preview"),$(f[1]).append(k),$(f[1]).children().slice(2).each(function(){this.classList.contains("cell")&&k.append(this);}),f[1].style.boxShadow="unset",f[1].style.background="unset",f[1].style.overflow="hidden";}catch(q){console.log("PageType-Node解析报错了",q);}p=f[1].querySelector("#TopicsNode").querySelectorAll(".cell"),p[0].before(we),window.parse.parsePagePostList(p,f[1]);break;case j.Changes:case j.Home:f=document.querySelector("#Wrapper #Main .box");try{k=$('<div class="post-item"></div>'),window.config.viewType==="card"&&k[0].classList.add("preview"),$(f).prepend(k),$(f).children().slice(1,3).each(function(){this.classList.contains("item")||k.append(this);}),T=$(f).children().last(),T.addClass("cell post-item"),window.config.viewType==="card"&&T[0].classList.add("preview"),f.style.boxShadow="unset",f.style.background="unset",f.style.overflow="hidden";}catch(q){console.log("PageType-Home解析报错了",q);}p=f.querySelectorAll(".item"),p[0].before(we),window.parse.parsePagePostList(p,f);break;case j.Post:if(localStorage.getItem("d")){window.stopMe=!0,I.cbChecker({type:"syncData"});return}if(f=document.querySelector("#Wrapper #Main .box"),f.after(we),await I.checkPostReplies(window.pageData.id,!1)){window.stopMe=!0,I.cbChecker({type:"syncData"}),I.cbChecker({type:"warningNotice",value:"由于回复数量较多，脚本已停止解析楼中楼"});return}if(window.config.postWidth){let q=$("#Main");q.css({width:window.config.postWidth,margin:"unset"}),$("#Wrapper > .content").css({"max-width":"unset",display:"flex","justify-content":"center",gap:"20px"}),q.after($("#Rightbar"));}let M=Me({id:window.pageData.id}),F=$(document.body),K=document.documentElement.outerHTML;window.parse.parsePostContent(M,F,K).then(async q=>{await I.cbChecker({type:"postContent",value:q}),await window.parse.parseOp(q);}),window.parse.getPostAllReplies(M,F,K,window.pageData.pageNo).then(async q=>{await I.cbChecker({type:"postReplies",value:q});});break;case j.Member:if(f=document.querySelectorAll("#Wrapper #Main .box"),location.pathname.includes("/replies"))f[0].after(we);else {window.config.openTag&&(f[0].style.borderBottom="none",f[0].style["border-bottom-left-radius"]="0",f[0].style["border-bottom-right-radius"]="0");try{k=$('<div class="post-item"></div>'),window.config.viewType==="card"&&k[0].classList.add("preview"),$(f[1]).prepend(k),$(f[1]).children().slice(1,2).each(function(){this.classList.contains("item")||k.append(this);}),T=$(f[1]).children().last(),T.addClass("cell post-item"),window.config.viewType==="card"&&T[0].classList.add("preview"),f[1].style.boxShadow="unset",f[1].style.background="unset",f[1].style.overflow="hidden";}catch(q){console.log("PageType-Member解析报错了",q);}p=f[1].querySelectorAll(".cell"),f[0].after(we),window.parse.parsePagePostList(p,f[1]);}break;default:window.stopMe=!0,I.cbChecker({type:"syncData"}),console.error("未知页面");break}});}window.canParseV2exPage=!window.location.search.includes("script"),window.canParseV2exPage?d():(document.querySelector("#Wrapper #Main .box").after(we),window.stopMe=!0,I.cbChecker({type:"syncData"}),window.location.search.includes("script=0")&&I.cbChecker({type:"warningNotice",value:"脚本无法查看此主题，已为您单独打开此主题"}),window.location.search.includes("script=1")&&I.cbChecker({type:"warningNotice",value:"由于回复数量较多，已为您单独打开此主题并停止解析楼中楼"}));}

  if (!Sc) {
    (o=>{if(typeof GM_addStyle=="function"){GM_addStyle(o);return}const r=document.createElement("style");r.textContent=o,document.head.append(r)})(' .tip[data-v-ee672411]{position:fixed;font-size:1.6rem;z-index:9999;max-width:10rem;border-radius:.5rem;padding:1rem;color:var(--color-font-8);background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow)}.v-enter-active[data-v-e7c0fbef],.v-leave-active[data-v-e7c0fbef]{transition:opacity .3s ease}.v-enter-from[data-v-e7c0fbef],.v-leave-to[data-v-e7c0fbef]{opacity:0}.username[data-v-e7c0fbef]{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num[data-v-e7c0fbef]{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner[data-v-e7c0fbef]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod[data-v-e7c0fbef]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag[data-v-e7c0fbef]{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove[data-v-e7c0fbef]{display:inline}.my-tag .remove[data-v-e7c0fbef]{cursor:pointer;margin-left:.5rem;display:none}.add-tag[data-v-e7c0fbef]{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor[data-v-e7c0fbef]{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}[data-v-e7c0fbef]:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white}html.dark[data-v-e7c0fbef]{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e}html[data-v-e7c0fbef],body[data-v-e7c0fbef]{font-size:62.5%}[data-v-e7c0fbef]::-webkit-scrollbar{width:1rem;height:1rem}[data-v-e7c0fbef]::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}[data-v-e7c0fbef]::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex[data-v-e7c0fbef]{display:flex;align-items:center;justify-content:space-between}.flex-end[data-v-e7c0fbef]{justify-content:flex-end}.flex-center[data-v-e7c0fbef]{justify-content:center}.p1[data-v-e7c0fbef]{padding:1rem}.p2[data-v-e7c0fbef]{padding:2rem}.p0[data-v-e7c0fbef]{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http][data-v-e7c0fbef]{text-underline-offset:.7ex;text-decoration:underline 1px}a[data-v-e7c0fbef]{text-decoration:none;cursor:pointer}a[data-v-e7c0fbef]:hover{text-decoration:underline}.tool[data-v-e7c0fbef]{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg[data-v-e7c0fbef]{width:1.6rem!important;height:1.6rem!important}.tool[data-v-e7c0fbef]:hover{background:var(--color-third-bg)}.tool.no-hover[data-v-e7c0fbef]{cursor:default}.tool.no-hover[data-v-e7c0fbef]:hover{background:unset!important}.tool.disabled[data-v-e7c0fbef]{cursor:not-allowed}.tool.disabled[data-v-e7c0fbef]:hover{background:unset!important}.my-node[data-v-e7c0fbef]{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node[data-v-e7c0fbef]:hover{text-decoration:none;background:#e2e2e2}.msgs[data-v-e7c0fbef]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box[data-v-e7c0fbef]{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell[data-v-e7c0fbef]{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal[data-v-e7c0fbef]{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title[data-v-e7c0fbef]{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option[data-v-e7c0fbef]{display:flex;align-items:center;padding:.6rem 0}.modal .option>span[data-v-e7c0fbef]{position:relative}.modal .mask[data-v-e7c0fbef]{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2[data-v-e7c0fbef]{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio[data-v-e7c0fbef]{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio[data-v-e7c0fbef]:first-child{border-left:none}.radio-group2 .active[data-v-e7c0fbef]{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm[data-v-e7c0fbef]{position:relative;display:inline-flex;justify-content:center}input[data-v-e7c0fbef]{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input[data-v-e7c0fbef]:hover{border:1px solid var(--color-input-border-hover)}input[data-v-e7c0fbef]:focus{border:1px solid var(--color-active)}.danger[data-v-e7c0fbef]{color:red!important}.switch[data-v-e7c0fbef]{width:4.5rem;height:2.2rem;border-radius:2rem;position:relative;display:flex;align-items:center;background:var(--color-swtich-bg);transition:all .3s}.switch.active[data-v-e7c0fbef]{background:var(--color-active)}.switch.active[data-v-e7c0fbef]:before{right:.2rem}.switch[data-v-e7c0fbef]:before{position:absolute;content:" ";transition:all .3s;right:calc(100% - 2rem);width:1.8rem;height:1.8rem;background:white;border-radius:50%}.display-type[data-v-e4f684be]{height:3rem;padding:0 .3rem;background:var(--color-sp-btn-bg);border-radius:1rem;display:flex;font-size:1.4rem;align-items:center;color:#a9a9a9}.display-type .type[data-v-e4f684be]{border-radius:.8rem;padding:0 1.3rem;height:2.8rem;align-items:center;display:flex;position:relative;cursor:pointer}.display-type .type.active[data-v-e4f684be]{background:var(--color-second-bg);color:var(--color-font-pure);box-shadow:0 0 6px 0 var(--color-tooltip-shadow)}.display-type .type-list[data-v-e4f684be]{position:absolute;background:var(--color-sp-btn-bg);right:0;top:3rem;font-size:1.4rem;box-shadow:0 0 6px 0 var(--color-tooltip-shadow);border-radius:.6rem;z-index:9;color:var(--color-font)}.display-type .type-list .item[data-v-e4f684be]{word-break:keep-all;padding:.8rem 1rem;cursor:pointer}.display-type .type-list .item.active[data-v-e4f684be],.display-type .type-list .item[data-v-e4f684be]:hover{color:var(--color-font-pure)}.display-type svg[data-v-e4f684be]{width:1.5rem}.loading[data-v-2697baa2]{border:2px solid;border-color:var(--color-loading-2) var(--color-loading-1) var(--color-loading-1) var(--color-loading-1);border-radius:100%;animation:circle-2697baa2 infinite 1s linear;width:2rem;height:2rem}.loading.small[data-v-2697baa2]{width:1.2rem;height:1.2rem}.loading.large[data-v-2697baa2]{width:3rem;height:3rem}@keyframes circle-2697baa2{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.base-button[data-v-5a7d79ba]{cursor:pointer;border-radius:.6rem;padding:0 1.5rem;display:inline-flex;align-items:center;justify-content:center;transition:all .3s;height:3.6rem;line-height:1;position:relative}.base-button .loading[data-v-5a7d79ba]{position:absolute}.base-button.disabled[data-v-5a7d79ba]{opacity:.6;cursor:not-allowed;-webkit-user-select:none;user-select:none}.base-button.small[data-v-5a7d79ba]{height:3rem}.base-button.small>span[data-v-5a7d79ba]{font-size:1.3rem}.base-button.large[data-v-5a7d79ba]{height:5rem;font-size:1.8rem;padding:0 2.2rem}.base-button.large>span[data-v-5a7d79ba]{font-size:1.8rem}.base-button[data-v-5a7d79ba]:hover:not(.link){opacity:.7}.base-button.primary[data-v-5a7d79ba]{background:var(--color-active)}.base-button.primary>span[data-v-5a7d79ba]{color:#fff}.base-button.gary[data-v-5a7d79ba]{background:#4b5563}.base-button.link[data-v-5a7d79ba]{border-radius:0;border-bottom:2px solid transparent}.base-button.link>span[data-v-5a7d79ba]{color:var(--color-font-8)}.base-button.link[data-v-5a7d79ba]:hover{border-bottom:2px solid var(--color-font-8)}.base-button.active[data-v-5a7d79ba]{opacity:.4}.key-notice[data-v-5a7d79ba]{margin-left:1rem;display:flex;align-items:center;justify-content:center;font-size:1.2rem;color:#fff}.key-notice .key[data-v-5a7d79ba]{transform:scale(.8)}.pop-confirm-content[data-v-7d29b3cc]{position:fixed;background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow);color:var(--color-font-8);padding:1.5rem;border-radius:.8rem;transform:translate(-50%,calc(-100% - 1rem));z-index:1001}.pop-confirm-content .text[data-v-7d29b3cc]{text-align:start;font-size:1.6rem;width:15rem;min-width:15rem}.pop-confirm-content .options[data-v-7d29b3cc]{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1rem}.setting-modal .modal-root[data-v-cb13d533]{z-index:9;background:var(--color-main-bg);border-radius:1.6rem;font-size:1.4rem;overflow:hidden;color:var(--color-font-pure)}.setting-modal .modal-root .modal-header[data-v-cb13d533]{padding:1.4rem;display:flex;justify-content:center;position:relative}.setting-modal .modal-root .modal-header .title[data-v-cb13d533]{font-size:2.2rem;text-align:left;margin-bottom:0}.setting-modal .modal-root .modal-header svg[data-v-cb13d533]{position:absolute;right:1rem;cursor:pointer;font-size:2.6rem}.setting-modal .modal-root .body[data-v-cb13d533]{width:60rem}.setting-modal .modal-root .body .modal-content[data-v-cb13d533]{background:var(--color-second-bg);flex:1;height:100%;box-sizing:border-box;padding:1rem 1rem 1rem 2rem;font-size:1.6rem;text-align:left;line-height:1.6}.setting-modal .modal-root .body .btns[data-v-cb13d533]{margin:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1.5rem;font-size:1.4rem}.setting-modal .modal-root[data-v-97cd84bd]{z-index:9;background:var(--color-main-bg);border-radius:1.6rem;font-size:1.4rem;overflow:hidden;color:var(--color-font-pure)}.setting-modal .modal-root .modal-header[data-v-97cd84bd]{padding:2.4rem;display:flex;justify-content:space-between}.setting-modal .modal-root .modal-header .title[data-v-97cd84bd]{font-size:2.6rem;font-weight:700;text-align:left;margin-bottom:0}.setting-modal .modal-root .modal-header svg[data-v-97cd84bd]{cursor:pointer;font-size:2.6rem}.setting-modal .modal-root .body[data-v-97cd84bd]{width:45vw;height:70vh;display:flex}.setting-modal .modal-root .body .left[data-v-97cd84bd]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;font-size:1.8rem}.setting-modal .modal-root .body .left .tabs[data-v-97cd84bd]{padding:1rem 2rem;display:flex;flex-direction:column;gap:1rem}.setting-modal .modal-root .body .left .tabs .tab[data-v-97cd84bd]{cursor:pointer;padding:1rem 1.5rem;border-radius:.8rem;display:flex;align-items:center;gap:1rem}.setting-modal .modal-root .body .left .tabs .tab.active[data-v-97cd84bd]{background:var(--color-item-bg)}.setting-modal .modal-root .body .left .icons[data-v-97cd84bd]{display:flex;gap:1rem;margin-bottom:2rem;font-size:2.4rem}.setting-modal .modal-root .body .modal-content[data-v-97cd84bd]{background:var(--color-second-bg);flex:1;height:100%;box-sizing:border-box;padding:1rem 1rem 1rem 2rem;border-radius:1.6rem;display:flex}.setting-modal .modal-root .body .modal-content .scroll[data-v-97cd84bd]{flex:1;padding-right:1rem;overflow:auto}.setting-modal .modal-root .body .modal-content .scroll .row[data-v-97cd84bd]{min-height:5rem;display:flex;justify-content:space-between;align-items:center}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper[data-v-97cd84bd]{height:3rem;flex:1;display:flex;justify-content:flex-end;align-items:center;gap:var(--space)}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper span[data-v-97cd84bd]{text-align:right;font-size:1.4rem;color:gray}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper .set-key[data-v-97cd84bd]{align-items:center}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper .set-key input[data-v-97cd84bd]{width:15rem;box-sizing:border-box;margin-right:1rem;height:2.8rem;outline:none;font-size:1.6rem;border:1px solid gray;border-radius:.3rem;padding:0 .5rem;background:var(--color-second-bg);color:var(--color-font-1)}.setting-modal .modal-root .body .modal-content .scroll .row .main-title[data-v-97cd84bd]{font-size:2.2rem;font-weight:700;color:var(--color-font-8)}.setting-modal .modal-root .body .modal-content .scroll .row .item-title[data-v-97cd84bd]{font-size:1.8rem}.setting-modal .modal-root .body .modal-content .scroll .desc[data-v-97cd84bd]{margin-bottom:1rem;font-size:1.4rem;text-align:left;color:var(--color-font)}.setting-modal .modal-root .body .modal-content .scroll .project-desc[data-v-97cd84bd]{text-align:start;font-size:1.6rem;padding-bottom:10rem}.setting-modal .modal-root .body .modal-content .scroll .line[data-v-97cd84bd]{border-bottom:1px solid #c4c3c3}.Author[data-v-43506a15]{display:flex;align-items:center;justify-content:space-between;font-size:1.2rem;position:relative}.Author.expand[data-v-43506a15]{margin-bottom:0}.Author .Author-left[data-v-43506a15]{display:flex;align-items:center;max-width:65%;word-break:break-all}.Author .Author-left .username[data-v-43506a15]{font-size:1.4rem;margin-right:.6rem}.Author .Author-left .expand-icon[data-v-43506a15]{cursor:pointer;margin-right:.6rem;width:2rem;height:2rem;transform:rotate(90deg)}.Author .Author-left .avatar[data-v-43506a15]{margin-right:.8rem;display:flex}.Author .Author-left .avatar img[data-v-43506a15]{width:2.8rem;height:2.8rem;border-radius:.4rem}.Author .Author-left .texts[data-v-43506a15]{flex:1}.Author .Author-left .owner[data-v-43506a15]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:.6rem;transform:scale(.8)}.Author .Author-left .dup[data-v-43506a15]{display:inline-block;background-color:transparent;color:red;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid red;font-size:1.2rem;font-weight:700;margin-right:.6rem;transform:scale(.8)}.Author .Author-left .mod[data-v-43506a15]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:.6rem}.Author:hover .add-tag[data-v-43506a15]{display:inline-block}.Author .Author-right[data-v-43506a15]{position:absolute;right:0;display:flex;align-items:center}.Author .Author-right .toolbar[data-v-43506a15]{display:flex;align-items:center;color:var(--color-gray);opacity:0;gap:.2rem}.Author .Author-right .toolbar[data-v-43506a15]:hover{opacity:1}.post-editor-wrapper[data-v-4522f98e]{width:100%;box-sizing:border-box;position:relative;overflow:hidden;transition:all .3s;color:var(--color-font)}.post-editor-wrapper.reply-post .post-editor[data-v-4522f98e]{border:1px solid var(--color-line)}.post-editor-wrapper.reply-post.isFocus .post-editor[data-v-4522f98e]{border:1px solid var(--color-active)}.post-editor-wrapper.reply-comment[data-v-4522f98e]{border-radius:var(--box-border-radius);overflow:hidden;border:1px solid var(--color-line)}.post-editor-wrapper.reply-comment.isFocus[data-v-4522f98e]{border:1px solid var(--color-active)}.post-editor-wrapper.reply-comment .toolbar[data-v-4522f98e]{background:var(--color-editor-toolbar)}.post-editor-wrapper .post-editor[data-v-4522f98e]{border-radius:var(--box-border-radius);transition:border .3s;width:100%;max-width:100%;padding:.6rem 1.4rem;box-sizing:border-box;outline:none;font-family:Avenir,Helvetica,Arial,sans-serif;font-size:1.4rem;min-height:13rem;resize:none;background:var(--box-background-color);color:var(--color-font-pure);border:1px solid transparent}.post-editor-wrapper .toolbar[data-v-4522f98e]{box-sizing:border-box;padding:.5rem 1rem;width:100%;position:relative;display:flex;justify-content:space-between;align-items:center}.post-editor-wrapper .toolbar .left[data-v-4522f98e]{display:flex;align-items:center;gap:1rem;font-size:2.6rem}.post-editor-wrapper .toolbar .left svg[data-v-4522f98e]{cursor:pointer}.post-editor-wrapper .toolbar .left .upload[data-v-4522f98e]{width:2.6rem;height:2.6rem;overflow:hidden;display:flex;justify-content:center;align-items:center}.post-editor-wrapper .toolbar .left .upload input[data-v-4522f98e]{width:2.6rem;height:2.6rem;cursor:pointer;position:absolute;opacity:0}.post-editor-wrapper .toolbar span[data-v-4522f98e]{color:gray;font-size:1.3rem}.post-editor-wrapper .get-cursor[data-v-4522f98e]{border-radius:var(--box-border-radius);transition:border .3s;width:100%;max-width:100%;padding:.6rem 1.4rem;box-sizing:border-box;outline:none;font-family:Avenir,Helvetica,Arial,sans-serif;font-size:1.4rem;min-height:13rem;resize:none;background:var(--box-background-color);color:var(--color-font-pure);border:1px solid transparent;position:absolute;top:0;z-index:-100}.post-editor-wrapper .emoticon-pack[data-v-4522f98e]{z-index:999999999;border-radius:1rem;padding:1rem;width:31rem;max-width:31rem;height:30rem;max-height:30rem;overflow:auto;background:var(--color-third-bg);border:1px solid var(--color-font-3);box-shadow:0 9px 24px -3px #0000000f,0 4px 8px -1px #0000001f;position:fixed;bottom:11rem;left:14rem}.post-editor-wrapper .emoticon-pack svg[data-v-4522f98e]{cursor:pointer;position:absolute;right:.8rem;font-size:2.4rem}.post-editor-wrapper .emoticon-pack .list[data-v-4522f98e]{margin:1rem 0}.post-editor-wrapper .emoticon-pack img[data-v-4522f98e]{cursor:pointer;width:3rem;height:3rem;padding:.5rem}.post-editor-wrapper .emoticon-pack span[data-v-4522f98e]{display:inline-block;cursor:pointer;font-size:2.3rem;padding:.5rem}.v-enter-active[data-v-2c9a538c],.v-leave-active[data-v-2c9a538c]{transition:opacity .3s ease}.v-enter-from[data-v-2c9a538c],.v-leave-to[data-v-2c9a538c]{opacity:0}.username[data-v-2c9a538c]{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num[data-v-2c9a538c]{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner[data-v-2c9a538c]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod[data-v-2c9a538c]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag[data-v-2c9a538c]{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove[data-v-2c9a538c]{display:inline}.my-tag .remove[data-v-2c9a538c]{cursor:pointer;margin-left:.5rem;display:none}.add-tag[data-v-2c9a538c]{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor[data-v-2c9a538c]{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}[data-v-2c9a538c]:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white}html.dark[data-v-2c9a538c]{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e}html[data-v-2c9a538c],body[data-v-2c9a538c]{font-size:62.5%}[data-v-2c9a538c]::-webkit-scrollbar{width:1rem;height:1rem}[data-v-2c9a538c]::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}[data-v-2c9a538c]::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex[data-v-2c9a538c]{display:flex;align-items:center;justify-content:space-between}.flex-end[data-v-2c9a538c]{justify-content:flex-end}.flex-center[data-v-2c9a538c]{justify-content:center}.p1[data-v-2c9a538c]{padding:1rem}.p2[data-v-2c9a538c]{padding:2rem}.p0[data-v-2c9a538c]{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http][data-v-2c9a538c]{text-underline-offset:.7ex;text-decoration:underline 1px}a[data-v-2c9a538c]{text-decoration:none;cursor:pointer}a[data-v-2c9a538c]:hover{text-decoration:underline}.tool[data-v-2c9a538c]{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg[data-v-2c9a538c]{width:1.6rem!important;height:1.6rem!important}.tool[data-v-2c9a538c]:hover{background:var(--color-third-bg)}.tool.no-hover[data-v-2c9a538c]{cursor:default}.tool.no-hover[data-v-2c9a538c]:hover{background:unset!important}.tool.disabled[data-v-2c9a538c]{cursor:not-allowed}.tool.disabled[data-v-2c9a538c]:hover{background:unset!important}.my-node[data-v-2c9a538c]{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node[data-v-2c9a538c]:hover{text-decoration:none;background:#e2e2e2}.msgs[data-v-2c9a538c]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box[data-v-2c9a538c]{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell[data-v-2c9a538c]{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal[data-v-2c9a538c]{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title[data-v-2c9a538c]{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option[data-v-2c9a538c]{display:flex;align-items:center;padding:.6rem 0}.modal .option>span[data-v-2c9a538c]{position:relative}.modal .mask[data-v-2c9a538c]{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2[data-v-2c9a538c]{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio[data-v-2c9a538c]{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio[data-v-2c9a538c]:first-child{border-left:none}.radio-group2 .active[data-v-2c9a538c]{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm[data-v-2c9a538c]{position:relative;display:inline-flex;justify-content:center}input[data-v-2c9a538c]{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input[data-v-2c9a538c]:hover{border:1px solid var(--color-input-border-hover)}input[data-v-2c9a538c]:focus{border:1px solid var(--color-active)}.danger[data-v-2c9a538c]{color:red!important}.html-wrapper[data-v-2c9a538c]{position:relative}.html-wrapper .mask[data-v-2c9a538c]{max-height:90rem;overflow:hidden;-webkit-mask-image:linear-gradient(180deg,#000 80%,transparent)}.html-wrapper .expand[data-v-2c9a538c]{position:absolute;z-index:1;bottom:2rem;padding:.2rem 1.5rem;border-radius:2rem;border:1px solid gray;background:white;color:gray;left:50%;transform:translate(-50%);cursor:pointer}.comment[data-v-d8fc1c55]{width:100%;box-sizing:border-box;margin-top:.6rem}.comment.isLevelOne[data-v-d8fc1c55]{border-bottom:1px solid var(--color-line);padding:.8rem 1rem;margin-top:0}.comment.ding[data-v-d8fc1c55]{background:rgba(255,255,0,.3)!important}.comment.isSimple .avatar[data-v-d8fc1c55],.comment.isSimple .expand-line[data-v-d8fc1c55]{display:none}.comment.isSimple .simple-wrapper[data-v-d8fc1c55]{padding-left:2.8rem}.comment.isSimple .w[data-v-d8fc1c55]{padding-left:0!important;padding-top:.5rem}.comment .comment-content-w .more[data-v-d8fc1c55]{text-align:center;margin:2rem 0}.comment .comment-content[data-v-d8fc1c55]{display:flex;position:relative}.comment .comment-content .expand-line[data-v-d8fc1c55]{cursor:pointer;margin-top:.6rem;width:2rem;min-width:2rem;position:relative}.comment .comment-content .expand-line[data-v-d8fc1c55]:after{position:absolute;left:50%;content:" ";height:100%;width:0;border-right:1px solid var(--color-line)}.comment .comment-content .expand-line[data-v-d8fc1c55]:hover:after{border-right:2px solid var(--color-active)}.comment .comment-content .right[data-v-d8fc1c55]{flex:1;width:calc(100% - 3rem)}.comment .comment-content .right .w[data-v-d8fc1c55]{padding-left:1rem}.comment .comment-content .right .w .post-editor-wrapper[data-v-d8fc1c55]{margin-top:1rem}.wrong-wrapper[data-v-d8fc1c55]{font-size:1.4rem;margin-bottom:1rem}.wrong-wrapper span[data-v-d8fc1c55]{cursor:pointer}.wrong-wrapper .del-line[data-v-d8fc1c55]{text-decoration:line-through}.wrong-wrapper .wrong-icon[data-v-d8fc1c55]{margin-left:.5rem}.wrong-wrapper .warning[data-v-d8fc1c55]{border-top:1px solid #e1e1e1;border-bottom:1px solid #e1e1e1;padding:1rem 0;margin-top:1rem;font-size:1.2rem;color:red}.toolbar[data-v-e3df61b2]{border-top:1px solid var(--color-line);height:3.8rem;padding-left:.6rem;display:flex;align-items:center;color:var(--color-gray);font-size:1.2rem;gap:.5rem}.comment[data-v-87050bc7]{width:100%;box-sizing:border-box;display:flex;gap:1rem;padding:1rem;border-bottom:1px solid var(--color-line)}.comment.isSimple .avatar[data-v-87050bc7]{display:none}.comment.isSimple .reply_content[data-v-87050bc7]{margin-top:.5rem!important}.comment .avatar[data-v-87050bc7]{display:flex}.comment .avatar img[data-v-87050bc7]{width:3.8rem;height:3.8rem;border-radius:.3rem}.comment .comment-body[data-v-87050bc7]{flex:1;display:flex;flex-direction:column}.comment .comment-body .texts[data-v-87050bc7]{display:flex;align-items:center}.comment .comment-body .reply_content[data-v-87050bc7]{margin-top:1rem;max-width:calc(100% - 5rem)}.comment .isRight[data-v-87050bc7]{align-items:flex-end}.comment .isRight .owner[data-v-87050bc7],.comment .isRight .mod[data-v-87050bc7],.comment .isRight .username[data-v-87050bc7]{margin:0 0 0 1rem}.comment .Author-right[data-v-87050bc7]{display:flex;flex-direction:column;align-items:center}.comment .Author-right .floor[data-v-87050bc7]{margin-left:0}.comment .Author-right .jump[data-v-87050bc7]{color:#929596;margin-top:.4rem;font-size:1.4rem}.comment .point[data-v-87050bc7]{margin:0 .5rem;font-size:1.6rem;display:flex;gap:.5rem;align-items:center;font-weight:700;color:#000}.sticky{position:sticky;bottom:-2px;z-index:2;background:var(--box-background-hover-color)!important}.sticky[stuck]{box-shadow:0 2px 20px #00000059!important}.v-enter-active[data-v-cd896901],.v-leave-active[data-v-cd896901]{transition:opacity .3s ease}.v-enter-from[data-v-cd896901],.v-leave-to[data-v-cd896901]{opacity:0}.username[data-v-cd896901]{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num[data-v-cd896901]{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner[data-v-cd896901]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod[data-v-cd896901]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag[data-v-cd896901]{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove[data-v-cd896901]{display:inline}.my-tag .remove[data-v-cd896901]{cursor:pointer;margin-left:.5rem;display:none}.add-tag[data-v-cd896901]{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor[data-v-cd896901]{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}[data-v-cd896901]:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white}html.dark[data-v-cd896901]{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e}html[data-v-cd896901],body[data-v-cd896901]{font-size:62.5%}[data-v-cd896901]::-webkit-scrollbar{width:1rem;height:1rem}[data-v-cd896901]::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}[data-v-cd896901]::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex[data-v-cd896901]{display:flex;align-items:center;justify-content:space-between}.flex-end[data-v-cd896901]{justify-content:flex-end}.flex-center[data-v-cd896901]{justify-content:center}.p1[data-v-cd896901]{padding:1rem}.p2[data-v-cd896901]{padding:2rem}.p0[data-v-cd896901]{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http][data-v-cd896901]{text-underline-offset:.7ex;text-decoration:underline 1px}a[data-v-cd896901]{text-decoration:none;cursor:pointer}a[data-v-cd896901]:hover{text-decoration:underline}.tool[data-v-cd896901]{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg[data-v-cd896901]{width:1.6rem!important;height:1.6rem!important}.tool[data-v-cd896901]:hover{background:var(--color-third-bg)}.tool.no-hover[data-v-cd896901]{cursor:default}.tool.no-hover[data-v-cd896901]:hover{background:unset!important}.tool.disabled[data-v-cd896901]{cursor:not-allowed}.tool.disabled[data-v-cd896901]:hover{background:unset!important}.my-node[data-v-cd896901]{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node[data-v-cd896901]:hover{text-decoration:none;background:#e2e2e2}.msgs[data-v-cd896901]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box[data-v-cd896901]{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell[data-v-cd896901]{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal[data-v-cd896901]{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title[data-v-cd896901]{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option[data-v-cd896901]{display:flex;align-items:center;padding:.6rem 0}.modal .option>span[data-v-cd896901]{position:relative}.modal .mask[data-v-cd896901]{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2[data-v-cd896901]{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio[data-v-cd896901]{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio[data-v-cd896901]:first-child{border-left:none}.radio-group2 .active[data-v-cd896901]{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm[data-v-cd896901]{position:relative;display:inline-flex;justify-content:center}input[data-v-cd896901]{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input[data-v-cd896901]:hover{border:1px solid var(--color-input-border-hover)}input[data-v-cd896901]:focus{border:1px solid var(--color-active)}.danger[data-v-cd896901]{color:red!important}.Post[data-v-cd896901]{position:unset!important;background:transparent!important;overflow:unset!important}.Post .main[data-v-cd896901]{background:transparent!important;padding:unset!important;width:100%!important}.Post .close-btn[data-v-cd896901]{display:none}.post-detail[data-v-cd896901]{text-align:start;position:fixed;z-index:1000;left:0;right:0;bottom:0;top:0;background:rgba(46,47,48,.8);overflow:auto;font-size:1.4rem;display:flex;justify-content:center;flex-wrap:wrap}.post-detail[data-v-cd896901] .subtle{background-color:#ecfdf5e6;border-left:4px solid #a7f3d0}.post-detail.isNight[data-v-cd896901] .subtle{background-color:#1a3332;border-left:4px solid #047857}.post-detail .main[data-v-cd896901]{display:flex;justify-content:flex-end;padding:3rem 8rem 15rem;background:var(--color-main-bg);position:relative;outline:none}.post-detail .main .main-wrapper[data-v-cd896901]{width:77rem;padding-bottom:2rem;display:flex;flex-direction:column;align-items:center;position:relative}.post-detail .main .main-wrapper .post-wrapper .header:hover .add-tag[data-v-cd896901]{display:inline-block}.post-detail .main .main-wrapper .loading-wrapper[data-v-cd896901]{height:20rem;display:flex;justify-content:center;align-items:center}.post-detail .main .main-wrapper #no-comments-yet[data-v-cd896901]{color:#a9a9a9;font-weight:700;text-align:center;width:100%;margin-bottom:2rem;box-sizing:border-box}.post-detail .main .relationReply[data-v-cd896901]{position:fixed;width:25vw;top:6.5rem;bottom:15rem;z-index:100;transform:translate(calc(100% + 2rem));font-size:2rem;overflow:hidden}.post-detail .main .relationReply .my-cell[data-v-cd896901]{background:var(--color-second-bg);border-radius:var(--box-border-radius) var(--box-border-radius) 0 0}.post-detail .main .relationReply .comments[data-v-cd896901]{max-height:calc(100% - 4.2rem);overflow:auto;background:var(--color-second-bg);border-radius:0 0 var(--box-border-radius) var(--box-border-radius)}.post-detail .main .call-list[data-v-cd896901]{z-index:9;position:absolute;top:12rem;border:1px solid var(--color-main-bg);background:var(--color-call-list-bg);box-shadow:0 5px 15px #0000001a;overflow:auto;max-height:30rem;border-radius:var(--box-border-radius);min-width:8rem;box-sizing:content-box}.post-detail .main .call-list .call-item[data-v-cd896901]{border-top:1px solid var(--color-main-bg);height:3rem;display:flex;padding:0 1rem;align-items:center;cursor:pointer;font-size:14px;box-sizing:border-box}.post-detail .main .call-list .call-item .select[data-v-cd896901],.post-detail .main .call-list .call-item[data-v-cd896901]:hover,.post-detail .main .call-list .call-item.select[data-v-cd896901]{background:var(--color-main-bg);text-decoration:none}.post-detail .main .call-list .call-item[data-v-cd896901]:nth-child(1){border-top:1px solid transparent}@media screen and (max-width: 1500px){.post-detail .main-wrapper[data-v-cd896901]{width:65vw!important}}@media screen and (max-width: 1280px){.post-detail .main-wrapper[data-v-cd896901]{width:75vw!important}}@media screen and (max-width: 960px){.post-detail .main-wrapper[data-v-cd896901]{width:100vw!important}}.post-detail .scroll-top[data-v-cd896901]{cursor:pointer;position:fixed;border-radius:.6rem;display:flex;align-items:center;justify-content:center;bottom:10rem;z-index:99;padding:.8rem 0;gap:1rem;width:4.2rem;transform:translate(6rem);font-size:2rem;background:var(--color-sp-btn-bg);color:var(--color-font-3)}.post-detail .scroll-top svg[data-v-cd896901]{font-size:2.4rem}.post-detail .refresh[data-v-cd896901]{cursor:pointer;position:fixed;border-radius:.6rem;display:flex;align-items:center;justify-content:center;bottom:10rem;z-index:99;padding:.8rem 0;gap:1rem;width:4.2rem;transform:translate(6rem);font-size:2rem;background:var(--color-sp-btn-bg);color:var(--color-font-3);bottom:23.5rem}.post-detail .refresh svg[data-v-cd896901]{font-size:2.4rem}.post-detail .scroll-to[data-v-cd896901]{cursor:pointer;position:fixed;border-radius:.6rem;align-items:center;justify-content:center;bottom:10rem;z-index:99;padding:.8rem 0;gap:1rem;width:4.2rem;transform:translate(6rem);font-size:2rem;background:var(--color-sp-btn-bg);color:var(--color-font-3);bottom:15rem;display:flex;flex-direction:column}.post-detail .scroll-to svg[data-v-cd896901]{font-size:2.4rem}.post-detail .scroll-to input[data-v-cd896901]{height:2.6rem;width:3.6rem;font-size:1.4rem;text-align:center;color:gray}.post-detail .close-btn[data-v-cd896901]{color:var(--color-font-3);cursor:pointer;position:fixed;top:3rem;transform:translate(4rem);font-size:1.6rem}.post-detail .top-reply[data-v-cd896901]{color:var(--color-font-3);cursor:pointer;font-size:2rem;display:flex}.base64_tooltip[data-v-c50fb66c]{box-shadow:0 3px 6px -4px #0000001f,0 6px 16px #00000014,0 9px 28px 8px #0000000d;background:var(--color-third-bg);min-height:2.2rem;max-width:20rem;padding:1rem;position:fixed;z-index:9998;display:flex;align-items:center;border-radius:.5rem;cursor:pointer;line-break:anywhere;font-size:1.4rem;color:var(--color-font-8)}.base64_tooltip svg[data-v-c50fb66c]{margin-left:1rem;font-size:3rem;color:var(--color-gray)}.base64_tooltip[data-v-c50fb66c] .base-button{margin-left:1rem;margin-top:1rem}.msg[data-v-8bf692ea]{cursor:default;margin-bottom:2rem;display:flex;font-size:1.4rem;box-sizing:border-box;border-radius:var(--box-border-radius);color:var(--color-font-8);background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow)}.msg.success .left[data-v-8bf692ea]{background:var(--color-active)}.msg.warning .left[data-v-8bf692ea]{background:#c8c002}.msg.error .left[data-v-8bf692ea]{background:red}.msg .left[data-v-8bf692ea]{border-radius:var(--box-border-radius) 0 0 var(--box-border-radius);display:flex;align-items:center;background:var(--color-active);color:#fff;width:3.6rem;font-size:2.4rem;justify-content:center}.msg .left svg[data-v-8bf692ea]{cursor:pointer}.msg .right[data-v-8bf692ea]{flex:1;padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center}.tag-modal .wrapper[data-v-341122ff]{z-index:9;background:var(--color-main-bg);color:var(--color-font-8);border-radius:1.6rem;font-size:1.4rem;padding:2rem 4rem;width:25rem}.tag-modal .wrapper .title[data-v-341122ff]{font-weight:700}.tag-modal .wrapper .btns[data-v-341122ff]{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1.5rem;font-size:1.4rem}.msgs[data-v-b73f4332]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.tag-modal .modal-root[data-v-882b932b]{z-index:9;background:var(--color-second-bg);color:var(--color-font-8);border-radius:1.6rem;font-size:1.4rem;width:50vw;height:70vh;display:flex;flex-direction:column}.tag-modal .modal-root .modal-header[data-v-882b932b]{padding:2.4rem;display:flex;justify-content:space-between}.tag-modal .modal-root .modal-header .title[data-v-882b932b]{font-size:2.6rem;font-weight:700;text-align:left;margin-bottom:0}.tag-modal .modal-root .modal-header i[data-v-882b932b]{cursor:pointer;font-size:2.2rem}.tag-modal .modal-root .modal-body[data-v-882b932b]{padding:2rem;padding-top:0;flex:1;overflow:auto}.tag-modal .modal-root .modal-body[data-v-882b932b] .cell{padding:2rem}.v-enter-active,.v-leave-active{transition:opacity .3s ease}.v-enter-from,.v-leave-to{opacity:0}.username{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove{display:inline}.my-tag .remove{cursor:pointer;margin-left:.5rem;display:none}.add-tag{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white}html.dark{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e}html,body{font-size:62.5%}::-webkit-scrollbar{width:1rem;height:1rem}::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex{display:flex;align-items:center;justify-content:space-between}.flex-end{justify-content:flex-end}.flex-center{justify-content:center}.p1{padding:1rem}.p2{padding:2rem}.p0{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http]{text-underline-offset:.7ex;text-decoration:underline 1px}a{text-decoration:none;cursor:pointer}a:hover{text-decoration:underline}.tool{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg{width:1.6rem!important;height:1.6rem!important}.tool:hover{background:var(--color-third-bg)}.tool.no-hover{cursor:default}.tool.no-hover:hover{background:unset!important}.tool.disabled{cursor:not-allowed}.tool.disabled:hover{background:unset!important}.my-node{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node:hover{text-decoration:none;background:#e2e2e2}.msgs{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option{display:flex;align-items:center;padding:.6rem 0}.modal .option>span{position:relative}.modal .mask{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio:first-child{border-left:none}.radio-group2 .active{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm{position:relative;display:inline-flex;justify-content:center}input{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input:hover{border:1px solid var(--color-input-border-hover)}input:focus{border:1px solid var(--color-active)}.danger{color:red!important}.target-user-tags[data-v-d41b820d]{background:var(--color-second-bg);color:var(--color-font);word-break:break-all;text-align:start;font-size:1.4rem;box-shadow:0 2px 3px #0000001a;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.target-user-tags .add-tag[data-v-d41b820d]{display:inline-block}.loaded[data-v-d41b820d]{font-size:1.4rem;display:flex;align-items:center;gap:1rem;color:var(--color-font-pure)} ');

    Ic();
    let e = vue.createApp(Cc);
    e.config.unwrapInjectedRef = !0, e.mount(we);
  }

})(Vue);